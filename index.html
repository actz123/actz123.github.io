<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#33363b">
    <meta name="msapplication-TileColor" content="#33363b">
    
    
    
    
    <meta name="keywords" content="Life, ARIA, Hexo">
    
    
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
    
    
    <link rel="icon" type="image/png" sizes="192x192" href="/favicons/android-chrome-192x192.png">
    
    
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    
    
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
    
    
    <link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#33363b">
    
    
    <link rel="manifest" href="/favicons/site.webmanifest">
    
    
    <meta name="msapplication-config" content="/favicons/browserconfig.xml">
    
    
    <link rel="alternate" href="/atom.xml" title="Actz" type="application/atom+xml" />
    
    
    <link rel="shortcut icon" type="image/x-icon" href="/favicons/favicon.ico">
    
    
    <link rel="stylesheet" type="text/css" href="/css/normalize.css">
    <link rel="stylesheet" type="text/css" href="/css/index.css">
    
    
<link rel="stylesheet" type="text/css" href="/css/page.css">
<link rel="stylesheet" type="text/css" href="/css/post.css">

    <link rel="stylesheet" type="text/css" href="/css/custom.css">
    <link rel="stylesheet" type="text/css" href="/css/atom-one-dark.css">
    <link rel="stylesheet" type="text/css" href="/css/lightgallery.min.css">
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script defer type="text/javascript" src="/js/util.js"></script>
    <script defer type="text/javascript" src="/js/clipboard.min.js"></script>
    <script defer type="text/javascript" src="/js/scrollspy.js"></script>
    <script defer type="text/javascript" src="/js/fontawesome-all.min.js"></script>
    <script defer type="text/javascript" src="/js/lightgallery.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-fullscreen.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-hash.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-pager.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-thumbnail.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-zoom.min.js"></script>
    
    <script defer src="/js/busuanzi.pure.mini.js"></script>
    
    
    <script defer type="text/javascript" src="/js/search.js"></script>
    <script type="text/javascript">
    $(document).ready(function () {
      var searchPath = "search.xml";
      if (searchPath.length === 0) {
        searchPath = "search.xml";
      }
      var path = "/" + searchPath;
      searchFunc(path, "search-input", "search-result");
    });
    </script>
    
    
    <script defer type="text/javascript" src="/js/index.js"></script>
    <script type="text/javascript">
    $(document).ready(function () {
      var cb = null;
      var els = $(".post figure.highlight");
      if (els.length) {
        // Enabled Hexo highlight line number.
        $(els).each(function (i, e) {
          // $(e).before("<button class=\"copy button\">Copy</button>");
          $(e).before([
            "<div class=\"code-titlebar\">",
              "<div class=\"titlebar-left\">",
                "<button class=\"copy\" aria-label=\"Copy\"><i class=\"far fa-copy\"></i></button>",
              "</div>",
              "<div class=\"titlebar-center\">",
                "code",
              "</div>",
              "<div class=\"titlebar-right\">",
                "<button class=\"button-dot dot-minimize\" aria-label=\"Decoration\"></button>",
                "<button class=\"button-dot dot-maximize\" aria-label=\"Decoration\"></button>",
                "<button class=\"button-dot dot-close\" aria-label=\"Decoration\"></button>",
              "</div>",
            "</div>"
          ].join(""));
        });
        cb = new ClipboardJS("button.copy", {
          "target": function (trigger) {
              // Get target element by DOM API.
              return trigger.parentNode.parentNode.nextElementSibling.firstChild.firstChild.firstChild.lastChild.firstChild.firstChild;
          }
        });
      } else {
        // Disabled Hexo highlight line number.
        els = $(".post pre code");
        $(els).each(function (i, e) {
          // Add button before pre, not code.
          // $(e).parent().before("<button class=\"copy button\">Copy</button>");
          $(e).before([
            "<div class=\"code-titlebar\">",
              "<div class=\"titlebar-left\">",
                "<button class=\"copy\" aria-label=\"Copy\"><i class=\"far fa-copy\"></i></button>",
              "</div>",
              "<div class=\"titlebar-center\">",
                "code",
              "</div>",
              "<div class=\"titlebar-right\">",
                "<button class=\"button-dot dot-minimize\" aria-label=\"Decoration\"></button>",
                "<button class=\"button-dot dot-maximize\" aria-label=\"Decoration\"></button>",
                "<button class=\"button-dot dot-close\" aria-label=\"Decoration\"></button>",
              "</div>",
            "</div>"
          ].join(""));
        });
        cb = new ClipboardJS("button.copy", {
          "target": function (trigger) {
              // Get target element by DOM API.
              return trigger.parentNode.parentNode.nextElementSibling;
          }
        });
      }
      cb.on("success", function (e) {
        e.clearSelection();
        var trigger = e.trigger;
        // Change button text as a user tip.
        trigger.innerHTML = "<i class=\"far fa-check-square\"></i>";
        $(trigger).addClass("copied");
        // Change button text back;
        setTimeout(function () {
          trigger.innerHTML = "<i class=\"far fa-copy\"></i>";
          $(trigger).removeClass("copied");
        }, 1500);
      });
    });
    </script>
    
    <script defer type="text/javascript" src="/js/custom.js"></script>
    <title>Actz</title>
  <meta name="generator" content="Hexo 7.1.1"></head>
  <body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN"  data-spy="scroll" data-target=".list-group">
    
<header id="header" class="header" style="background: #33363b;">
  <div class="container">
    <div class="header-container">
      <div class="header-title">
        <h1 class="title"><a href="/">Actz</a></h1>
        <h2 class="subtitle"></h2>
      </div>
      
      <div class="logo">
        <img src="/images/logo.png" alt="logo">
      </div>
      
    </div>
    <nav id="nav" class="nav">
      <a id="nav-toggle" class="nav-toggle" aria-hidden="true"><i class="fas fa-bars" aria-label="Toggle Navbar"></i></a>
      <ul id="menu" role="menubar" aria-hidden="false">
        
        <li role="menuitem"><a href="/" class="current"><i class="fas fa-home"></i><span class="menu-text">首页</span></a></li>
        
        <li role="menuitem"><a href="/archives/"><i class="fas fa-archive"></i><span class="menu-text">归档</span></a></li>
        
        <li role="menuitem"><a href="/categories/"><i class="fas fa-th-list"></i><span class="menu-text">分类</span></a></li>
        
        <li role="menuitem"><a href="/tags/"><i class="fas fa-tags"></i><span class="menu-text">标签</span></a></li>
        
        <li role="menuitem"><a href="/about/"><i class="fas fa-user-edit"></i><span class="menu-text">关于</span></a></li>
        
      </ul>
    </nav>
  </div>
</header>


    <main id="main" class="main">
      <div class="container">
        <div class="main-container">
          <div class="content">
            

<div id="index" class="index page">
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="https://actz123.github.io/2024/02/27/%E9%A1%BA%E5%BA%8F%E8%A1%A8/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="zdx">
        <meta itemprop="description" content="">
        <meta itemprop="image" content="/images/avatar.png">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="Actz">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2024/02/27/%E9%A1%BA%E5%BA%8F%E8%A1%A8/" itemprop="url">顺序表</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2024-02-27T15:12:07+08:00">2024-02-27 15:12:07</time></span>
        </span>
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      
      
    </main>
    <footer class="post-footer">
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="https://actz123.github.io/2024/02/27/%E6%8E%92%E5%BA%8F%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="zdx">
        <meta itemprop="description" content="">
        <meta itemprop="image" content="/images/avatar.png">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="Actz">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2024/02/27/%E6%8E%92%E5%BA%8F%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81/" itemprop="url">排序示例代码</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2024-02-27T14:47:13+08:00">2024-02-27 14:47:13</time></span>
        </span>
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-categories">
          
          <i class="far fa-folder-open"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%93%9D%E6%A1%A5%E6%9D%AF/" itemprop="url" rel="index"><span itemprop="name">蓝桥杯</span></a></span><i class="fas fa-angle-right"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%93%9D%E6%A1%A5%E6%9D%AF/%E4%BB%A3%E7%A0%81%E9%9B%86%E5%90%88/" itemprop="url" rel="index"><span itemprop="name">代码集合</span></a></span>
        </span>
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <h1 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h1><figure class="hljs highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#冒泡排序</span></span><br><span class="line">n=<span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">a=<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>,<span class="built_in">input</span>().split()))</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,n-<span class="number">1</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,n-i):</span><br><span class="line">        <span class="keyword">if</span> a[j] &gt; a[j+<span class="number">1</span>]:</span><br><span class="line">            a[j],a[j+<span class="number">1</span>] = a[j+<span class="number">1</span>],a[j]  </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot; &quot;</span>.join(<span class="built_in">map</span>(<span class="built_in">str</span>,a)))</span><br></pre></td></tr></table></figure>

<h1 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h1><figure class="hljs highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">n=<span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">a=<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>,<span class="built_in">input</span>().split()))</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n-<span class="number">1</span>):</span><br><span class="line">    min_value =a[i]</span><br><span class="line">    min_idx =i</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i,n):</span><br><span class="line">        <span class="keyword">if</span> a[j] &lt; min_value:</span><br><span class="line">            min_value=a[j]</span><br><span class="line">            min_idx=j</span><br><span class="line">    <span class="built_in">print</span>(a)</span><br><span class="line">    a[min_idx],a[i]=a[i],a[min_idx]</span><br><span class="line">    <span class="comment">#将最小值和最前面的元素交换</span></span><br></pre></td></tr></table></figure>

<h1 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h1><figure class="hljs highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">n=<span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">a=<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>,<span class="built_in">input</span>().split()))</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,n):</span><br><span class="line">    value =a[i]</span><br><span class="line">    insert_idx =<span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i-<span class="number">1</span>,-<span class="number">1</span>,-<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> a[j]&gt;value:</span><br><span class="line">            a[j+<span class="number">1</span>] =a[j]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            insert_idx = j+<span class="number">1</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    a[insert_idx] = value</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot; &quot;</span>.join(<span class="built_in">map</span>(<span class="built_in">str</span>,a)))</span><br></pre></td></tr></table></figure>

<h1 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h1><figure class="hljs highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">partition</span>(<span class="params">a,left,right</span>):</span><br><span class="line">    idx =left +<span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(left+<span class="number">1</span>,right+<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> a[i]&lt;=a[left]:</span><br><span class="line">            a[idx],a[i]=a[i],a[idx]</span><br><span class="line">            idx +=<span class="number">1</span></span><br><span class="line">    a[left],a[idx-<span class="number">1</span>]=a[idx-<span class="number">1</span>],a[left]</span><br><span class="line">    <span class="keyword">return</span> idx -<span class="number">1</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">quicksort</span>(<span class="params">a,left,right</span>):</span><br><span class="line">    <span class="keyword">if</span> left &lt; right:</span><br><span class="line">        mid =partition(a,left,right)</span><br><span class="line">        quicksort(a,left,mid-<span class="number">1</span>)</span><br><span class="line">        quicksort(a,mid+<span class="number">1</span>,right)</span><br><span class="line">n=<span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">a=<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>,<span class="built_in">input</span>().split()))</span><br><span class="line">quicksort(a,<span class="number">0</span>,n-<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot; &quot;</span>.join(<span class="built_in">map</span>(<span class="built_in">str</span>,a)))	</span><br></pre></td></tr></table></figure>

<h1 id="归并排序"><a href="#归并排序" class="headerlink" title="归并排序"></a>归并排序</h1><figure class="hljs highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#归并排序 合并两个list</span></span><br><span class="line">n=<span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">a=<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>,<span class="built_in">input</span>().split()))</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Merge</span>(<span class="params">A,B</span>):</span><br><span class="line">    result=[]</span><br><span class="line">    <span class="keyword">while</span> <span class="built_in">len</span>(A) !=<span class="number">0</span> <span class="keyword">and</span> <span class="built_in">len</span>(B) !=<span class="number">0</span>:</span><br><span class="line">        <span class="keyword">if</span> A[<span class="number">0</span>] &lt;=B[<span class="number">0</span>]:</span><br><span class="line">            result.append(A.pop(<span class="number">0</span>))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            result.append(B.pop(<span class="number">0</span>))</span><br><span class="line">    result.extend(A)</span><br><span class="line">    result.extend(B)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">MergeSort</span>(<span class="params">A</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(A) &lt;<span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> A</span><br><span class="line">    mid =<span class="built_in">len</span>(A)//<span class="number">2</span></span><br><span class="line">    left =MergeSort(A[:mid])</span><br><span class="line">    right= MergeSort(A[mid:])</span><br><span class="line">    <span class="keyword">return</span> Merge(left,right)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot; &quot;</span>.join(<span class="built_in">map</span>(<span class="built_in">str</span>,MergeSort(a))))</span><br></pre></td></tr></table></figure>

<h1 id="桶排序"><a href="#桶排序" class="headerlink" title="桶排序"></a>桶排序</h1><figure class="hljs highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#桶排序</span></span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> chain</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Bucket_Sort</span>(<span class="params">a,bucketcount</span>):</span><br><span class="line">    minvalue,maxvalue=<span class="built_in">min</span>(a),<span class="built_in">max</span>(a)</span><br><span class="line">    bucketsize =(maxvalue-minvalue+<span class="number">1</span>)//bucketcount</span><br><span class="line">    res =[[] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(bucketcount+<span class="number">1</span>)]</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> a:</span><br><span class="line">        idx =(x-minvalue)//bucketsize</span><br><span class="line">        res[idx].append(x)</span><br><span class="line">    <span class="keyword">for</span> res_x <span class="keyword">in</span> res:</span><br><span class="line">        res_x.sort()</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">list</span>(chain(*res))</span><br><span class="line">n=<span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">a=<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>,<span class="built_in">input</span>().split()))</span><br><span class="line"></span><br><span class="line">a=Bucket_Sort(a,<span class="built_in">min</span>(n,<span class="number">10000</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot; &quot;</span>.join(<span class="built_in">map</span>(<span class="built_in">str</span>,a)))</span><br></pre></td></tr></table></figure>


      
    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%A4%87%E8%B5%9B/" rel="tag"><i class="fas fa-tags"></i>蓝桥杯备赛</a>
        
      </div>
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="https://actz123.github.io/2024/02/22/%E7%BB%84%E5%90%88%E6%95%B0%E5%AD%A6/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="zdx">
        <meta itemprop="description" content="">
        <meta itemprop="image" content="/images/avatar.png">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="Actz">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2024/02/22/%E7%BB%84%E5%90%88%E6%95%B0%E5%AD%A6/" itemprop="url">组合数学</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2024-02-22T17:42:43+08:00">2024-02-22 17:42:43</time></span>
        </span>
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-categories">
          
          <i class="far fa-folder-open"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%86%B2%E5%88%BA%E8%90%A5/" itemprop="url" rel="index"><span itemprop="name">蓝桥杯冲刺营</span></a></span><i class="fas fa-angle-right"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%86%B2%E5%88%BA%E8%90%A5/13-%E7%BB%84%E5%90%88%E6%95%B0%E5%AD%A6/" itemprop="url" rel="index"><span itemprop="name">13.组合数学</span></a></span>
        </span>
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <h1 id="组合数学"><a href="#组合数学" class="headerlink" title="组合数学"></a>组合数学</h1><h2 id="计数原理：加法原理"><a href="#计数原理：加法原理" class="headerlink" title="计数原理：加法原理"></a>计数原理：加法原理</h2><ul>
<li>加法原理： 集合 (S) 被分成两两不相交的部分 (S_1, S_2, S_3, …, S_m)，那么 (S) 的对象数目等于：(|S| &#x3D; |S_1| + |S_2| + |S_3| + … + |S_m|)</li>
<li>例： 一个学生想学一门数学课，一门文化课，但不能同时选，现在从 44 门数学课和 44 门文化课中选，一共有 (4 + 4 &#x3D; 8) 种方法选一门课。</li>
<li>加法原理的关键是将计数分解为若干个独立（不相容）的部分，保证既不重复也不遗漏地进行计数。 加法原理是利用完备事件组的一个体现，我们可以利用一个集合的补记做题。</li>
</ul>
<h3 id="例题：分割立方体-lanqiaoOJ-题号-1620"><a href="#例题：分割立方体-lanqiaoOJ-题号-1620" class="headerlink" title="例题：分割立方体 lanqiaoOJ 题号 1620"></a>例题：分割立方体 lanqiaoOJ 题号 1620</h3><p><strong>题目描述：</strong> 一个立方体，边长为 �<em>n</em>，分割成 �×�×�<em>n</em>×<em>n</em>×<em>n</em> 个单位立方体。任意两个单位立方体，或者有 22 个公共点，或者有 44 个公共点，或者没有公共点。请问，没有公共点和有 22 个公共点的立方体，共有多少对？</p>
<p><strong>输入描述：</strong> 一个整数�，1&lt;&#x3D;�&lt;&#x3D;30一个整数<em>n</em>，1&lt;&#x3D;<em>n</em>&lt;&#x3D;30</p>
<p><strong>思路：</strong> 反过来计算，先算出有 44 个公共点的立方体有多少对，然后用总对数减去。分几种情况讨论：</p>
<ol>
<li>正方体和周围 33 个正方体相邻，这种情况共有 88 个，就是顶角上的 88 个，总个数 3×83×8；</li>
<li>正方体和周围 44 个正方体相邻，这种情况共有 (�−2)×12(<em>n</em>−2)×12 个 （棱）总个数 4×(�−2)×124×(<em>n</em>−2)×12；</li>
<li>正方体和周围 55 个正方体相邻，这种情况共有 6×(�×�−4×�+4)6×(<em>n</em>×<em>n</em>−4×<em>n</em>+4) 个，总个数 5×6×(�×�−4×�+4)5×6×(<em>n</em>×<em>n</em>−4×<em>n</em>+4)；</li>
<li>正方体和周围 66 个正方体相邻，这种情况共有 (�×�×�−�×�×6+�×12−8)(<em>n</em>×<em>n</em>×<em>n</em>−<em>n</em>×<em>n</em>×6+<em>n</em>×12−8) 个，总个数 6×(�×�×�−�×�×6+�×12−8)6×(<em>n</em>×<em>n</em>×<em>n</em>−<em>n</em>×<em>n</em>×6+<em>n</em>×12−8)； 最后把这 44 个情况求和再除以 22。</li>
</ol>
<p>正方体一共 �3<em>n</em>3 个，共有 �3(�3−1)22<em>n</em>3(<em>n</em>3−1) 种关系</p>
<ol>
<li>正方体和周围 33 个正方体相邻，总个数 3×83×8；</li>
<li>正方体和周围 44 个正方体相邻，总个数 4×(�−2)×124×(<em>n</em>−2)×12；</li>
<li>正方体和周围 55 个正方体相邻，总个数 5×6×(�×�−4×�+4)5×6×(<em>n</em>×<em>n</em>−4×<em>n</em>+4)；</li>
<li>正方体和周围 66 个正方体相邻，总个数 6×(�×�×�−�×�×6+�×12−8)6×(<em>n</em>×<em>n</em>×<em>n</em>−<em>n</em>×<em>n</em>×6+<em>n</em>×12−8)；</li>
<li>最后把这 44 个情况求和再除以 22。</li>
</ol>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> n; cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">if</span>(n == <span class="number">1</span>)&#123;             <span class="comment">// 边长为 1 时特判</span></span><br><span class="line">        cout &lt;&lt; <span class="number">0</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> sum = n * n * n * (n * n * n - <span class="number">1</span>) / <span class="number">2</span>;     <span class="comment">//总数</span></span><br><span class="line">    <span class="type">int</span> edge3 = <span class="number">8</span>;</span><br><span class="line">    <span class="type">int</span> ans3 = <span class="number">3</span> * edge3;</span><br><span class="line">    <span class="type">int</span> edge4 = (n - <span class="number">2</span>) * <span class="number">12</span>;</span><br><span class="line">    <span class="type">int</span> ans4 = <span class="number">4</span> * edge4;</span><br><span class="line">    <span class="type">int</span> edge5 = n * n - <span class="number">4</span> * n + <span class="number">4</span>;</span><br><span class="line">    <span class="type">int</span> ans5 = <span class="number">5</span> * <span class="number">6</span> * edge5;</span><br><span class="line">    <span class="type">int</span> edge6 = n * n * n - n * n * <span class="number">6</span> + n * <span class="number">12</span> - <span class="number">8</span>;</span><br><span class="line">    <span class="type">int</span> ans6 = <span class="number">6</span> * edge6;</span><br><span class="line">    cout &lt;&lt; sum - (ans3 + ans4 + ans5 + ans6) / <span class="number">2</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">n = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line"><span class="keyword">if</span> n == <span class="number">1</span>: # 边长为 <span class="number">1</span> 时特判</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    sum = n * n * n * (n * n * n - <span class="number">1</span>) <span class="comment">// 2 # 总数</span></span><br><span class="line">    edge3 = <span class="number">8</span></span><br><span class="line">    ans3 = <span class="number">3</span> * edge3</span><br><span class="line">    edge4 = (n - <span class="number">2</span>) * <span class="number">12</span></span><br><span class="line">    ans4 = <span class="number">4</span> * edge4</span><br><span class="line">    edge5 = n * n - <span class="number">4</span> * n + <span class="number">4</span></span><br><span class="line">    ans5 = <span class="number">5</span> * <span class="number">6</span> * edge5</span><br><span class="line">    edge6 = n * n * n - n * n * <span class="number">6</span> + n * <span class="number">12</span> - <span class="number">8</span></span><br><span class="line">    ans6 = <span class="number">6</span> * edge6</span><br><span class="line">    <span class="built_in">print</span>(sum - (ans3 + ans4 + ans5 + ans6) <span class="comment">// 2)</span></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> Main &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="built_in">main</span>(String[] args) &#123;</span><br><span class="line">        Scanner sc = <span class="keyword">new</span> <span class="built_in">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">int</span> n = sc.<span class="built_in">nextInt</span>();</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">1</span>) &#123; <span class="comment">// 边长为 1 时特判</span></span><br><span class="line">            System.out.<span class="built_in">println</span>(<span class="number">0</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> sum = (<span class="type">long</span>) n * n * n * (n * n * n - <span class="number">1</span>) / <span class="number">2</span>; <span class="comment">// 总数</span></span><br><span class="line">        <span class="type">int</span> edge3 = <span class="number">8</span>;</span><br><span class="line">        <span class="type">int</span> ans3 = <span class="number">3</span> * edge3;</span><br><span class="line">        <span class="type">int</span> edge4 = (n - <span class="number">2</span>) * <span class="number">12</span>;</span><br><span class="line">        <span class="type">int</span> ans4 = <span class="number">4</span> * edge4;</span><br><span class="line">        <span class="type">int</span> edge5 = n * n - <span class="number">4</span> * n + <span class="number">4</span>;</span><br><span class="line">        <span class="type">int</span> ans5 = <span class="number">5</span> * <span class="number">6</span> * edge5;</span><br><span class="line">        <span class="type">int</span> edge6 = n * n * n - n * n * <span class="number">6</span> + n * <span class="number">12</span> - <span class="number">8</span>;</span><br><span class="line">        <span class="type">int</span> ans6 = <span class="number">6</span> * edge6;</span><br><span class="line">        System.out.<span class="built_in">println</span>(sum - (ans3 + ans4 + ans5 + ans6) / <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="计数原理：乘法原理"><a href="#计数原理：乘法原理" class="headerlink" title="计数原理：乘法原理"></a><strong>计数原理：乘法原理</strong></h2><p>令 (S) 是对象的有序对 ((a, b)) 的集合，其中第一个对象 (a) 来自大小为 (p) 的一个集合，对于对象 (a) 的每个选择，对象 (b) 有 (q) 个选择，那么 (S) 的大小：(|S| &#x3D; p \times q)</p>
<p>例：中性笔的长度有 33 种，颜色有 44 种，直径有 55 种。不同种类的中性笔有：(3 \times 4 \times 5 &#x3D; 60) 种。</p>
<p>例：(34 \times 55 \times 72 \times 113) 的正整数因子有多少？答：这是算数基本定理的概念。33 有 00 ~ 44 这 55 种选择，55 有 66 个选择，77 有 33 个选择，1111 有 44 个选择，因子总数是 (5 \times 6 \times 3 \times 4 &#x3D; 360) 种。</p>
<h2 id="排列数"><a href="#排列数" class="headerlink" title="排列数"></a>排列数</h2><p>排列是有序的。</p>
<p>不可重复排列数：从 (n) 个不同的物品中取出 (r) 个，排列数为：</p>
<p>[\mathrm{P_{n}^{r}&#x3D;n(n-1)(n-2)…(n-r+1)&#x3D;\frac{n!}{(n-r)!}}]</p>
<p>可重复排列数，从 (n) 个不同的物品中可重复地取出 (r) 个的排列数为：(n^r)。</p>
<h2 id="组合数"><a href="#组合数" class="headerlink" title="组合数"></a>组合数</h2><p>排列是有序的，组合是无序的。</p>
<p>如果 (S) 中的元素都不相同，组合数：</p>
<p>[\mathrm{C*{n}^{r}&#x3D;{\binom{n}{k}}&#x3D;{\frac{P*{n}^{r}}{r!}}&#x3D;{\frac{n!}{r!(n-r)!}}}]</p>
<h2 id="糊涂人寄信-lanqiaoOJ-题号-1622"><a href="#糊涂人寄信-lanqiaoOJ-题号-1622" class="headerlink" title="糊涂人寄信 lanqiaoOJ 题号 1622"></a>糊涂人寄信 lanqiaoOJ 题号 1622</h2><p><strong>题目描述：</strong> 有一个糊涂人，写了 (n) 封信和 (n) 个信封，到了邮寄的时候，把所有的信都装错了信封。求装错信封可能的种类数。</p>
<p><strong>输入描述：</strong> 每行输入一个正整数 (n)，表示一种情况。((n \leq 20))</p>
<p><strong>输出描述：</strong> 输出相应的答案。</p>
<h3 id="解题思路："><a href="#解题思路：" class="headerlink" title="解题思路："></a>解题思路：</h3><p>题目建模为：有 (1 \sim n) 个数字，分别放在 (n) 个位置，问都放错的情况有多少种。</p>
<p>用 DP 来做。定义 (dp[])，(dp[i]) 表示数字 (1 \sim i) 都放错的种类数。(dp[n]) 是答案。</p>
<p>下面考虑状态转移方程，从 (1 \sim i) 递推到 (i)。</p>
<p>数字 (i) 如果放错，有 (i-1) 个位置可以放，假设其放在第 (k) 个位置。对于数字 (k)，可以放在 (i) 位置也可以不放在 (i) 位置。</p>
<p>如果 (k) 放在 (i) 位置，那么对于剩下 (i-2) 个数字放的次数，就是 (i-2) 个数字都放错的方法数 (dp[i-2])。</p>
<p>如果 (k) 不放在 (i) 位置，和 (i-1) 个数字放错的情况相同，为 (dp[i-1])。</p>
<p>状态转移方程：(dp[i] &#x3D; (i-1) \times (dp[i-1] + dp[i-2]))</p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line">ll dp[<span class="number">30</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    dp[<span class="number">1</span>]= dp[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    dp[<span class="number">2</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">3</span>;i&lt;=<span class="number">22</span>;i++) dp[i]=(i<span class="number">-1</span>)*(dp[i<span class="number">-1</span>]+dp[i<span class="number">-2</span>]);</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="keyword">while</span>(cin&gt;&gt;n) cout&lt;&lt;dp[n]&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">import</span> sys</span></span><br><span class="line"><span class="function">def <span class="title">f</span><span class="params">(n)</span>:</span></span><br><span class="line"><span class="function">    if n=</span>=<span class="number">0</span> <span class="keyword">or</span> n==<span class="number">1</span>: <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    elif n==<span class="number">2</span>:  <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:  <span class="built_in">return</span> (n<span class="number">-1</span>)*(<span class="built_in">f</span>(n<span class="number">-1</span>)+<span class="built_in">f</span>(n<span class="number">-2</span>))</span><br><span class="line"><span class="keyword">for</span> n in sys.stdin:   #读入n，和C++代码的<span class="keyword">while</span>(cin&gt;&gt;n)功能一样</span><br><span class="line">    n = <span class="built_in">int</span>(n)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">f</span>(n))</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">long</span>[] dp = <span class="keyword">new</span> <span class="type">long</span>[<span class="number">30</span>];</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner sc = <span class="keyword">new</span> <span class="built_in">Scanner</span>(System.in);</span><br><span class="line">        dp[<span class="number">1</span>] = dp[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        dp[<span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">3</span>; i &lt;= <span class="number">22</span>; i++) &#123;</span><br><span class="line">            dp[i] = (i - <span class="number">1</span>) * (dp[i - <span class="number">1</span>] + dp[i - <span class="number">2</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (sc.<span class="built_in">hasNext</span>()) &#123;</span><br><span class="line">            <span class="type">int</span> n = sc.<span class="built_in">nextInt</span>();</span><br><span class="line">            System.out.<span class="built_in">println</span>(dp[n]);</span><br><span class="line">        &#125;</span><br><span class="line">        sc.<span class="built_in">close</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="鸽巢原理"><a href="#鸽巢原理" class="headerlink" title="鸽巢原理"></a>鸽巢原理</h2><p>鸽巢原理，又称抽屉原理。</p>
<p><strong>鸽巢原理：</strong> 把 (n+1) 个物体放进 (n) 个盒子，至少有一个盒子包含 22 个或更多的物体。</p>
<ul>
<li>例：在 370370 人中，至少有 22 人生日相同；</li>
<li>例：�<em>n</em> 个人互相握手，一定有 22 个人握手次数相同。</li>
</ul>
<p>例：�<em>n</em> 个人互相握手，一定有 22 个人握手次数相同。 每人跟其他人握手，最少可以是 00 次，最多可以是�−1<em>n</em>−1次。 如果握手最少的是 00 次，那么剩下的�−1<em>n</em>−1人中，握手最多的人不会超过�−2<em>n</em>−2次。0∼�−20∼<em>n</em>−2 共�−1<em>n</em>−1种情况。 如果握手最少的张三是 11 次，那么剩下的�−1<em>n</em>−1人中，握手最多的李四除了跟张三握手一次，跟其他�−2<em>n</em>−2人最多握手�−2<em>n</em>−2次，李四最多握手�−1<em>n</em>−1次。1∼�−11∼<em>n</em>−1 共�−1<em>n</em>−1种情况。 如果握手最少的张三是 22 次，那么剩下的�−1<em>n</em>−1人中，握手最多的李四除了跟张三握手一次，跟其他�−2<em>n</em>−2人最多握手�−2<em>n</em>−2次，李四最多握手�−1<em>n</em>−1次。2∼�−12∼<em>n</em>−1 共�−2<em>n</em>−2种情况。 …… 所以握手次数最多有�−1<em>n</em>−1种情况，最少只有 11 种情况。 把最多的�−1<em>n</em>−1种情况看成�−1<em>n</em>−1个抽屉，�<em>n</em>个人放进这�−1<em>n</em>−1个抽屉，至少有一个抽屉里面有 22 人。</p>
<h2 id="例题：小蓝吃糖果-lanqiaoOJ-题号-1624"><a href="#例题：小蓝吃糖果-lanqiaoOJ-题号-1624" class="headerlink" title="例题：小蓝吃糖果 lanqiaoOJ 题号 1624"></a>例题：小蓝吃糖果 lanqiaoOJ 题号 1624</h2><p><strong>题目描述：</strong> Gardon 有 �<em>n</em> 种糖果，每种数量已知。Gardon 不喜欢连续 22 次吃同样的糖果。问有没有可行的吃糖方案。</p>
<p><strong>输入：</strong> 第一行是整数 N，(0 &lt; n &lt; 1000000)，第二行是 (n) 个数，表示 (n) 种糖果的数量 (m_i)，(0 &lt; m_i &lt; 1000000)</p>
<p><strong>输出：</strong> 输出一行，包含一个 “Yes” 或 “no”。</p>
<h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>继续处理格式，鸽巢原理，用“隔板法”求解。</p>
<p>找出最多的一种糖果，把它的数量 (K) 看成 (K) 个隔板，隔成 (K) 个空间（把每个隔板的右边看成一个空间）；其它所有糖果的数量为 (S)。</p>
<p>最多的一种糖果，把它的数量 (K) 看成 (K) 个隔板，隔成 (K) 个空间（把每个隔板的右边看成一个空间）；其它所有糖果的数量为 (S)。</p>
<ul>
<li>（1）如果 (S &lt; K-1)，把 (S) 个糖果放到隔板之间，这 (K) 个隔板不够放，必然至少有 2 个隔板之间没有糖果，由于这 2 个隔板是同一种糖果，所以无解。</li>
<li>（2）(S \geq K-1) 时，肯定有解。其中一个解是：把 (S) 个糖果排成一个长队，其中同种类的糖果是挨在一起的，然后每次取 (K) 个糖果，按顺序一个一个地放进 (K) 个空间。由于隔板数量比每一种糖果的数量都多，所以不可能有 22 个同样的糖果被放进一个空间里。把 (S) 个糖果放完，就是一个解，一些隔板里面可能放好几种糖果。</li>
</ul>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> a[<span class="number">1005000</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> sum=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> Max=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> n; <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">        sum += a[i];              <span class="comment">//所有糖果数量</span></span><br><span class="line">        <span class="keyword">if</span>(a[i]&gt;Max)  Max=a[i];   <span class="comment">//最多的一种糖果</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(sum-Max+<span class="number">1</span>&gt;=Max) <span class="built_in">printf</span>(<span class="string">&quot;Yes\n&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span>               <span class="built_in">printf</span>(<span class="string">&quot;No\n&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">n=<span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">a=<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="type">int</span>,<span class="built_in">input</span>().<span class="built_in">split</span>()))</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">sum</span>(a)-<span class="built_in">max</span>(a) &lt; <span class="built_in">max</span>(a)<span class="number">-1</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;No&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Yes&quot;</span>)</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner input = <span class="keyword">new</span> <span class="built_in">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">long</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> max = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> n = input.<span class="built_in">nextInt</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="type">int</span> x = input.<span class="built_in">nextInt</span>();</span><br><span class="line">            sum += x;</span><br><span class="line">            <span class="keyword">if</span> (x &gt; max) &#123;</span><br><span class="line">                max = x;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (sum - max + <span class="number">1</span> &gt;= max) &#123;</span><br><span class="line">            System.out.<span class="built_in">println</span>(<span class="string">&quot;Yes&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.<span class="built_in">println</span>(<span class="string">&quot;No&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="二项式定理和杨辉三角"><a href="#二项式定理和杨辉三角" class="headerlink" title="二项式定理和杨辉三角"></a>二项式定理和杨辉三角</h2><p>杨辉三角：排列成如下三角形的数字</p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">      1</span><br><span class="line">    1   1</span><br><span class="line">   1  2  1</span><br><span class="line"> 1   3  3  1</span><br><span class="line">1  4   6  4  1</span><br></pre></td></tr></table></figure>

<p>每个数是它上面 22 个数的和。</p>
<p>求杨辉三角第 �<em>n</em> 行的数字，可以模拟这个推导过程，逐级递推，复杂度 �(�2)<em>O</em>(<em>n</em>2)。</p>
<p>用数学公式计算，可以直接得到结果，这个公式是(1+�)�(1+<em>x</em>)<em>n</em>。</p>
<p><img src="/./../imgs/%E7%BB%84%E5%90%88%E6%95%B0%E5%AD%A6/163bed9e512b94d13ac8e09f824ca2ad-0.png" alt="图片描述"></p>
<p>二项式系数就是(1+�)�(1+<em>x</em>)<em>n</em> 展开后第 �<em>r</em> 项的系数。</p>
<p>Cnr&#x3D;(nr)&#x3D;n!r!(n−r)!Cnr&#x3D;(rn)&#x3D;r!(n−r)!n!</p>
<p>对应杨辉三角的第 �<em>n</em> 行第 �<em>r</em> 个数是</p>
<p>例：杨辉三角的第 44 行是“13311331”，</p>
<p>Cn−1r−1&#x3D;C4−11−1&#x3D;C30&#x3D;1、C31&#x3D;3、C32&#x3D;3、C33&#x3D;1Cn−1r−1&#x3D;C4−11−1&#x3D;C30&#x3D;1、C31&#x3D;3、C32&#x3D;3、C33&#x3D;1</p>
<p>理解：(1+�)�(1+<em>x</em>)<em>n</em> 的第 �<em>r</em> 项，就是从 �<em>n</em> 个 �<em>x</em> 中选出 �<em>r</em> 个，这就是组合数的定义</p>
<p>当 n 较大，且需要取模时，二项式系数有两种计算方法：</p>
<p>（1）递推公式：Cnr&#x3D;Cn−1r+Cn−1r−1Cnr&#x3D;Cn−1r+Cn−1r−1</p>
<p>公式是杨辉三角的定义，即“每个数是它上面 22 个数的和”。计算复杂度是 �(�2)<em>O</em>(<em>n</em>2)。</p>
<p>（2）用逆直接计算</p>
<p>因为输出取模，那么不用递推公式，直接用公式计算更快。不过，由于除法不能直接取模，需要用到逆。用逆计算二项式系数，有：</p>
<p>Cnr&#x3D;(nr)&#x3D;n!r!(n−r)!Cnr&#x3D;(rn)&#x3D;r!(n−r)!n!</p>
<p>Crnmodm&#x3D;n!r!(n−r)!modm&#x3D;(n!modm)((r!)−1modm)(((n−r)!)−1modm)modmCrnmodm&#x3D;r!(n−r)!n!modm&#x3D;(n!modm)((r!)−1modm)(((n−r)!)−1modm)modm</p>
<p>用逆计算二项式系数，复杂度是 �(�)<em>O</em>(<em>n</em>) 的。</p>

      
    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%A4%87%E8%B5%9B/" rel="tag"><i class="fas fa-tags"></i>蓝桥杯备赛</a>
        
      </div>
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="https://actz123.github.io/2024/02/22/%E7%AE%80%E5%8D%95%E6%95%B0%E8%AE%BA/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="zdx">
        <meta itemprop="description" content="">
        <meta itemprop="image" content="/images/avatar.png">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="Actz">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2024/02/22/%E7%AE%80%E5%8D%95%E6%95%B0%E8%AE%BA/" itemprop="url">简单数论</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2024-02-22T17:41:40+08:00">2024-02-22 17:41:40</time></span>
        </span>
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-categories">
          
          <i class="far fa-folder-open"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%86%B2%E5%88%BA%E8%90%A5/" itemprop="url" rel="index"><span itemprop="name">蓝桥杯冲刺营</span></a></span><i class="fas fa-angle-right"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%86%B2%E5%88%BA%E8%90%A5/12-%E7%AE%80%E5%8D%95%E6%95%B0%E8%AE%BA/" itemprop="url" rel="index"><span itemprop="name">12.简单数论</span></a></span>
        </span>
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <h1 id="简单数论"><a href="#简单数论" class="headerlink" title="简单数论"></a>简单数论</h1><h2 id="1-模运算"><a href="#1-模运算" class="headerlink" title="1 模运算"></a>1 模运算</h2><ul>
<li>定义：模运算为 a 除以 m 的余数，记为 a mod m，有 a mod m &#x3D; a % m。</li>
<li>模运算是大数运算中的常用操作。</li>
<li>如果一个数太大，无法直接输出，或者不需要直接输出，可以把它取模后，缩小数值再输出。</li>
<li>Python 虽然能直接计算大数，不用担心数据溢出，但是大数乘法太耗时，所以也常用取模来缩小数值。</li>
<li>一个简单应用，判断奇偶：a%2&#x3D;0，a 是偶数；a%2&#x3D;1，a 是奇数</li>
</ul>
<h3 id="例题：刷题统计-2022-年第十三届省赛，lanqiaoOJ-题号-2098"><a href="#例题：刷题统计-2022-年第十三届省赛，lanqiaoOJ-题号-2098" class="headerlink" title="例题：刷题统计 2022 年第十三届省赛，lanqiaoOJ 题号 2098"></a>例题：刷题统计 2022 年第十三届省赛，lanqiaoOJ 题号 2098</h3><p>【问题描述】 小明决定从下周一开始努力刷题准备蓝桥杯竞赛。他计划周一至周五每天做 a 道题目，周六和周日每天做 b 道题目。请你帮小明计算，按照计划他将在第几天实现做题数大于等于 n 题？</p>
<p>【输入格式】 输入一行包含三个整数 a, b 和 n。</p>
<p>【输出格式】 输出一个整数代表天数。</p>
<p>【评测用例规模与约定】 对于 50%的评测用例，1 ≤ a, b, n ≤ 106106；对于 100%的评测用例，1 ≤ a, b, n ≤ 10181018。</p>
<h3 id="题目解析"><a href="#题目解析" class="headerlink" title="题目解析"></a>题目解析</h3><p>求余数的简单题，利用求余，把计算复杂度降为 O(1)。</p>
<p><strong>C++ 代码：</strong></p>
<figure class="hljs highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    ll a,b,n; <span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b&gt;&gt;n;</span><br><span class="line">    ll week = a*<span class="number">5</span>+b*<span class="number">2</span>;     <span class="comment">//每周做题</span></span><br><span class="line">    ll days = (n/week)*<span class="number">7</span>;  <span class="comment">//周数</span></span><br><span class="line">    n %= week;             <span class="comment">//剩下的做题数</span></span><br><span class="line">    <span class="keyword">if</span>(n&lt;=a*<span class="number">5</span>) days += n/a+(n%a?<span class="number">1</span>:<span class="number">0</span>);  <span class="comment">//在周一到周五内</span></span><br><span class="line">    <span class="keyword">else</span>&#123;                  <span class="comment">//周六和周日</span></span><br><span class="line">        days += <span class="number">5</span>, n -= a*<span class="number">5</span>;</span><br><span class="line">        days += n/b+(n%b?<span class="number">1</span>:<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;days;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Java 代码：</strong></p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">long</span> <span class="variable">a</span> <span class="operator">=</span> sc.nextLong(), b = sc.nextLong(), n = sc.nextLong();</span><br><span class="line">        <span class="type">long</span> <span class="variable">week</span> <span class="operator">=</span> a * <span class="number">5</span> + b * <span class="number">2</span>;  <span class="comment">//每周做题</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">days</span> <span class="operator">=</span> (n / week) * <span class="number">7</span>; <span class="comment">//周数*7天</span></span><br><span class="line">        n %= week;                  <span class="comment">//余下不够一周的做题数</span></span><br><span class="line">        <span class="keyword">if</span> (n &lt;= a * <span class="number">5</span>)</span><br><span class="line">            days += n / a + (n % a != <span class="number">0</span> ? <span class="number">1</span> : <span class="number">0</span>); <span class="comment">//在周一到周五内</span></span><br><span class="line">        <span class="keyword">else</span> &#123;                       <span class="comment">//周六和周日</span></span><br><span class="line">            days += <span class="number">5</span>;</span><br><span class="line">            n -= a * <span class="number">5</span>;</span><br><span class="line">            days += n / b + (n % b != <span class="number">0</span> ? <span class="number">1</span> : <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(days);</span><br><span class="line">        sc.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Python 代码：</strong></p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">a, b, n = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())</span><br><span class="line">week = a * <span class="number">5</span> + b * <span class="number">2</span>  <span class="comment">#每周做题</span></span><br><span class="line">days = (n // week) * <span class="number">7</span>  <span class="comment">#天数</span></span><br><span class="line">n %= week  <span class="comment">#余数</span></span><br><span class="line"><span class="keyword">if</span> n &lt;= a * <span class="number">5</span>:</span><br><span class="line">    days += n // a + (n % a != <span class="number">0</span>)  <span class="comment">#在周一到周五内</span></span><br><span class="line"><span class="keyword">else</span>:  <span class="comment">#周六和周日</span></span><br><span class="line">    days += <span class="number">5</span></span><br><span class="line">    n -= a * <span class="number">5</span></span><br><span class="line">    days += n // b + (n % b != <span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(days)</span><br></pre></td></tr></table></figure>

<h2 id="2-快速幂"><a href="#2-快速幂" class="headerlink" title="2 快速幂"></a>2 快速幂</h2><p>幂运算 an，当 n 很大时，如果一个个乘，时间是 O(n) 的，速度很慢，此时可以用快速幂，在 O(logn) 的时间内算出来。 快速幂的一个解法：分治法，算 a2，然后再算(a2) 2，…，一直算到 an，代码也容易写。</p>
<ul>
<li>标准的快速幂：用位运算实现。</li>
<li>基于位运算的快速幂，原理是倍增。</li>
</ul>
<h3 id="快速幂原理"><a href="#快速幂原理" class="headerlink" title="快速幂原理"></a>快速幂原理</h3><p>以 �11<em>a</em>11 为例说明如何用倍增法做快速幂。</p>
<p>（1）幂次与二进制的关系。把 �11<em>a</em>11 分解成幂 �8、�2、�1<em>a</em>8、<em>a</em>2、<em>a</em>1 的乘积：�11&#x3D;�8+2+1&#x3D;�8×�2×�1<em>a</em>11&#x3D;<em>a</em>8+2+1&#x3D;<em>a</em>8×<em>a</em>2×<em>a</em>1。其中�1、�2、�4、�8…<em>a</em>1、<em>a</em>2、<em>a</em>4、<em>a</em>8…的幂次都是 2 的倍数，所有的幂 ��<em>a**i</em> 都是倍乘关系，逐级递推，代码： a *&#x3D; a</p>
<p>（2）幂次用二进制分解。如何把 11 分解为 8+2+1？利用数的二进制的特征，n &#x3D; 1110 &#x3D; 10112 &#x3D; 23+21+20 &#x3D; 8+2+1，把 n 按二进制处理就可以。</p>
<p>（3）如何跳过那些没有的幂次？例如 1011 需要跳过 �4<em>a</em>4。做个判断，用二进制的位运算实现：</p>
<ul>
<li>n &amp; 1 取 n 的最后一位，并且判断这一位是否需要跳过。</li>
<li>n &gt;&gt;&#x3D; 1 把 n 右移一位，目的是把刚处理过的 n 的最后一位去掉。 幂运算的结果往往很大，一般会先取模再输出。 根据取模的性质有：��mod�&#x3D;(�mod�)�mod�<em>a**n</em>mod<em>m</em>&#x3D;(<em>a</em>mod<em>m</em>)<em>n</em>mod<em>m</em></li>
</ul>
<h3 id="例题：快速幂-lanqiaoOJ-题号-1514"><a href="#例题：快速幂-lanqiaoOJ-题号-1514" class="headerlink" title="例题：快速幂 lanqiaoOJ 题号 1514"></a>例题：快速幂 lanqiaoOJ 题号 1514</h3><p>【题目描述】给定 b, p, k，求(bp) mod k。其中 2≤b, p, k≤109。 【输入描述】三个整数 b，p，k。 【输出描述】输出(bp) mod k。</p>
<h3 id="题目解析-1"><a href="#题目解析-1" class="headerlink" title="题目解析"></a>题目解析</h3><p><strong>C++ 代码：</strong></p>
<figure class="hljs highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;     <span class="comment">//变量改用较大的long long</span></span><br><span class="line">ll <span class="title function_">fastPow</span><span class="params">(ll a, ll n, ll mod)</span>&#123;</span><br><span class="line">    ll ans = <span class="number">1</span>;</span><br><span class="line">    a %= mod;          <span class="comment">//重要，防止下面的ans*a越界</span></span><br><span class="line">    <span class="keyword">while</span>(n) &#123;</span><br><span class="line">        <span class="keyword">if</span>(n &amp; <span class="number">1</span>)   ans = (ans*a) % mod;   <span class="comment">//取模</span></span><br><span class="line">        a = a*a % mod;                     <span class="comment">//取模</span></span><br><span class="line">        n &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    ll b,p,k;    <span class="built_in">cin</span>&gt;&gt;b&gt;&gt;p&gt;&gt;k;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; fastPow(b,p,k);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Java 代码：</strong></p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">long</span> <span class="title function_">fastPow</span><span class="params">(<span class="type">long</span> a, <span class="type">long</span> n, <span class="type">long</span> mod)</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        a %= mod;   <span class="comment">//重要，防止下面的ans*a越界</span></span><br><span class="line">        <span class="keyword">while</span> (n &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((n &amp; <span class="number">1</span>) == <span class="number">1</span>) &#123;</span><br><span class="line">                ans = (ans * a) % mod;  <span class="comment">//取模</span></span><br><span class="line">            &#125;</span><br><span class="line">            a = (a * a) % mod;  <span class="comment">//取模</span></span><br><span class="line">            n &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">long</span> <span class="variable">b</span> <span class="operator">=</span> sc.nextLong(), p = sc.nextLong(), k = sc.nextLong();</span><br><span class="line">        System.out.println(fastPow(b, p, k));</span><br><span class="line">        sc.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Python 代码：</strong></p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fast_pow</span>(<span class="params">a, n, mod</span>):</span><br><span class="line">    ans = <span class="number">1</span></span><br><span class="line">    a %= mod  <span class="comment">#重要，防止下面的ans*a越界</span></span><br><span class="line">    <span class="keyword">while</span> n &gt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">if</span> n &amp; <span class="number">1</span> == <span class="number">1</span>:</span><br><span class="line">            ans = (ans * a) % mod  <span class="comment">#取模</span></span><br><span class="line">        a = (a * a) % mod  <span class="comment">#取模</span></span><br><span class="line">        n &gt;&gt;= <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line"></span><br><span class="line">b, p, k = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())</span><br><span class="line"><span class="built_in">print</span>(fast_pow(b, p, k))</span><br></pre></td></tr></table></figure>

<h2 id="GCD-定义、性质"><a href="#GCD-定义、性质" class="headerlink" title="GCD 定义、性质"></a>GCD 定义、性质</h2><p>最大公约数 Greatest Common Divisor(GCD)：整数 a 和 b 的 GCD 是指能同时整除 a 和 b 的最大整数，记为 gcd(a, b)。由于-a 的因子和 a 的因子相同，因此 gcd(a, b) &#x3D; gcd(|a|, |b|)。编码时只关注正整数的最大公约数。 性质： （1）gcd(a, b) &#x3D; gcd(a, a+b) &#x3D; gcd(a, k·a+b) （2）gcd(ka, kb) &#x3D; k·gcd(a, b) （3）定义多个整数的最大公约数：gcd(a, b, c) &#x3D; gcd(gcd(a, b), c)。 （4）若 gcd(a, b) &#x3D; d，则 gcd(a&#x2F;d, b&#x2F;d) &#x3D; 1，即 a&#x2F;d 与 b&#x2F;d 互素。这个定理很重要。 （5）gcd(a+cb, b) &#x3D; gcd(a, b)</p>
<p><strong>C++福利：</strong> c++函数 std::__gcd()，可以返回负数，可以带多个参数。</p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    cout&lt;&lt;__gcd(<span class="number">15</span>, <span class="number">81</span>)&lt;&lt;<span class="string">&quot;\n&quot;</span>;    <span class="comment">// 输出  3</span></span><br><span class="line">    cout&lt;&lt;__gcd(<span class="number">0</span>, <span class="number">44</span>)&lt;&lt;<span class="string">&quot;\n&quot;</span>;     <span class="comment">// 输出  44</span></span><br><span class="line">    cout&lt;&lt;__gcd(<span class="number">0</span>, <span class="number">0</span>)&lt;&lt;<span class="string">&quot;\n&quot;</span>;      <span class="comment">// 输出  0</span></span><br><span class="line">    cout&lt;&lt;__gcd(<span class="number">-6</span>, <span class="number">-15</span>)&lt;&lt;<span class="string">&quot;\n&quot;</span>;   <span class="comment">// 输出  -3</span></span><br><span class="line">    cout&lt;&lt;__gcd(<span class="number">-17</span>,<span class="number">289</span>)&lt;&lt;<span class="string">&quot;\n&quot;</span>;   <span class="comment">// 输出  -17</span></span><br><span class="line">    cout&lt;&lt;__gcd(<span class="number">17</span>,<span class="number">-289</span>)&lt;&lt;<span class="string">&quot;\n&quot;</span>;   <span class="comment">// 输出  17</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="手写-GCD-代码"><a href="#手写-GCD-代码" class="headerlink" title="手写 GCD 代码"></a>手写 GCD 代码</h3><p>手写 gcd 函数，常用欧几里得算法。 辗转相除法求 gcd： <code>gcd(a, b) = gcd(b, a mod b)</code> 这是最常用的方法，极为高效。 设 a &gt; b，辗转相除法的计算复杂度为�((���2�)3)<em>O</em>((<em>l<strong>o</strong>g</em>2<em>a</em>)3)。</p>
<p>可输出负数，和库函数一样:</p>
<figure class="hljs highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">gcd</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>&#123;     <span class="keyword">return</span> b? gcd(b, a%b):a; &#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;gcd(<span class="number">15</span>, <span class="number">81</span>)&lt;&lt;<span class="string">&quot;\n&quot;</span>;    <span class="comment">// 输出  3</span></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;gcd(<span class="number">0</span>, <span class="number">44</span>)&lt;&lt;<span class="string">&quot;\n&quot;</span>;     <span class="comment">// 输出  44</span></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;gcd(<span class="number">0</span>, <span class="number">0</span>)&lt;&lt;<span class="string">&quot;\n&quot;</span>;      <span class="comment">// 输出  0</span></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;gcd(<span class="number">-6</span>, <span class="number">-15</span>)&lt;&lt;<span class="string">&quot;\n&quot;</span>;   <span class="comment">// 输出  -3</span></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;gcd(<span class="number">-17</span>,<span class="number">289</span>)&lt;&lt;<span class="string">&quot;\n&quot;</span>;   <span class="comment">// 输出  -17</span></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;gcd(<span class="number">17</span>,<span class="number">-289</span>)&lt;&lt;<span class="string">&quot;\n&quot;</span>;   <span class="comment">// 输出  17</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 或者使用如下编码方式：</span></span><br><span class="line"><span class="comment">// int GCD(int a,int b)</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//     if(b==0)</span></span><br><span class="line"><span class="comment">//         return a;</span></span><br><span class="line"><span class="comment">//     return GCD(b,a%b);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">Main</span> &#123;</span></span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> <span class="title function_">gcd</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> b == <span class="number">0</span> ? a : gcd(b, a % b);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public <span class="type">static</span> <span class="type">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(gcd(<span class="number">15</span>, <span class="number">81</span>));   <span class="comment">// 输出  3</span></span><br><span class="line">        System.out.println(gcd(<span class="number">0</span>, <span class="number">44</span>));    <span class="comment">// 输出  44</span></span><br><span class="line">        System.out.println(gcd(<span class="number">0</span>, <span class="number">0</span>));     <span class="comment">// 输出  0</span></span><br><span class="line">        System.out.println(gcd(<span class="number">-6</span>, <span class="number">-15</span>));  <span class="comment">// 输出  -3</span></span><br><span class="line">        System.out.println(gcd(<span class="number">-17</span>, <span class="number">289</span>)); <span class="comment">// 输出  17</span></span><br><span class="line">        System.out.println(gcd(<span class="number">17</span>, <span class="number">-289</span>)); <span class="comment">// 输出  17</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 或者使用如下编码方式：</span></span><br><span class="line"><span class="comment">// static int GCD(int a,int b)</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//     if(b==0)</span></span><br><span class="line"><span class="comment">//         return a;</span></span><br><span class="line"><span class="comment">//     return GCD(b,a%b);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line">def <span class="title function_">gcd</span><span class="params">(a, b)</span>:</span><br><span class="line">    <span class="keyword">return</span> a <span class="keyword">if</span> b == <span class="number">0</span> <span class="keyword">else</span> gcd(b, a % b)</span><br><span class="line"></span><br><span class="line">print(gcd(<span class="number">15</span>, <span class="number">81</span>))   # 输出  <span class="number">3</span></span><br><span class="line">print(gcd(<span class="number">0</span>, <span class="number">44</span>))    # 输出  <span class="number">44</span></span><br><span class="line">print(gcd(<span class="number">0</span>, <span class="number">0</span>))     # 输出  <span class="number">0</span></span><br><span class="line">print(gcd(<span class="number">-6</span>, <span class="number">-15</span>))  # 输出  <span class="number">-3</span></span><br><span class="line">print(gcd(<span class="number">-17</span>, <span class="number">289</span>)) # 输出  <span class="number">17</span></span><br><span class="line">print(gcd(<span class="number">17</span>, <span class="number">-289</span>)) # 输出  <span class="number">17</span></span><br><span class="line"></span><br><span class="line"># 或者使用如下编码方式：</span><br><span class="line"><span class="meta"># def GCD(a,b):</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#     <span class="keyword">if</span> b==0:</span></span><br><span class="line"><span class="meta">#         return a</span></span><br><span class="line"><span class="meta">#     return GCD(b,a%b)</span></span><br></pre></td></tr></table></figure>

<h2 id="LCM"><a href="#LCM" class="headerlink" title="LCM"></a>LCM</h2><p>最小公倍数 LCM (the Least Common Multiple) 。· a 和 b 的最小公倍数 lcm(�,�)(<em>a</em>,<em>b</em>),从算术基本定理推理得到。 算术基本定理：任何大于 1 的正整数 n 都可以唯一分解为有限个素数的乘积：</p>
<p>n&#x3D;p1c1p2c2…pmcmn&#x3D;p1c1p2c2…pmcm,其中c1c1 都是正整数，pipi 都是素数且从小到大。</p>
<p>推导 LCM： 设:�&#x3D;�1�1�2�2…����,�&#x3D;�1�1�2�2…����:<em>a</em>&#x3D;<em>p</em>1<em>c</em>1<em>p</em>2<em>c</em>2…<em>p<strong>m</strong>c**m</em>,<em>b</em>&#x3D;<em>p</em>1<em>f</em>1<em>p</em>2<em>f</em>2…<em>p<strong>m</strong>f**m</em></p>
<p>那么：gcd(a, �)&#x3D;�1min⁡�1,�1�2min⁡�2,�2…��min⁡��,��<em>b</em>)&#x3D;<em>p</em>1min<em>c</em>1,<em>f</em>1<em>p</em>2min<em>c</em>2,<em>f</em>2…<em>p**m</em>min<em>c**m</em>,<em>f**m</em></p>
<p>Icm(�,�)&#x3D;�1max⁡�1,�1�2max⁡�2,�2…��max⁡��,��(<em>a</em>,<em>b</em>)&#x3D;<em>p</em>1max<em>c</em>1,<em>f</em>1<em>p</em>2max<em>c</em>2,<em>f</em>2…<em>p**m</em>max<em>c**m</em>,<em>f**m</em></p>
<p>推出：gcd(a, b)<em>lcm(a, b)&#x3D;a</em>b</p>
<p>即：</p>
<p>lcm(�,�):&#x3D;:�∗�&#x2F;gcd(�,�):&#x3D;:�&#x2F;gcd(�,:�)∗�.lcm(<em>a</em>,<em>b</em>):&#x3D;:<em>a</em>∗<em>b</em>&#x2F;gcd(<em>a</em>,<em>b</em>):&#x3D;:<em>a</em>&#x2F;gcd(<em>a</em>,:<em>b</em>)∗<em>b</em>.</p>
<h3 id="lcm-手写代码"><a href="#lcm-手写代码" class="headerlink" title="lcm()手写代码"></a>lcm()手写代码</h3><figure class="hljs highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//c or c++</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">lcm</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>&#123;    <span class="comment">//需要的时候把int改成long long</span></span><br><span class="line">   <span class="keyword">return</span> a / gcd(a, b) * b;  <span class="comment">//先做除法再做乘法，防止先做乘法溢出</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Python</span><br><span class="line">def <span class="title function_">lcm</span><span class="params">(a, b)</span>:</span><br><span class="line">    <span class="keyword">return</span> a <span class="comment">// gcd(a, b) * b  #先做除法再做乘法，防止先做乘法溢出</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//java</span></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">lcm</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a / gcd(a, b) * b; <span class="comment">//先做除法再做乘法，防止先做乘法溢出</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="核桃的数量-2013-年第四届省赛-lanqiaoOJ-题号-210"><a href="#核桃的数量-2013-年第四届省赛-lanqiaoOJ-题号-210" class="headerlink" title="核桃的数量 2013 年第四届省赛 lanqiaoOJ 题号 210"></a>核桃的数量 2013 年第四届省赛 lanqiaoOJ 题号 210</h3><p>【题目描述】小张是软件项目经理，他带领 3 个开发组。工期紧，今天都在加班呢。为鼓舞士气，小张打算给每个组发一袋核桃（据传言能补脑）。他的要求是： 1.各组的核桃数量必须相同 2.各组内必须能平分核桃（当然是不能打碎的） 3.尽量提供满足 1, 2 条件的最小数量（节约闹革命嘛） 【输入格式】输入三个正整数 a, b, c，表示每个组正在加班的人数，用空格分开（a,b,c&lt; 30）<br>【输出格式】输出一个正整数，表示每袋核桃的数量。</p>
<h3 id="题目解析-2"><a href="#题目解析-2" class="headerlink" title="题目解析"></a>题目解析</h3><p>简单题，答案就是三个数字的最小公倍数。</p>
<figure class="hljs highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">lcm</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>&#123; <span class="keyword">return</span> a / __gcd(a, b) * b;&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">int</span> a,b,c;    <span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b&gt;&gt;c;</span><br><span class="line">    <span class="type">int</span> k = lcm(a,b);</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;lcm(k,c)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">import java.util.Scanner;</span><br><span class="line"></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">Main</span> &#123;</span></span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> <span class="title function_">gcd</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> b == <span class="number">0</span> ? a : gcd(b, a % b);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> <span class="title function_">lcm</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a / gcd(a, b) * b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public <span class="type">static</span> <span class="type">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Scanner sc = new Scanner(System.in);</span><br><span class="line">        <span class="type">int</span> a = sc.nextInt();</span><br><span class="line">        <span class="type">int</span> b = sc.nextInt();</span><br><span class="line">        <span class="type">int</span> c = sc.nextInt();</span><br><span class="line">        <span class="type">int</span> k = lcm(a, b);</span><br><span class="line">        System.out.println(lcm(k, c));</span><br><span class="line">        sc.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">def <span class="title function_">gcd</span><span class="params">(a, b)</span>:</span><br><span class="line">    <span class="keyword">return</span> a <span class="keyword">if</span> b == <span class="number">0</span> <span class="keyword">else</span> gcd(b, a % b)</span><br><span class="line"></span><br><span class="line">def lcm(a, b):</span><br><span class="line">    <span class="keyword">return</span> a <span class="comment">// gcd(a, b) * b</span></span><br><span class="line"></span><br><span class="line">a, b, c = <span class="built_in">map</span>(<span class="type">int</span>, input().split())</span><br><span class="line">k = lcm(a, b)</span><br><span class="line">print(lcm(k, c))</span><br></pre></td></tr></table></figure>

<h2 id="5-素数的判断"><a href="#5-素数的判断" class="headerlink" title="5 素数的判断"></a>5 素数的判断</h2><p>素数定义：只能被 1 和自己整除的正整数。注：1 不是素数，最小素数是 2。</p>
<p>判断一个数 n 是不是素数：当�≤1014<em>n</em>≤1014时，用试除法；n &gt; 1014 时，试除法不够用，需 要用高级算法，例如 Miller Rabin 算法。</p>
<p><strong>试除法：</strong> 用[2,n-1]内的所有数去试着除 n，如果都不能整除，就是素数。 优化：把[2,n-1]缩小到[2,�][2,<em>n</em>]。证明：若 n &#x3D; axb, 设 a≤�<em>n</em> ,则 b≥�<em>n</em>,如果 a 是 n 的因子，说明 n 不是素数，b 不用再试且 b 一定也是。</p>
<h3 id="C-实现："><a href="#C-实现：" class="headerlink" title="C++ 实现："></a>C++ 实现：</h3><figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">is_prime</span><span class="params">(<span class="type">long</span> <span class="type">long</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n &lt;= <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// 1不是素数</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">long</span> <span class="type">long</span> i = <span class="number">2</span>; i &lt;= <span class="built_in">sqrt</span>(n); i++)</span><br><span class="line">        <span class="keyword">if</span>(n % i == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// 能整除，不是素数</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">// 全不能整除，是素数</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> number = <span class="number">29</span>; <span class="comment">// 例子：要检查是否为素数的数值</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">is_prime</span>(number))</span><br><span class="line">        std::cout &lt;&lt; number &lt;&lt; <span class="string">&quot; 是素数。&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        std::cout &lt;&lt; number &lt;&lt; <span class="string">&quot; 不是素数。&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Java-实现："><a href="#Java-实现：" class="headerlink" title="Java 实现："></a>Java 实现：</h3><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isPrime</span><span class="params">(<span class="type">long</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (n &lt;= <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// 1不是素数</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">long</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i &lt;= Math.sqrt(n); i++)</span><br><span class="line">            <span class="keyword">if</span> (n % i == <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// 能整除，不是素数</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">// 全不能整除，是素数</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;输入一个要检查是否为素数的数值：&quot;</span>);</span><br><span class="line">        <span class="type">long</span> <span class="variable">number</span> <span class="operator">=</span> scanner.nextLong(); <span class="comment">// 例子：要检查是否为素数的数值</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (isPrime(number))</span><br><span class="line">            System.out.println(number + <span class="string">&quot; 是素数。&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            System.out.println(number + <span class="string">&quot; 不是素数。&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Python-实现："><a href="#Python-实现：" class="headerlink" title="Python 实现："></a>Python 实现：</h3><figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">is_prime</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">if</span> n &lt;= <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span>  <span class="comment"># 1不是素数</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, <span class="built_in">int</span>(n ** <span class="number">0.5</span>) + <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> n % i == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span>  <span class="comment"># 能整除，不是素数</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span>  <span class="comment"># 全不能整除，是素数</span></span><br><span class="line"></span><br><span class="line">number = <span class="number">29</span>  <span class="comment"># 例子：要检查是否为素数的数值</span></span><br><span class="line"><span class="keyword">if</span> is_prime(number):</span><br><span class="line">    <span class="built_in">print</span>(number, <span class="string">&quot;是素数。&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(number, <span class="string">&quot;不是素数。&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="6-素数筛"><a href="#6-素数筛" class="headerlink" title="6 素数筛"></a>6 素数筛</h2><p>素数的筛选：给定 n，求 2~n 内所有的素数。 一个个地判断很慢，所以用“筛子”筛所有的整数，把非素数筛掉，剩下的就是素数。 常用两种筛法：埃氏筛、欧拉筛。</p>
<p><strong>埃氏筛:</strong></p>
<p>初始队列{2、3，4，5，6，7，8，9，10，11，12，13，…，n}，操作步骤： （1）输出最小的素数 2，筛掉 2 的倍数，得{2，3，4，5，6，7，8，9，10，11，12，13，…} （2）输出最小的素数 3，筛掉 3 的倍数，得{2，3，4，5，6，7，8，9，10，11，12，13，…} （3）输出最小的素数 5，筛掉 5 的倍数，得{2，3，4，5，6，7，8，9，10，11，12，13，…} 继续以上步骤，直到队列为空。</p>
<h3 id="C-实现：-1"><a href="#C-实现：-1" class="headerlink" title="C++ 实现："></a>C++ 实现：</h3><figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> primes[N],cnt;</span><br><span class="line"><span class="type">bool</span> bprime[N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">getPrime</span><span class="params">(<span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(bprime,<span class="literal">false</span>,<span class="built_in">sizeof</span>(bprime));</span><br><span class="line">    bprime[<span class="number">0</span>]=<span class="literal">true</span>;</span><br><span class="line">    bprime[<span class="number">1</span>]=<span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(!bprime[i])&#123;</span><br><span class="line">            prime[cnt++]=i;</span><br><span class="line">            <span class="keyword">for</span>(LL j=i*<span class="number">2</span>;j&lt;=n;j+=i)</span><br><span class="line">                bprime[j]=<span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Java-实现：-1"><a href="#Java-实现：-1" class="headerlink" title="Java 实现："></a>Java 实现：</h3><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] primes = <span class="keyword">new</span> <span class="title class_">int</span>[N];</span><br><span class="line"><span class="type">int</span> cnt;</span><br><span class="line"><span class="type">boolean</span>[] bprime = <span class="keyword">new</span> <span class="title class_">boolean</span>[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">getPrimes</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    Arrays.fill(bprime, <span class="literal">false</span>);</span><br><span class="line">    bprime[<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">    bprime[<span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!bprime[i]) &#123;</span><br><span class="line">            primes[cnt++] = i;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i * <span class="number">2</span>; j &lt;= n; j += i) &#123;</span><br><span class="line">                bprime[j] = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Python-实现：-1"><a href="#Python-实现：-1" class="headerlink" title="Python 实现："></a>Python 实现：</h3><figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">primes = [<span class="number">0</span>] * N</span><br><span class="line">cnt = <span class="number">0</span></span><br><span class="line">bprime = [<span class="literal">False</span>] * N</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getPrimes</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">global</span> cnt, primes, bprime</span><br><span class="line">    bprime[<span class="number">0</span>] = <span class="literal">True</span></span><br><span class="line">    bprime[<span class="number">1</span>] = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, n+<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> bprime[i]:</span><br><span class="line">            primes[cnt] = i</span><br><span class="line">            cnt += <span class="number">1</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i*<span class="number">2</span>, n+<span class="number">1</span>, i):</span><br><span class="line">                bprime[j] = <span class="literal">True</span></span><br></pre></td></tr></table></figure>

<p><strong>但是埃氏筛法的缺点：例如 6 会被 3 整除，6 会被 2 整除，会被筛两次，所以我们再给出欧氏线性筛法：</strong></p>
<h3 id="C-实现：-2"><a href="#C-实现：-2" class="headerlink" title="C++ 实现："></a>C++ 实现：</h3><figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> primes[N],cnt;</span><br><span class="line"><span class="type">bool</span> bPrime[N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">getPrimes</span><span class="params">(<span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(bPrime,<span class="literal">false</span>,<span class="built_in">sizeof</span>(bPrime));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(!bPrime[i])</span><br><span class="line">            primes[cnt++]=i;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;cnt&amp;&amp;i*primes[j]&lt;n;j++)&#123;</span><br><span class="line">            bPrime[i*primes[j]]=<span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">if</span>(i%primes[j]==<span class="number">0</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Java-实现：-2"><a href="#Java-实现：-2" class="headerlink" title="Java 实现："></a>Java 实现：</h3><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="type">int</span>[] primes = <span class="keyword">new</span> <span class="title class_">int</span>[N], bPrime = <span class="keyword">new</span> <span class="title class_">int</span>[N];</span><br><span class="line"><span class="keyword">static</span> <span class="type">int</span> cnt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">getPrimes</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    Arrays.fill(bPrime, <span class="number">0</span>, n + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (bPrime[i] == <span class="number">0</span>)</span><br><span class="line">            primes[cnt++] = i;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; cnt &amp;&amp; i * primes[j] &lt;= n; j++) &#123;</span><br><span class="line">            bPrime[i * primes[j]] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (i % primes[j] == <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Python-实现：-2"><a href="#Python-实现：-2" class="headerlink" title="Python 实现："></a>Python 实现：</h3><figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">N = <span class="number">1000005</span></span><br><span class="line">primes = [<span class="number">0</span>] * N</span><br><span class="line">bprime = [<span class="literal">False</span>] * N</span><br><span class="line">cnt = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getPrimes</span>(<span class="params">n: <span class="built_in">int</span></span>):</span><br><span class="line">    <span class="keyword">global</span> cnt</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, n+<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> bprime[i]:</span><br><span class="line">            primes[cnt] = i</span><br><span class="line">            cnt += <span class="number">1</span></span><br><span class="line">        j = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> j &lt; cnt <span class="keyword">and</span> i * primes[j] &lt;= n:</span><br><span class="line">            bprime[i * primes[j]] = <span class="literal">True</span></span><br><span class="line">            <span class="keyword">if</span> i % primes[j] == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            j += <span class="number">1</span></span><br></pre></td></tr></table></figure>

<h3 id="例题：质数-lanqiaoOJ-题号-1557"><a href="#例题：质数-lanqiaoOJ-题号-1557" class="headerlink" title="例题：质数 lanqiaoOJ 题号 1557"></a>例题：质数 lanqiaoOJ 题号 1557</h3><p>【题目描述】给定一个正整数 N，请你输出 N 以内（不包含 N）的质数以及质数的个数。 【输入描述】一个正整数 N，n&lt;1000 【输出描述】两行，第 1 行包含若干个素数，从小到大输出，用空格分开。第 2 行一个整数，表示素数个数。</p>
<p>输入： 10</p>
<p>输出： 2 3 5 7 4</p>
<p>题目为模板题目，实现方式如下，其中：</p>
<ul>
<li>bprime[i]记录数 i 的状态，若 bprime [i]&#x3D;1，表示它被筛掉，不是素数。</li>
<li>用 primes[]存放素数，prime[0]是第一个素数 2。</li>
<li>Cnt 是素数个数计数</li>
</ul>
<h3 id="C-实现：-3"><a href="#C-实现：-3" class="headerlink" title="C++ 实现："></a>C++ 实现：</h3><figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e6</span>;</span><br><span class="line"><span class="type">int</span> primes[N],cnt;</span><br><span class="line"><span class="type">bool</span> bprime[N]; <span class="comment">//true表示被筛掉，不是素数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">getPrimes</span><span class="params">(<span class="type">int</span> n)</span></span>&#123; <span class="comment">//埃氏筛，计算[2, n]内的素数</span></span><br><span class="line">        <span class="built_in">memset</span>(bprime,<span class="literal">false</span>,<span class="built_in">sizeof</span>(bprime));</span><br><span class="line">        bprime[<span class="number">0</span>]=<span class="literal">true</span>;</span><br><span class="line">        bprime[<span class="number">1</span>]=<span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!bprime[i])&#123;</span><br><span class="line">                primes[cnt++]=i;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> j=i*<span class="number">2</span>;j&lt;=n;j+=i)</span><br><span class="line">                    bprime[j]=<span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt;n;</span><br><span class="line">    <span class="built_in">getPrimes</span>(n<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;cnt;i++)  cout &lt;&lt; primes[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; cnt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Java-实现：-3"><a href="#Java-实现：-3" class="headerlink" title="Java 实现："></a>Java 实现：</h3><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">N</span> <span class="operator">=</span> <span class="number">1000000</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[] primes = <span class="keyword">new</span> <span class="title class_">int</span>[N];</span><br><span class="line">    <span class="keyword">static</span> <span class="type">boolean</span>[] bprime = <span class="keyword">new</span> <span class="title class_">boolean</span>[N];</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> cnt;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">getPrimes</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        bprime[<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">        bprime[<span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!bprime[i]) &#123;</span><br><span class="line">                primes[cnt++] = i;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i * <span class="number">2</span>; j &lt;= n; j += i) &#123;</span><br><span class="line">                    bprime[j] = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line">        getPrimes(n - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; cnt; i++) &#123;</span><br><span class="line">            System.out.print(primes[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">        System.out.println(cnt);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Python-实现：-3"><a href="#Python-实现：-3" class="headerlink" title="Python 实现："></a>Python 实现：</h3><figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">N = <span class="number">10</span>**<span class="number">6</span></span><br><span class="line">primes = []</span><br><span class="line">bprime = [<span class="literal">False</span>] * N</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getPrimes</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">global</span> primes</span><br><span class="line">    <span class="keyword">global</span> cnt</span><br><span class="line"></span><br><span class="line">    bprime[<span class="number">0</span>] = <span class="literal">True</span></span><br><span class="line">    bprime[<span class="number">1</span>] = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, n+<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> bprime[i]:</span><br><span class="line">            primes.append(i)</span><br><span class="line">            cnt += <span class="number">1</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i*<span class="number">2</span>, n+<span class="number">1</span>, i):</span><br><span class="line">                bprime[j] = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">n = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">cnt = <span class="number">0</span></span><br><span class="line">getPrimes(n-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> p <span class="keyword">in</span> primes:</span><br><span class="line">    <span class="built_in">print</span>(p, end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(cnt)</span><br></pre></td></tr></table></figure>

<h2 id="7-分解质因子"><a href="#7-分解质因子" class="headerlink" title="7 分解质因子"></a>7 分解质因子</h2><p>任何一个正整数 n 都可以唯一地分解为有限个素数的乘积：�&#x3D;�1�1�2�2…����<em>n</em>&#x3D;<em>p</em>1<em>c</em>1<em>p</em>2<em>c</em>2…<em>p<strong>m</strong>c**m</em>,其中�i<em>c</em>i都是正整数，p<em>i 都是素数且从小到大。 分解质因子也可以用试除法。求 n 的质因子： (1) 第一步，求最小质因子$p</em>{1}。逐个检查从2到。逐个检查从2到\sqrt{n}的所有素数，如果它能整除�，就是最小质因子。然后连续用�的所有素数，如果它能整除<em>n</em>，就是最小质因子。然后连续用<em>p</em><em>{1}除�，目的是去掉�中的�除*n</em>，目的是去掉*n<em>中的*p</em><em>{1},得到�,得到</em>n**{1}。(2)第二步，再找�。(2)第二步，再找*n**{1}的最小质因子。逐个检查从�的最小质因子。逐个检查从<em>p</em><em>{1}到到\quad\sqrt{n1}\quad\text{的所有素数。从p}</em>{1}开始试除，是因为�开始试除，是因为<em>n</em><em>{1}没有比�没有比*P</em><em>{1}小的素因子，而且�小的素因子，而且</em>n*_{1}$的因子也是 n 的因子。 (3)继续以上步骤，直到找到所有质因子。</p>
<p>我们直接看一个例题：</p>
<p>【题目描述】求出区间[a,b]中所有整数的质因数分解。 【输入描述】输入一行，包含 2 个整数 a，b。2&lt;&#x3D;a&lt;&#x3D;b&lt;&#x3D;10000 【输出描述】每行输出一个数的分解，形如 k&#x3D;a1×a2×a3×…，k 从小到大，a 从小到大。</p>
<p>输入： 3 10</p>
<p>输出： $\begin{aligned} &amp;\text{3&#x3D;} \text{3} \ &amp;\text{4&#x3D;} 2\times2 \ &amp;\text{5&#x3D;} \text{5} \ &amp;6&#x3D;2\times3 \ &amp;\text{7&#x3D;7} \ &amp;8&#x3D;2\times2\times2 \ &amp;9&#x3D;3\times3 \ &amp;10&#x3D;2\times5 \end{aligned}$</p>
<p>直接对每个数进行分解，然后打印出它的因数。</p>
<h3 id="C-实现：-4"><a href="#C-实现：-4" class="headerlink" title="C++ 实现："></a>C++ 实现：</h3><figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> p[<span class="number">20</span>];  <span class="comment">//p[]记录因子，p[1]是最小因子。一个int数的质因子最多有10几个</span></span><br><span class="line"><span class="type">int</span> c[<span class="number">40</span>];  <span class="comment">//c[i]记录第i个因子的个数。一个因子的个数最多有30几个</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">factor</span><span class="params">(<span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> m = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i &lt;= <span class="built_in">sqrt</span>(n); i++)</span><br><span class="line">        <span class="keyword">if</span>(n%i == <span class="number">0</span>)&#123;</span><br><span class="line">            p[++m] = i, c[m] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>(n%i == <span class="number">0</span>)            <span class="comment">//把n中重复的因子去掉</span></span><br><span class="line">                n/=i, c[m]++;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">if</span>(n&gt;<span class="number">1</span>)                           <span class="comment">//没有被除尽，是素数</span></span><br><span class="line">        p[++m] = n, c[m] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> m;                         <span class="comment">//共m个因子</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> a,b;   cin&gt;&gt;a&gt;&gt;b;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=a;i&lt;=b;i++)&#123;</span><br><span class="line">        <span class="type">int</span> m = <span class="built_in">factor</span>(i);</span><br><span class="line">        cout&lt;&lt;i&lt;&lt;<span class="string">&quot;=&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=m;j++)&#123; <span class="comment">//第j个因子</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;=c[j];k++)&#123;    <span class="comment">//第j个因子的个数</span></span><br><span class="line">                cout &lt;&lt;p[j];</span><br><span class="line">                <span class="keyword">if</span>(k&lt;c[j]) cout &lt;&lt;<span class="string">&quot;*&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(j&lt;m) cout &lt;&lt;<span class="string">&quot;*&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Java-实现：-4"><a href="#Java-实现：-4" class="headerlink" title="Java 实现："></a>Java 实现：</h3><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[] p = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">20</span>];  <span class="comment">// p[] 记录因子，p[1] 是最小因子。一个 int 数的质因子最多有 10 几个</span></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[] c = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">40</span>];  <span class="comment">// c[i] 记录第 i 个因子的个数。一个因子的个数最多有 30 几个</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">factor</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i &lt;= Math.sqrt(n); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (n % i == <span class="number">0</span>) &#123;</span><br><span class="line">                p[++m] = i;</span><br><span class="line">                c[m] = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span> (n % i == <span class="number">0</span>) &#123;</span><br><span class="line">                    n /= i;</span><br><span class="line">                    c[m]++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (n &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            p[++m] = n;</span><br><span class="line">            c[m] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> m;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> sc.nextInt(), b = sc.nextInt();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> a; i &lt;= b; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> factor(i);</span><br><span class="line">            System.out.print(i + <span class="string">&quot;=&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= m; j++) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">1</span>; k &lt;= c[j]; k++) &#123;</span><br><span class="line">                    System.out.print(p[j]);</span><br><span class="line">                    <span class="keyword">if</span> (k &lt; c[j]) &#123;</span><br><span class="line">                        System.out.print(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (j &lt; m) &#123;</span><br><span class="line">                    System.out.print(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Python-实现：-4"><a href="#Python-实现：-4" class="headerlink" title="Python 实现："></a>Python 实现：</h3><figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line">p = [<span class="number">0</span>] * <span class="number">20</span>  <span class="comment"># p[] 记录因子，p[1] 是最小因子。一个 int 数的质因子最多有 10 几个</span></span><br><span class="line">c = [<span class="number">0</span>] * <span class="number">40</span>  <span class="comment"># c[i] 记录第 i 个因子的个数。一个因子的个数最多有 30 几个</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">factor</span>(<span class="params">n</span>):</span><br><span class="line">    m = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, <span class="built_in">int</span>(math.sqrt(n)) + <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> n % i == <span class="number">0</span>:</span><br><span class="line">            m += <span class="number">1</span></span><br><span class="line">            p[m], c[m] = i, <span class="number">0</span></span><br><span class="line">            <span class="keyword">while</span> n % i == <span class="number">0</span>:</span><br><span class="line">                n //= i</span><br><span class="line">                c[m] += <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> n &gt; <span class="number">1</span>:</span><br><span class="line">        m += <span class="number">1</span></span><br><span class="line">        p[m], c[m] = n, <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> m</span><br><span class="line"></span><br><span class="line">a, b = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(a, b+<span class="number">1</span>):</span><br><span class="line">    m = factor(i)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;i&#125;</span>=&#x27;</span>, end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, m+<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, c[j]+<span class="number">1</span>):</span><br><span class="line">            <span class="built_in">print</span>(p[j], end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> k &lt; c[j]:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;*&#x27;</span>, end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> j &lt; m:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;*&#x27;</span>, end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>()</span><br></pre></td></tr></table></figure>

      
    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%A4%87%E8%B5%9B/" rel="tag"><i class="fas fa-tags"></i>蓝桥杯备赛</a>
        
      </div>
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="https://actz123.github.io/2024/02/22/%E5%9B%BE%E8%AE%BA%E5%85%A5%E9%97%A8/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="zdx">
        <meta itemprop="description" content="">
        <meta itemprop="image" content="/images/avatar.png">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="Actz">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2024/02/22/%E5%9B%BE%E8%AE%BA%E5%85%A5%E9%97%A8/" itemprop="url">图论入门</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2024-02-22T17:40:17+08:00">2024-02-22 17:40:17</time></span>
        </span>
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-categories">
          
          <i class="far fa-folder-open"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%86%B2%E5%88%BA%E8%90%A5/" itemprop="url" rel="index"><span itemprop="name">蓝桥杯冲刺营</span></a></span><i class="fas fa-angle-right"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%86%B2%E5%88%BA%E8%90%A5/11-%E5%9B%BE%E8%AE%BA%E5%85%A5%E9%97%A8/" itemprop="url" rel="index"><span itemprop="name">11.图论入门</span></a></span>
        </span>
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <h1 id="图论"><a href="#图论" class="headerlink" title="图论"></a>图论</h1><p>本章节为图论最基本的内容，要求每位同学都要尽量掌握。</p>
<h2 id="图的基本概念"><a href="#图的基本概念" class="headerlink" title="图的基本概念"></a>图的基本概念</h2><p>图：由点(<code>node</code>，或者 <code>vertex</code>)和连接点的边(<code>edge</code>)组成。图是点和边构成的网。</p>
<p>树：特殊的图</p>
<p>树，即连通无环图树的结点从根开始，层层扩展子树，是一种层次关系，这种层次关系，保证了树上不会出现环路。两点之间的路径：有且仅有一条路径。最近公共祖先。</p>
<h3 id="图的种类"><a href="#图的种类" class="headerlink" title="图的种类"></a>图的种类</h3><p>（1）无向无权图，边没有权值、没有方向； （2）有向无权图，边有方向、无权值； （3）加权无向图，边有权值，但没有方向； （4）加权有向图； （5）有向无环图（Directed Acyclic Graph，DAG）。</p>
<h3 id="图算法的时间分析"><a href="#图算法的时间分析" class="headerlink" title="图算法的时间分析"></a>图算法的时间分析</h3><p>图算法的复杂度和边的数量 E、点的数量 V 相关。�(�+�)<em>O</em>(<em>V</em>+<em>E</em>)：几乎是图问题中能达到的最好程度。�(�log⁡�)<em>O</em>(<em>V</em>log<em>E</em>)、�(�log⁡�)<em>O</em>(<em>E</em>log<em>V</em>)：很好的算法。�(�2)<em>O</em>(<em>V</em>2)、�(�2)<em>O</em>(<em>E</em>2)或更高：不算是好的算法。</p>
<h2 id="图的存储"><a href="#图的存储" class="headerlink" title="图的存储"></a>图的存储</h2><p>能快速访问：图的存储，能让程序很快定位结点 <code>u</code> 和 <code>v</code> 的边<code>(u, v)</code> 。</p>
<ul>
<li>数组存边：简单、空间使用最少；无法快递定位</li>
<li>邻接矩阵：简单、空间使用最大；定位最快 <code>dis[a][b]</code></li>
<li>邻接表：空间很少，定位较快</li>
<li>链式前向星：空间更少，定位较快</li>
</ul>
<p><strong>注： 存储方式跟题目相匹配，占用空间少定位快也不一定是问题的最优存储方式。</strong></p>
<h3 id="数组存边"><a href="#数组存边" class="headerlink" title="数组存边"></a>数组存边</h3><p>优点：简单、最省空间。 缺点：无法定位某条边。 应用：<code>bellman-ford</code> 算法、最小生成树的 <code>kruskal</code> 算法</p>
<figure class="hljs highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// c/c++实现</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Edge</span>&#123;</span><br><span class="line">    <span class="type">int</span> from,to,dis;</span><br><span class="line">&#125;e[M]; <span class="comment">//结构体数组存边</span></span><br><span class="line"></span><br><span class="line">cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;++i)</span><br><span class="line">    cin&gt;&gt;e[i].from&gt;&gt;e[i].to&gt;&gt;e[i].dis;</span><br><span class="line"><span class="comment">//Java实现</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Edge</span> &#123; <span class="type">int</span> from; <span class="type">int</span> to; <span class="type">int</span> dis;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Edge</span><span class="params">(<span class="type">int</span> from, <span class="type">int</span> to, <span class="type">int</span> dis)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.from = from;</span><br><span class="line">        <span class="keyword">this</span>.to = to;</span><br><span class="line">        <span class="keyword">this</span>.dis = dis;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Edge[] e = <span class="keyword">new</span> Edge[M];</span><br><span class="line"></span><br><span class="line">Scanner sc = <span class="keyword">new</span> <span class="built_in">Scanner</span>(System.in);</span><br><span class="line"><span class="type">int</span> n = sc.<span class="built_in">nextInt</span>();</span><br><span class="line"><span class="type">int</span> m = sc.<span class="built_in">nextInt</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; ++i)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> from = sc.<span class="built_in">nextInt</span>();</span><br><span class="line">    <span class="type">int</span> to = sc.<span class="built_in">nextInt</span>();</span><br><span class="line">    <span class="type">int</span> dis = sc.<span class="built_in">nextInt</span>();</span><br><span class="line">    e[i] = <span class="keyword">new</span> <span class="built_in">Edge</span>(from, to, dis);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#python实现</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Edge</span>:</span><br><span class="line">    <span class="function">def <span class="title">init</span><span class="params">(self, f, t, d)</span>:</span></span><br><span class="line"><span class="function">        self.from =</span> f</span><br><span class="line">        self.to = t</span><br><span class="line">        self.dis = d</span><br><span class="line"></span><br><span class="line">e = [<span class="built_in">Edge</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>) <span class="keyword">for</span> i in <span class="built_in">range</span>(M)]</span><br><span class="line"></span><br><span class="line">n, m = <span class="built_in">map</span>(<span class="type">int</span>, <span class="built_in">input</span>().<span class="built_in">split</span>())</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i in <span class="built_in">range</span>(<span class="number">1</span>, m + <span class="number">1</span>):</span><br><span class="line">    e[i].from, e[i].to, e[i].dis = <span class="built_in">map</span>(<span class="type">int</span>, <span class="built_in">input</span>().<span class="built_in">split</span>())</span><br></pre></td></tr></table></figure>

<h3 id="邻接矩阵"><a href="#邻接矩阵" class="headerlink" title="邻接矩阵"></a>邻接矩阵</h3><p>二维数组： ����ℎ[���][���]<em>g<strong>r</strong>a<strong>p</strong>h</em>[<em>N<strong>U</strong>M</em>][<em>N<strong>U</strong>M</em>] 无向图： ����ℎ[�][�]&#x3D;����ℎ[�][�]。<em>g<strong>r</strong>a<strong>p</strong>h</em>[<em>i</em>][<em>j</em>]&#x3D;<em>g<strong>r</strong>a<strong>p</strong>h</em>[<em>j</em>][<em>i</em>]。 有向图： ����ℎ[�][�]≠����ℎ[�][�]。<em>g<strong>r</strong>a<strong>p</strong>h</em>[<em>i</em>][<em>j</em>]&#x3D;<em>g<strong>r</strong>a<strong>p</strong>h</em>[<em>j</em>][<em>i</em>]。 权值： ����ℎ[�][�]存结点�到�的边的权值。<em>g<strong>r</strong>a<strong>p</strong>h</em>[<em>i</em>][<em>j</em>]存结点<em>i</em>到<em>j</em>的边的权值。 例如 ����ℎ[1][2]&#x3D;3，����ℎ[2][1]&#x3D;5等等。<em>g<strong>r</strong>a<strong>p</strong>h</em>[1][2]&#x3D;3，<em>g<strong>r</strong>a<strong>p</strong>h</em>[2][1]&#x3D;5等等。 用 ����ℎ[�][�]&#x3D;���表示�，�之间无边。<em>g<strong>r</strong>a<strong>p</strong>h</em>[<em>i</em>][<em>j</em>]&#x3D;<em>I<strong>N</strong>F</em>表示<em>i</em>，<em>j</em>之间无边。</p>
<p>优点：</p>
<ul>
<li>适合稠密图；</li>
<li>编码非常简短；</li>
<li>对边的存储、查询、更新等操作又快又简单。</li>
</ul>
<p>缺点：</p>
<ul>
<li>存储复杂度 �(�2)<em>O</em>(<em>V</em>2)太高。V&#x3D;10000 时，空间 100M。</li>
<li>不能存储重边。</li>
</ul>
<h3 id="邻接表和链式前向星"><a href="#邻接表和链式前向星" class="headerlink" title="邻接表和链式前向星"></a>邻接表和链式前向星</h3><p>邻接表（指针或数组下标）和链式前向星（容器模拟）的思路一样，只是表达方式不同。</p>
<p><img src="/./../imgs/%E5%9B%BE%E8%AE%BA%E5%85%A5%E9%97%A8/29bc6278e9e147f9597ba0c263fc1903-0.png" alt="图片描述"></p>
<figure class="hljs highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span>&#123;</span></span><br><span class="line">    <span class="type">int</span> from, to; <span class="type">long</span> <span class="type">long</span> w; <span class="comment">//起点，终点，权值。起点from并没有用到，e[i]的i就是from</span></span><br><span class="line">    edge(<span class="type">int</span> a, <span class="type">int</span> b,<span class="type">long</span> <span class="type">long</span> c)&#123;from=a; to=b; w=c;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt;e[N];          <span class="comment">//用于存储图</span></span><br><span class="line"><span class="type">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="type">int</span> from, to;</span><br><span class="line">    <span class="type">long</span> w;</span><br><span class="line"></span><br><span class="line">    Edge(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">long</span> c) &#123;</span><br><span class="line">        from = a;</span><br><span class="line">        to = b;</span><br><span class="line">        w = c;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">static</span> ArrayList&lt;Edge&gt;[] e = new ArrayList[N];</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Edge</span>:</span></span><br><span class="line">    def __init__(self, fr, to, w):</span><br><span class="line">        self.fr = fr</span><br><span class="line">        self.to = to</span><br><span class="line">        self.w = w</span><br><span class="line"></span><br><span class="line">e = [[] <span class="keyword">for</span> _ in range(N)]</span><br></pre></td></tr></table></figure>

<p>我们会在使用的时候进行讲解。</p>
<h2 id="最短路问题"><a href="#最短路问题" class="headerlink" title="最短路问题"></a>最短路问题</h2><p>最广为人知的图论问题就是最短路径问题。</p>
<p>简单图的最短路径</p>
<ul>
<li>树上的路径：任意 22 点之间</li>
</ul>
<p>只有一条路径</p>
<ul>
<li>所有边长都为 11 的图：用 <code>BFS</code> 搜最短路径，复杂度 �(�+�)<em>O</em>(<em>n</em>+<em>m</em>)</li>
</ul>
<p>普通图的最短路径</p>
<ul>
<li>边长：不一定等于 11，而且可能为负数</li>
<li>算法：<code>Floyd</code>、<code>Dijkstra</code>、<code>SPFA</code> 等，各有应用场景，不可互相替代</li>
</ul>
<h3 id="最短路算法比较"><a href="#最短路算法比较" class="headerlink" title="最短路算法比较"></a>最短路算法比较</h3><table>
<thead>
<tr>
<th>问题</th>
<th>边权</th>
<th>算法</th>
<th>时间复杂度</th>
</tr>
</thead>
<tbody><tr>
<td>一个起点，一个终点</td>
<td>非负数；无边权（或边权为 1）</td>
<td>A*</td>
<td>&lt;�((�+�)log⁡�)<em>O</em>((<em>m</em>+<em>n</em>)log<em>n</em>)</td>
</tr>
<tr>
<td></td>
<td></td>
<td>双向广搜</td>
<td>&lt;�((�+�)log⁡�)<em>O</em>((<em>m</em>+<em>n</em>)log<em>n</em>)</td>
</tr>
<tr>
<td></td>
<td></td>
<td>贪心最优搜索</td>
<td>&lt;�(�+�)<em>O</em>(<em>m</em>+<em>n</em>)</td>
</tr>
<tr>
<td>一个起点到其他所有点</td>
<td>无边权（或边权为 1）</td>
<td>BFS</td>
<td>�(�+�)<em>O</em>(<em>m</em>+<em>n</em>)</td>
</tr>
<tr>
<td></td>
<td>非负数</td>
<td>Dijkstra(堆优化优先队列)</td>
<td>�((�+�)log⁡�)<em>O</em>((<em>m</em>+<em>n</em>)log<em>n</em>)</td>
</tr>
<tr>
<td></td>
<td>允许有负数</td>
<td>SPFA</td>
<td>&lt;�(��)<em>O</em>(<em>m**n</em>)</td>
</tr>
<tr>
<td>所有点对之间</td>
<td>允许有负数</td>
<td>Floyd-Warshall</td>
<td>�(�3)<em>O</em>(<em>n</em>3)</td>
</tr>
</tbody></table>
<p>什么算法也不能解决存在负环图的最短路的问题！最多是判断是否存在，或者找到负环。</p>
<p>网站推荐：<a target="_blank" rel="noopener" href="https://csacademy.com/app/graph_editor/?tdsourcetag=s_pctim_aiomsg">CSAcademy Graph Editor</a></p>
<p><img src="/./../imgs/%E5%9B%BE%E8%AE%BA%E5%85%A5%E9%97%A8/5c77aaf44a27ba24fd4dfee6aa36a8ce-0.png" alt="图片描述"></p>
<p>方便图论的学习。</p>
<h3 id="Floyd-算法"><a href="#Floyd-算法" class="headerlink" title="Floyd 算法"></a>Floyd 算法</h3><ul>
<li>最简单的最短路径算法，代码仅有 44 行</li>
<li>存图：最简单的矩阵存图</li>
<li>易懂，比暴力的搜索更简单易懂。</li>
<li>效率不高，不能用于大图在某些场景下有自己的优势，难以替代。能做传递闭包问题（离散数学）</li>
</ul>
<figure class="hljs highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//java 和 c++</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>; k&lt;=n; k++)         <span class="comment">//floyd的三重循环</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>; j&lt;=n; j++)      <span class="comment">// k循环在i、j循环外面</span></span><br><span class="line">            dp[i][j] = min(dp[i][j], dp[i][k] + dp[k][j]);</span><br><span class="line"><span class="meta">#python</span></span><br><span class="line"><span class="keyword">for</span> k in <span class="title function_">range</span><span class="params">(<span class="number">1</span>, n+<span class="number">1</span>)</span>: <span class="meta">#floyd的三重循环</span></span><br><span class="line">    <span class="keyword">for</span> i in <span class="title function_">range</span><span class="params">(<span class="number">1</span>, n+<span class="number">1</span>)</span>:</span><br><span class="line">        <span class="keyword">for</span> j in <span class="title function_">range</span><span class="params">(<span class="number">1</span>, n+<span class="number">1</span>)</span>: <span class="meta"># k循环在i、j循环外面</span></span><br><span class="line">            dp[i][j] = min(dp[i][j], dp[i][k] + dp[k][j])</span><br></pre></td></tr></table></figure>

<p><code>Floyd算法</code>：<code>多源</code>最短路算法，一次计算能得到图中每一对结点之间（<code>多对多</code>）的最短路径。 <code>Dijkstra</code>、<code>Bellman-Ford</code>、<code>SPFA</code>算法：<code>单源</code>最短路径算法（<code>Single source shortest path algorithm</code>），一次计算能得到一个起点到其他所有点（<code>一对多</code>）的最短路径。在截止目前的蓝桥杯大赛中，<code>Floyd</code>算法是最常见的最短路径算法。 以上统计包括国赛和省赛，所以另外两种仍然要进行学习。</p>
<h4 id="Floyd-算法思想：动态规划"><a href="#Floyd-算法思想：动态规划" class="headerlink" title="Floyd 算法思想：动态规划"></a>Floyd 算法思想：动态规划</h4><p>下面为 <code>Floyd</code> 算法的原理，不看背代码也可以。</p>
<ul>
<li>动态规划：求图上两点 <code>i</code>、<code>j</code> 之间的最短距离，按“从小图到全图”的步骤，在逐步扩大图的过程中计算和更新最短路。</li>
<li>定义状态：<code>dp[k][i][j]，i、j、k</code>是点的编号，范围 <code>1 ~ n</code>。状态<code>dp[k][i][j]</code>表示在包含 <code>1 ~ k</code> 点的子图上，点对 <code>i、j</code> 之间的最短路。</li>
<li>状态转移方程：从子图 <code>1 ~ k-1</code> 扩展到子图 <code>1 ~ k</code>��[�][�][�]&#x3D;���(��[�−1][�][�],��[�−1][�][�]+��[�−1][�][�])<em>d**p</em>[<em>k</em>][<em>i</em>][<em>j</em>]&#x3D;<em>m<strong>i</strong>n</em>(<em>d**p</em>[<em>k</em>−1][<em>i</em>][<em>j</em>],<em>d**p</em>[<em>k</em>−1][<em>i</em>][<em>k</em>]+<em>d**p</em>[<em>k</em>−1][<em>k</em>][<em>j</em>])</li>
</ul>
<p>首先是包含 <code>1 ~ k-1</code> 点的子图。 ��[�−1][�][�]<em>d**p</em>[<em>k</em>−1][<em>i</em>][<em>j</em>]：不包含 <code>k</code> 点子图内的点对 <code>i、j</code> 的最短路； ��[�−1][�][�]+��[�−1][�][�]<em>d**p</em>[<em>k</em>−1][<em>i</em>][<em>k</em>]+<em>d**p</em>[<em>k</em>−1][<em>k</em>][<em>j</em>]：经过 k 点的新路径的长度，即这条路径从 <code>i</code> 出发，先到 <code>k</code>，再从 <code>k</code> 到终点 <code>j</code>。 比较：不经过 <code>k</code> 的最短路径��[�−1][�][�]<em>d**p</em>[<em>k</em>−1][<em>i</em>][<em>j</em>]和经过 <code>k</code> 的新路径，较小者就是新的��[�][�][�]<em>d**p</em>[<em>k</em>][<em>i</em>][<em>j</em>]。</p>
<p>所以 <code>Floyd</code> 的原理就是每次引入一个新的点，用它去更新其他点的最短距离。</p>
<p><code>k</code> 从 <code>1</code> 逐步扩展到 <code>n</code>：最后得到的��[�][�][�]<em>d**p</em>[<em>n</em>][<em>i</em>][<em>j</em>]是点对 <code>i、j</code> 之间的最短路径长度。 初值��[0][�][�]<em>d**p</em>[0][<em>i</em>][<em>j</em>]：若 <code>i、j</code> 是直连的，就是它们的边长；若不直连，赋值为无穷大。 <code>i、j</code> 是任意点对：计算结束后得到了所有点对之间的最短路。</p>
<p>��[�][�][�]&#x3D;���(��[�−1][�][�],��[�−1][�][�]+��[�−1][�][�])<em>d**p</em>[<em>k</em>][<em>i</em>][<em>j</em>]&#x3D;<em>m<strong>i</strong>n</em>(<em>d**p</em>[<em>k</em>−1][<em>i</em>][<em>j</em>],<em>d**p</em>[<em>k</em>−1][<em>i</em>][<em>k</em>]+<em>d**p</em>[<em>k</em>−1][<em>k</em>][<em>j</em>]) 用滚动数组简化： ��[�][�]&#x3D;���(��[�][�],��[�][�]+��[�][�])<em>d**p</em>[<em>i</em>][<em>j</em>]&#x3D;<em>m<strong>i</strong>n</em>(<em>d**p</em>[<em>i</em>][<em>j</em>],<em>d**p</em>[<em>i</em>][<em>k</em>]+<em>d**p</em>[<em>k</em>][<em>j</em>])</p>
<p><strong>特点：</strong></p>
<ul>
<li>在一次计算后求得所有结点之间的最短距离。</li>
<li>代码极其简单，是最简单的最短路算法。</li>
<li>效率低下，计算复杂度是 �(�3)<em>O</em>(<em>n</em>3)，只能用于 �&lt;300<em>n</em>&lt;300 的小规模的图。</li>
<li>存图用邻接矩阵 <code>dp[][]</code> 。因为 <code>Floyd</code> 算法计算的结果是所有点对之间的最短路，本身就需要 <code>n^2</code> 的空间，用矩阵存储最合适。</li>
<li>能判断负圈。 负圈：若图中有权值为负的边，某个经过这个负边的环路，所有边长相加的总长度也是负数，这就是负圈。在这个负圈上每绕一圈，总长度就更小，从而陷入在负圈上兜圈子的死循环。 <code>Floyd</code> 算法很容易判断负圈，只要在算法运行过程出现任意一个 <code>dp[i][i] &lt; 0</code> 就说明有负圈。因为 <code>dp[i][i]</code> 是从 <code>i</code> 出发，经过其他中转点绕一圈回到自己的最短路径，如果小于零，就存在负圈。</li>
</ul>
<h3 id="Dijkstra-算法"><a href="#Dijkstra-算法" class="headerlink" title="Dijkstra 算法"></a>Dijkstra 算法</h3><ul>
<li>Dijkstra：单源最短路径问题。</li>
<li>优点：非常高效而且稳定。</li>
<li>缺点：只能处理不含有负权边的图。</li>
<li>思路：贪心思想+优先队列。</li>
</ul>
<h4 id="算法思想"><a href="#算法思想" class="headerlink" title="算法思想"></a>算法思想</h4><p><code>Dijkstra</code> 算法算是贪心思想实现的，首先把起点到所有点的距离存下来找个最短的，然后松弛一次再找出最短的，所谓的松弛操作就是，遍历一遍看通过刚刚找到的距离最短的点作为中转站会不会更近，如果更近了就更新距离，这样把所有的点找遍之后就存下了起点到其他所有点的最短距离。</p>
<p><strong>为什么是每次都是找最小的？</strong></p>
<p>因为最小边的不会被其它的点松弛，只有可能最小边去松弛别人。 如果存在一个点 �<em>K</em> 能够松弛 ��<em>a**b</em> 的话那么一定有 ��<em>a**k</em> 距离加上 ��<em>k**b</em> 的距离小于 ��<em>a**b</em>，已知 ��<em>a**b</em> 最短，所以不存在 ��+��&lt;��<em>a**k</em>+<em>k**b</em>&lt;<em>a**b</em>。</p>
<p><code>Dijkstra</code> 算法应用了贪心法的思想，即“抄近路走，肯定能找到最短路径”。</p>
<p>算法高效稳定：</p>
<ul>
<li><code>Dijkstra</code> 的每次迭代，只需要检查上次已经确定最短路径的那些结点的邻居，检查范围很小，算法是高效的；</li>
<li>每次迭代，都能得到至少一个结点的最短路径，算法是稳定的</li>
</ul>
<p>优先队列实现：</p>
<ul>
<li>每次往队列中放新数据时，按从小到大的顺序放，采用小顶堆的方式，复杂度是 �(����)<em>O</em>(<em>l<strong>o</strong>g**n</em>)，保证最小的数总在最前面；</li>
<li>找最小值，直接取 <code>B</code> 的第一个数，复杂度是 �(1)<em>O</em>(1)。</li>
<li>复杂度：用优先队列时，<code>Dijkstra</code> 算法的复杂度是 �(�����)<em>O</em>(<em>m<strong>l</strong>o<strong>g</strong>n</em>)，是最高效的最短路算法。</li>
</ul>
<p>维护两个集合：已确定最短路径的结点集合 <code>A</code>、这些结点向外扩散的邻居结点集合 <code>B</code>。</p>
<ol>
<li>把起点 <code>s</code> 放到 <code>A</code> 中，把 <code>s</code> 所有的邻居放到 <code>B</code> 中。此时，邻居到 <code>s</code> 的距离就是直连距离。</li>
<li>从 <code>B</code> 中找出距离起点 <code>s</code> 最短的结点 <code>u</code>，放到 <code>A</code> 中。</li>
<li>把 <code>u</code> 所有的新邻居放到 <code>B</code> 中。显然，<code>u</code> 的每一条边都连接了一个邻居，每个新邻居都要加进去。其中 <code>u</code> 的一个新邻居 <code>v</code>，它到 <code>s</code> 的距离 <code>dis(s, v)</code> 等于 <code>dis(s, u) + dis(u, v)</code>。</li>
<li>重复(2)、(3)，直到 <code>B</code> 为空时，结束。</li>
</ol>
<p><strong>Dijkstra 的局限性是边的权值不能为负数：</strong></p>
<p>Dijkstra 基于 <code>BFS</code>，计算过程是从起点 <code>s</code> 逐步往外扩散的过程，每扩散一次就用贪心得到到一个点的最短路。 扩散要求路径越来越长，如果遇到一个负权边，会导致路径变短，使扩散失效。</p>
<p>Dijkstra 模板如下：</p>
<figure class="hljs highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">long</span> <span class="type">long</span> INF = <span class="number">0x3f3f3f3f3f3f3f3f</span>LL;</span><br><span class="line"><span class="comment">//这样定义INF的好处是: INF &lt;= INF+x</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N= <span class="number">3e5</span>+<span class="number">2</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span>&#123;</span><br><span class="line">    <span class="type">int</span> from, to; <span class="type">long</span> <span class="type">long</span> w; <span class="comment">//起点，终点，权值。起点from并没有用到，e[i]的i就是from</span></span><br><span class="line">    <span class="built_in">edge</span>(<span class="type">int</span> a, <span class="type">int</span> b,<span class="type">long</span> <span class="type">long</span> c)&#123;from=a; to=b; w=c;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;edge&gt;e[N];          <span class="comment">//用于存储图</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">s_node</span>&#123;</span><br><span class="line">    <span class="type">int</span> id; <span class="type">long</span> <span class="type">long</span> n_dis;   <span class="comment">//id：结点；n_dis：这个结点到起点的距离</span></span><br><span class="line">    <span class="built_in">s_node</span>(<span class="type">int</span> b,<span class="type">long</span> <span class="type">long</span> c)&#123;id=b; n_dis=c;&#125;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span> &lt; (<span class="type">const</span> s_node &amp; a) <span class="type">const</span></span><br><span class="line">    &#123; <span class="keyword">return</span> n_dis &gt; a.n_dis;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="type">int</span> pre[N];                                <span class="comment">//记录前驱结点，用于生成路径</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print_path</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t)</span> </span>&#123;            <span class="comment">//打印从s到t的最短路</span></span><br><span class="line">    <span class="keyword">if</span>(s==t)&#123; <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, s); <span class="keyword">return</span>; &#125;  <span class="comment">//打印起点</span></span><br><span class="line">    <span class="built_in">print_path</span>(s, pre[t]);                 <span class="comment">//先打印前一个点</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, t);                      <span class="comment">//后打印当前点。最后打印的是终点t</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">long</span> <span class="type">long</span>  dis[N];         <span class="comment">//记录所有结点到起点的距离</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dijkstra</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> s = <span class="number">1</span>;             <span class="comment">//起点s是1</span></span><br><span class="line">    <span class="type">bool</span> done[N]; <span class="comment">//done[i]=true表示到结点i的最短路径已经找到</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;dis[i]=INF; done[i]=<span class="literal">false</span>; &#125;    <span class="comment">//初始化</span></span><br><span class="line">    dis[s]=<span class="number">0</span>;                           <span class="comment">//起点到自己的距离是0</span></span><br><span class="line">    priority_queue &lt;s_node&gt; Q;          <span class="comment">//优先队列，存结点信息</span></span><br><span class="line">    Q.<span class="built_in">push</span>(<span class="built_in">s_node</span>(s, dis[s]));          <span class="comment">//起点进队列</span></span><br><span class="line">    <span class="keyword">while</span> (!Q.<span class="built_in">empty</span>())   &#123;</span><br><span class="line">        s_node u = Q.<span class="built_in">top</span>();             <span class="comment">//pop出距起点s距离最小的结点u</span></span><br><span class="line">        Q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">if</span>(done[u.id])  <span class="keyword">continue</span>;       <span class="comment">//丢弃已经找到最短路径的结点。即集合A中的结点            </span></span><br><span class="line">        done[u.id]= <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;e[u.id].<span class="built_in">size</span>(); i++) &#123;  <span class="comment">//检查结点u的所有邻居</span></span><br><span class="line">            edge y = e[u.id][i];         <span class="comment">//u.id的第i个邻居是y.to</span></span><br><span class="line">            <span class="keyword">if</span>(done[y.to])  <span class="keyword">continue</span>;    <span class="comment">//丢弃已经找到最短路径的邻居结点                </span></span><br><span class="line">            <span class="keyword">if</span> (dis[y.to] &gt; y.w + u.n_dis) &#123;</span><br><span class="line">                dis[y.to] = y.w + u.n_dis;</span><br><span class="line">                Q.<span class="built_in">push</span>(<span class="built_in">s_node</span>(y.to, dis[y.to]));  <span class="comment">//扩展新的邻居，放到优先队列中</span></span><br><span class="line">                pre[y.to]=u.id;  <span class="comment">//如果有需要，记录路径</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// print_path(s,n);          //如果有需要，打印路径: 起点1，终点n</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)    e[i].<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">while</span> (m--) &#123;</span><br><span class="line">        <span class="type">int</span> u,v,w;  <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%lld&quot;</span>,&amp;u,&amp;v,&amp;w);</span><br><span class="line">        e[u].<span class="built_in">push_back</span>(<span class="built_in">edge</span>(u,v,w));</span><br><span class="line">     <span class="comment">// e[v].push_back(edge(v,u,w));    //本题是单向道路</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dijkstra</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(dis[i]&gt;=INF)  cout&lt;&lt;<span class="string">&quot;-1 &quot;</span>;</span><br><span class="line">        <span class="keyword">else</span>   <span class="built_in">printf</span>(<span class="string">&quot;%lld &quot;</span>, dis[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="type">static</span> <span class="keyword">final</span> <span class="type">long</span> INF = <span class="number">0x3f3f3f3f3f3f3f3f</span>L;</span><br><span class="line">    <span class="type">static</span> <span class="keyword">final</span> <span class="type">int</span> N = <span class="number">300005</span>;</span><br><span class="line">    <span class="type">static</span> ArrayList&lt;Edge&gt;[] e = <span class="keyword">new</span> ArrayList[N];</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> n, m;</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span>[] pre = <span class="keyword">new</span> <span class="type">int</span>[N];</span><br><span class="line">    <span class="type">static</span> <span class="type">long</span>[] dis = <span class="keyword">new</span> <span class="type">long</span>[N];</span><br><span class="line">    <span class="type">static</span> boolean[] done = <span class="keyword">new</span> boolean[N];</span><br><span class="line"></span><br><span class="line">    <span class="type">static</span> <span class="keyword">class</span> <span class="title class_">Edge</span> &#123;</span><br><span class="line">        <span class="type">int</span> from, to;</span><br><span class="line">        <span class="type">long</span> w;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">Edge</span>(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">long</span> c) &#123;</span><br><span class="line">            from = a;</span><br><span class="line">            to = b;</span><br><span class="line">            w = c;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">static</span> <span class="keyword">class</span> <span class="title class_">SNode</span> implements Comparable&lt;SNode&gt; &#123;</span><br><span class="line">        <span class="type">int</span> id;</span><br><span class="line">        <span class="type">long</span> n_dis;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">SNode</span>(<span class="type">int</span> b, <span class="type">long</span> c) &#123;</span><br><span class="line">            id = b;</span><br><span class="line">            n_dis = c;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="type">int</span> <span class="title">compareTo</span><span class="params">(SNode o)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> Long.<span class="built_in">compare</span>(n_dis, o.n_dis);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">printPath</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (s == t) &#123;</span><br><span class="line">            System.out.<span class="built_in">print</span>(s + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printPath</span>(s, pre[t]);</span><br><span class="line">        System.out.<span class="built_in">print</span>(t + <span class="string">&quot; &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">dijkstra</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> s = <span class="number">1</span>;</span><br><span class="line">        PriorityQueue&lt;SNode&gt; Q = <span class="keyword">new</span> PriorityQueue&lt;&gt;();</span><br><span class="line">        Arrays.<span class="built_in">fill</span>(dis, INF);</span><br><span class="line">        dis[s] = <span class="number">0</span>;</span><br><span class="line">        Q.<span class="built_in">offer</span>(<span class="keyword">new</span> <span class="built_in">SNode</span>(s, dis[s]));</span><br><span class="line">        <span class="keyword">while</span> (!Q.<span class="built_in">isEmpty</span>()) &#123;</span><br><span class="line">            SNode u = Q.<span class="built_in">poll</span>();</span><br><span class="line">            <span class="keyword">if</span> (done[u.id])</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            done[u.id] = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">for</span> (Edge y : e[u.id]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (done[y.to])</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">if</span> (dis[y.to] &gt; y.w + u.n_dis) &#123;</span><br><span class="line">                    dis[y.to] = y.w + u.n_dis;</span><br><span class="line">                    Q.<span class="built_in">offer</span>(<span class="keyword">new</span> <span class="built_in">SNode</span>(y.to, dis[y.to]));</span><br><span class="line">                    pre[y.to] = u.id;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// printPath(s, n);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(String[] args)</span> throws Exception </span>&#123;</span><br><span class="line">        BufferedReader br = <span class="keyword">new</span> <span class="built_in">BufferedReader</span>(<span class="keyword">new</span> <span class="built_in">InputStreamReader</span>(System.in));</span><br><span class="line">        StringTokenizer st = <span class="keyword">new</span> <span class="built_in">StringTokenizer</span>(br.<span class="built_in">readLine</span>());</span><br><span class="line">        n = Integer.<span class="built_in">parseInt</span>(st.<span class="built_in">nextToken</span>());</span><br><span class="line">        m = Integer.<span class="built_in">parseInt</span>(st.<span class="built_in">nextToken</span>());</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            e[i] = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">            st = <span class="keyword">new</span> <span class="built_in">StringTokenizer</span>(br.<span class="built_in">readLine</span>());</span><br><span class="line">            <span class="type">int</span> u = Integer.<span class="built_in">parseInt</span>(st.<span class="built_in">nextToken</span>());</span><br><span class="line">            <span class="type">int</span> v = Integer.<span class="built_in">parseInt</span>(st.<span class="built_in">nextToken</span>());</span><br><span class="line">            <span class="type">long</span> w = Long.<span class="built_in">parseLong</span>(st.<span class="built_in">nextToken</span>());</span><br><span class="line">            e[u].<span class="built_in">add</span>(<span class="keyword">new</span> <span class="built_in">Edge</span>(u, v, w));</span><br><span class="line">            <span class="comment">// e[v].add(new Edge(v, u, w)); //本题是单向道路</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">dijkstra</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (dis[i] &gt;= INF)</span><br><span class="line">                System.out.<span class="built_in">print</span>(<span class="string">&quot;-1 &quot;</span>);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                System.out.<span class="built_in">print</span>(dis[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"></span><br><span class="line">INF = <span class="number">0x3f3f3f3f3f3f3f3f</span></span><br><span class="line">N = <span class="number">300002</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Edge:</span><br><span class="line">    def __init__(self, fr, to, w):</span><br><span class="line">        self.fr = fr</span><br><span class="line">        self.to = to</span><br><span class="line">        self.w = w</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> SNode:</span><br><span class="line">    def __init__(self, id, n_dis):</span><br><span class="line">        self.id = id</span><br><span class="line">        self.n_dis = n_dis</span><br><span class="line"></span><br><span class="line">    def __lt__(self, other):</span><br><span class="line">        <span class="keyword">return</span> self.n_dis &lt; other.n_dis</span><br><span class="line"></span><br><span class="line">def <span class="built_in">print_path</span>(s, t):</span><br><span class="line">    <span class="keyword">if</span> s == t:</span><br><span class="line">        <span class="built_in">print</span>(s, end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="built_in">print_path</span>(s, pre[t])</span><br><span class="line">    <span class="built_in">print</span>(t, end=<span class="string">&quot; &quot;</span>)</span><br><span class="line"></span><br><span class="line">def <span class="built_in">dijkstra</span>():</span><br><span class="line">    s = <span class="number">1</span></span><br><span class="line">    done = [False] * N</span><br><span class="line">    dis = [INF] * N</span><br><span class="line">    pre = [<span class="number">-1</span>] * N</span><br><span class="line">    dis[s] = <span class="number">0</span></span><br><span class="line">    pq = []</span><br><span class="line">    heapq.<span class="built_in">heappush</span>(pq, <span class="built_in">SNode</span>(s, dis[s]))</span><br><span class="line">    <span class="keyword">while</span> pq:</span><br><span class="line">        u = heapq.<span class="built_in">heappop</span>(pq)</span><br><span class="line">        <span class="keyword">if</span> done[u.id]:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        done[u.id] = True</span><br><span class="line">        <span class="keyword">for</span> y in e[u.id]:</span><br><span class="line">            <span class="keyword">if</span> done[y.to]:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">if</span> dis[y.to] &gt; y.w + u.n_dis:</span><br><span class="line">                dis[y.to] = y.w + u.n_dis</span><br><span class="line">                heapq.<span class="built_in">heappush</span>(pq, <span class="built_in">SNode</span>(y.to, dis[y.to]))</span><br><span class="line">                pre[y.to] = u.id</span><br><span class="line">    <span class="keyword">for</span> i in <span class="built_in">range</span>(<span class="number">1</span>, n+<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> dis[i] &gt;= INF:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;-1&quot;</span>, end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(dis[i], end=<span class="string">&quot; &quot;</span>)</span><br><span class="line"></span><br><span class="line">n, m = <span class="built_in">map</span>(<span class="type">int</span>, <span class="built_in">input</span>().<span class="built_in">split</span>())</span><br><span class="line">e = [[] <span class="keyword">for</span> _ in <span class="built_in">range</span>(N)]</span><br><span class="line"><span class="keyword">for</span> i in <span class="built_in">range</span>(m):</span><br><span class="line">    u, v, w = <span class="built_in">map</span>(<span class="type">int</span>, <span class="built_in">input</span>().<span class="built_in">split</span>())</span><br><span class="line">    e[u].<span class="built_in">append</span>(<span class="built_in">Edge</span>(u, v, w))</span><br><span class="line"></span><br><span class="line"><span class="built_in">dijkstra</span>()</span><br></pre></td></tr></table></figure>

<h3 id="Bellman-Ford-算法"><a href="#Bellman-Ford-算法" class="headerlink" title="Bellman-Ford 算法"></a>Bellman-Ford 算法</h3><p>BFS 的扩散思想，每个人都去问自己的相邻节点到 <code>S</code> 点的距离最近是多少。</p>
<p>第一轮至少有一个点得到了到 <code>S</code> 的最短距离，即与 <code>S</code> 相邻的节点，标记为 <code>T1</code></p>
<p>重复以上操作，那么必然至少又有一个节点找到了与 <code>S</code> 的最短距离，即与 <code>T1</code> 相邻的节点，标记为 <code>T2</code></p>
<p><strong>一共需要几轮操作？</strong></p>
<p>每一轮操作，都至少有一个新的结点得到了到 <code>S</code> 的最短路径。所以，最多只需要 <code>n</code> 轮操作，就能完成 <code>n</code> 个结点。在每一轮操作中，需要检查所有 <code>m</code> 个边，更新最短距离。</p>
<p>Bellman-Ford 算法的复杂度：<code>O(nm)</code>。</p>
<p><strong>Bellman-Ford 能判断负圈：</strong></p>
<p>没有负圈时，只需要 <code>n</code> 轮就结束。</p>
<p>如果超过 <code>n</code> 轮，最短路径还有变化，那么肯定有负圈。</p>
<h4 id="SPFA-算法"><a href="#SPFA-算法" class="headerlink" title="SPFA 算法"></a>SPFA 算法</h4><p>队列优化版的 Bellman-Ford</p>
<p>SPFA &#x3D; 队列处理+Bellman-Ford。</p>
<p>Bellman-Ford 算法有很多低效或无效的操作。其核心内容，是在每一轮操作中，更新所有结点到起点 <code>S</code> 的最短距离。 计算和调整一个结点 <code>U</code> 到 <code>S</code> 的最短距离后，如果紧接着调整 <code>U</code> 的邻居结点，这些邻居肯定有新的计算结果；而如果漫无目的地计算不与 <code>U</code> 相邻的结点，很可能毫无变化，所以这些操作是低效的。</p>
<p><strong>改进：</strong> 计算结点 <code>U</code> 之后，下一步只计算和调整它的邻居，能加快收敛的过程。 这些步骤用队列进行操作，这就是 SPFA。</p>
<p>（1）起点 <code>S</code> 入队，计算它所有邻居到 <code>S</code> 的最短距离。把 <code>S</code> 出队，状态有更新的邻居入队，没更新的不入队。 （2）现在队列的头部是 <code>S</code> 的一个邻居 <code>U</code>。弹出 <code>U</code>，更新它所有邻居的状态，把其中有状态变化的邻居入队列。 （3）继续以上过程，直到队列空。这也意味着，所有结点的状态都不再更新。最后的状态就是到起点 <code>S</code> 的最短路径。</p>
<p>弹出 <code>U</code> 之后，在后面的计算中，<code>U</code> 可能会再次更新状态（后来发现，<code>U</code> 借道别的结点去 <code>S</code>，路更近）。所以，<code>U</code> 可能需要重新入队列。 有可能只有很少结点重新进入队列，也有可能很多。这取决于图的特征。</p>
<p><strong>所以，SPFA 是不稳定的,所以根据题目的类型，我们要选择合适的算法。</strong></p>
<p><strong>SPFA 模板如下：</strong></p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">long</span> <span class="type">long</span> INF = <span class="number">0x3f3f3f3f3f3f3f3f</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">5e3</span>+<span class="number">10</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span>&#123;</span><br><span class="line">    <span class="type">int</span> to;    <span class="type">long</span> <span class="type">long</span> w;</span><br><span class="line">    <span class="built_in">edge</span>(<span class="type">int</span> tt,<span class="type">long</span> <span class="type">long</span> ww) &#123;to = tt; w = ww;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> dist[N];</span><br><span class="line"><span class="type">int</span> inq[N];</span><br><span class="line">vector&lt;edge&gt; e[N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">spfa</span><span class="params">(<span class="type">int</span> s)</span></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dist,<span class="number">0x3f</span>,<span class="built_in">sizeof</span>(dist));</span><br><span class="line">    dist[s] = <span class="number">0</span>;      <span class="comment">//起点到自己的距离是0</span></span><br><span class="line">    queue&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">    q.<span class="built_in">push</span>(s);        <span class="comment">//从s开始，s进队列</span></span><br><span class="line">    inq[s] = <span class="number">1</span>;       <span class="comment">//起点在队列中</span></span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="type">int</span> u = q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        inq[u] = <span class="number">0</span>;   <span class="comment">//u已经不在队列中</span></span><br><span class="line">        <span class="keyword">if</span>(dist[u] == INF)     <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; e[u].<span class="built_in">size</span>();i++) &#123;   <span class="comment">//遍历u的邻居</span></span><br><span class="line">            <span class="type">int</span> v = e[u][i].to;</span><br><span class="line">            <span class="type">long</span> <span class="type">long</span> w = e[u][i].w;</span><br><span class="line">            <span class="keyword">if</span>(dist[v] &gt; dist[u]+w) &#123;         <span class="comment">//u的第i个邻居v，它借道u，到s更近</span></span><br><span class="line">                dist[v] = dist[u]+w;          <span class="comment">//更新邻居v到s的距离</span></span><br><span class="line">                <span class="keyword">if</span>(!inq[v]) &#123;      <span class="comment">//邻居v更新状态了，但v不在队列中，放进队列</span></span><br><span class="line">                    q.<span class="built_in">push</span>(v);</span><br><span class="line">                    inq[v] = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> n,m,s;cin&gt;&gt;n&gt;&gt;m&gt;&gt;s;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>;i &lt;= m;i++)    &#123;</span><br><span class="line">        <span class="type">int</span> u,v; <span class="type">long</span> <span class="type">long</span> w;</span><br><span class="line">        cin&gt;&gt;u&gt;&gt;v&gt;&gt;w;</span><br><span class="line">        e[u].<span class="built_in">push_back</span>(<span class="built_in">edge</span>(v,w));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">spfa</span>(s);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>;i &lt;= n;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(dist[i]==INF)  cout &lt;&lt; <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">else</span>              cout &lt;&lt; dist[i];</span><br><span class="line">        <span class="keyword">if</span>(i != n)        cout &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        <span class="keyword">else</span>              cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="type">static</span> <span class="keyword">final</span> <span class="type">long</span> INF = <span class="number">0x3f3f3f3f3f3f3f3f</span>L;</span><br><span class="line">    <span class="type">static</span> <span class="keyword">final</span> <span class="type">int</span> N = <span class="number">5010</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">static</span> <span class="type">long</span>[] dist = <span class="keyword">new</span> <span class="type">long</span>[N];</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span>[] inq = <span class="keyword">new</span> <span class="type">int</span>[N];</span><br><span class="line">    <span class="type">static</span> List&lt;edge&gt;[] e = <span class="keyword">new</span> ArrayList[N];</span><br><span class="line"></span><br><span class="line">    <span class="type">static</span> <span class="keyword">class</span> <span class="title class_">edge</span> &#123;</span><br><span class="line">        <span class="type">int</span> to;</span><br><span class="line">        <span class="type">long</span> w;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">edge</span><span class="params">(<span class="type">int</span> tt, <span class="type">long</span> ww)</span> </span>&#123;</span><br><span class="line">            to = tt;</span><br><span class="line">            w = ww;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">spfa</span><span class="params">(<span class="type">int</span> s)</span> </span>&#123;</span><br><span class="line">        Arrays.<span class="built_in">fill</span>(dist, INF);</span><br><span class="line">        dist[s] = <span class="number">0</span>;</span><br><span class="line">        Queue&lt;Integer&gt; q = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        q.<span class="built_in">add</span>(s);</span><br><span class="line">        inq[s] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (!q.<span class="built_in">isEmpty</span>()) &#123;</span><br><span class="line">            <span class="type">int</span> u = q.<span class="built_in">poll</span>();</span><br><span class="line">            inq[u] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span> (dist[u] == INF) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; e[u].<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">                <span class="type">int</span> v = e[u].<span class="built_in">get</span>(i).to;</span><br><span class="line">                <span class="type">long</span> w = e[u].<span class="built_in">get</span>(i).w;</span><br><span class="line">                <span class="keyword">if</span> (dist[v] &gt; dist[u] + w) &#123;</span><br><span class="line">                    dist[v] = dist[u] + w;</span><br><span class="line">                    <span class="keyword">if</span> (inq[v] == <span class="number">0</span>) &#123;</span><br><span class="line">                        q.<span class="built_in">add</span>(v);</span><br><span class="line">                        inq[v] = <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner in = <span class="keyword">new</span> <span class="built_in">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">int</span> n = in.<span class="built_in">nextInt</span>();</span><br><span class="line">        <span class="type">int</span> m = in.<span class="built_in">nextInt</span>();</span><br><span class="line">        <span class="type">int</span> s = in.<span class="built_in">nextInt</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            e[i] = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">            <span class="type">int</span> u = in.<span class="built_in">nextInt</span>();</span><br><span class="line">            <span class="type">int</span> v = in.<span class="built_in">nextInt</span>();</span><br><span class="line">            <span class="type">long</span> w = in.<span class="built_in">nextLong</span>();</span><br><span class="line">            e[u].<span class="built_in">add</span>(<span class="keyword">new</span> <span class="built_in">edge</span>(v, w));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">spfa</span>(s);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (dist[i] == INF) System.out.<span class="built_in">print</span>(<span class="string">&quot;-1 &quot;</span>);</span><br><span class="line">            <span class="keyword">else</span> System.out.<span class="built_in">print</span>(dist[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"></span><br><span class="line">INF = <span class="number">0x3f3f3f3f3f3f3f3f</span></span><br><span class="line">N = <span class="number">5010</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Edge:</span><br><span class="line">    def __init__(self, to, w):</span><br><span class="line">        self.to = to</span><br><span class="line">        self.w = w</span><br><span class="line"></span><br><span class="line">dist = [INF] * N</span><br><span class="line">inq = [<span class="number">0</span>] * N</span><br><span class="line">e = [[] <span class="keyword">for</span> _ in <span class="built_in">range</span>(N)]</span><br><span class="line"></span><br><span class="line">def <span class="built_in">spfa</span>(s):</span><br><span class="line">    global dist</span><br><span class="line">    global inq</span><br><span class="line">    dist = [INF] * N</span><br><span class="line">    dist[s] = <span class="number">0</span></span><br><span class="line">    q = []</span><br><span class="line">    heapq.<span class="built_in">heappush</span>(q, s)</span><br><span class="line">    inq[s] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> q:</span><br><span class="line">        u = heapq.<span class="built_in">heappop</span>(q)</span><br><span class="line">        inq[u] = <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> dist[u] == INF:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">for</span> i in <span class="built_in">range</span>(<span class="built_in">len</span>(e[u])):</span><br><span class="line">            v = e[u][i].to</span><br><span class="line">            w = e[u][i].w</span><br><span class="line">            <span class="keyword">if</span> dist[v] &gt; dist[u] + w:</span><br><span class="line">                dist[v] = dist[u] + w</span><br><span class="line">                <span class="keyword">if</span> inq[v] == <span class="number">0</span>:</span><br><span class="line">                    heapq.<span class="built_in">heappush</span>(q, v)</span><br><span class="line">                    inq[v] = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">n, m, s = <span class="built_in">map</span>(<span class="type">int</span>, <span class="built_in">input</span>().<span class="built_in">split</span>())</span><br><span class="line"><span class="keyword">for</span> i in <span class="built_in">range</span>(m):</span><br><span class="line">    u, v, w = <span class="built_in">map</span>(<span class="type">int</span>, <span class="built_in">input</span>().<span class="built_in">split</span>())</span><br><span class="line">    e[u].<span class="built_in">append</span>(<span class="built_in">Edge</span>(v, w))</span><br><span class="line"><span class="built_in">spfa</span>(s)</span><br><span class="line"><span class="keyword">for</span> i in <span class="built_in">range</span>(<span class="number">1</span>, n+<span class="number">1</span>):</span><br><span class="line">    <span class="keyword">if</span> dist[i] == INF:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;-1&quot;</span>, end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(dist[i], end=<span class="string">&quot; &quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>Dijkstra：适用于权值为非负的图的单源最短路径，用斐波那契堆的复杂度 <code>O(E+VlgV)</code> BellmanFord：适用于权值有负值的图的单源最短路径，并且能够检测负圈，复杂度 <code>O(VE)</code> SPFA：适用于权值有负值，且没有负圈的图的单源最短路径。论文中的复杂度为 <code>O(kE)</code>, 其中 <code>k</code> 为每个节点进入队列的次数，且 <code>k</code> 一般 <code>&lt;=2</code>，但此处的复杂度证明是有问题的，其实 SPFA 的最坏情况应该是 <code>O(VE)</code>。 Floyd：每对节点之间的最短路径。</p>
<p><strong>所以：</strong></p>
<p>单源最短路 (1)当权值为非负时，用 <code>Dijkstra</code>。 (2)当权值有负值，且没有负圈，则用 <code>SPFA</code>。<code>SPFA</code> 能检测负圈，但是不能输出负圈。 (3)当权值有负值，而且可能存在负圈需要输出，则用 <code>BellmanFord</code>。能够检测并输出负圈。 多源最短路使用 <code>Floyd</code></p>
<h2 id="最小生成树"><a href="#最小生成树" class="headerlink" title="最小生成树"></a>最小生成树</h2><p>在无向图中，连通而且不含有圈（环路）的图，称为树。 最小生成树 MST：一个有 <code>n</code> 个结点的连通图的生成树是原图的极小连通子图，包含原图中的所有 <code>n</code> 个结点，并且边的权值之和最小。</p>
<h3 id="Prim-算法"><a href="#Prim-算法" class="headerlink" title="Prim 算法"></a>Prim 算法</h3><p>对点进行贪心操作：“最近的邻居一定在 MST 上”。 从任意一个点 <code>u</code> 开始，把距离它最近的点 <code>v</code> 加入到 MST 中；下一步，把距离 {<code>u, v</code>} 最近的点 <code>w</code> 加入到 MST 中；继续这个过程，直到所有点都在 MST 中。</p>
<figure class="hljs highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MAXN = <span class="number">1005</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="type">int</span>&gt; demo;</span><br><span class="line"><span class="type">int</span> closest[MAXN],lowcost[MAXN],m,n;<span class="comment">//m为节点的个数，n为边的数量</span></span><br><span class="line"><span class="type">int</span> G[MAXN][MAXN];<span class="comment">//邻接矩阵</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">prim</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        lowcost[i] = INF;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        closest[i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    closest[<span class="number">0</span>] = <span class="number">-1</span>;<span class="comment">//加入第一个点，-1表示该点在集合U中，否则在集合V中</span></span><br><span class="line">    <span class="type">int</span> num = <span class="number">0</span>,ans = <span class="number">0</span>,e = <span class="number">0</span>;<span class="comment">//e为最新加入集合的点</span></span><br><span class="line">    <span class="keyword">while</span> (num &lt; m<span class="number">-1</span>)<span class="comment">//加入m-1条边</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> micost = INF,miedge = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++)</span><br><span class="line">        <span class="keyword">if</span>(closest[i] != <span class="number">-1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> temp = G[e][i];</span><br><span class="line">            <span class="keyword">if</span>(temp &lt; lowcost[i])</span><br><span class="line">            &#123;</span><br><span class="line">                lowcost[i] = temp;</span><br><span class="line">                closest[i] = e;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(lowcost[i] &lt; micost)</span><br><span class="line">            micost = lowcost[miedge=i];</span><br><span class="line">        &#125;</span><br><span class="line">        ans += micost;</span><br><span class="line">        demo.push_back(micost);</span><br><span class="line">        closest[e = miedge] = <span class="number">-1</span>;</span><br><span class="line">        num++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;m, &amp;n);</span><br><span class="line">    <span class="built_in">memset</span>(G,INF,<span class="keyword">sizeof</span>(G));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">       <span class="type">int</span> a,b,c;</span><br><span class="line">       <span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b&gt;&gt;c;</span><br><span class="line"></span><br><span class="line">       G[b][a]=G[a][b]=c;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;prim()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m<span class="number">-1</span>;i++) <span class="built_in">cout</span>&lt;&lt;demo[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Scanner;</span><br><span class="line"></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">Main</span> &#123;</span></span><br><span class="line">    private <span class="type">static</span> final <span class="type">int</span> INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">    private <span class="type">static</span> final <span class="type">int</span> MAXN = <span class="number">1005</span>;</span><br><span class="line">    private <span class="type">static</span> <span class="type">int</span>[] closest = new <span class="type">int</span>[MAXN];</span><br><span class="line">    private <span class="type">static</span> <span class="type">int</span>[] lowcost = new <span class="type">int</span>[MAXN];</span><br><span class="line">    private <span class="type">static</span> <span class="type">int</span>[][] G = new <span class="type">int</span>[MAXN][MAXN];</span><br><span class="line">    private <span class="type">static</span> <span class="type">int</span> m;</span><br><span class="line">    private <span class="type">static</span> List demo = new ArrayList();</span><br><span class="line"></span><br><span class="line">    public <span class="type">static</span> <span class="type">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Scanner scanner = new Scanner(System.in);</span><br><span class="line">        m = scanner.nextInt();</span><br><span class="line">        <span class="type">int</span> n = scanner.nextInt();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="type">int</span> a = scanner.nextInt();</span><br><span class="line">            <span class="type">int</span> b = scanner.nextInt();</span><br><span class="line">            <span class="type">int</span> c = scanner.nextInt();</span><br><span class="line">            G[b][a] = G[a][b] = c;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(prim());</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            System.out.print(demo.get(i) + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private <span class="type">static</span> <span class="type">int</span> <span class="title function_">prim</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            lowcost[i] = INF;</span><br><span class="line">            closest[i] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        closest[<span class="number">0</span>] = <span class="number">-1</span>;<span class="comment">//加入第一个点，-1表示该点在集合U中，否则在集合V中</span></span><br><span class="line">        <span class="type">int</span> num = <span class="number">0</span>, ans = <span class="number">0</span>, e = <span class="number">0</span>;<span class="comment">//e为最新加入集合的点</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (num &lt; m - <span class="number">1</span>)<span class="comment">//加入m-1条边</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> micost = INF, miedge = <span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (closest[i] != <span class="number">-1</span>) &#123;</span><br><span class="line">                    <span class="type">int</span> temp = G[e][i];</span><br><span class="line">                    <span class="keyword">if</span> (temp &lt; lowcost[i]) &#123;</span><br><span class="line">                        lowcost[i] = temp;</span><br><span class="line">                        closest[i] = e;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (lowcost[i] &lt; micost) &#123;</span><br><span class="line">                        micost = lowcost[miedge = i];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            ans += micost;</span><br><span class="line">            demo.add(micost);</span><br><span class="line">            closest[e = miedge] = <span class="number">-1</span>;</span><br><span class="line">            num++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">INF = <span class="number">0x3f3f3f3f</span></span><br><span class="line">MAXN = <span class="number">1005</span></span><br><span class="line">closest = [<span class="number">0</span>] * MAXN</span><br><span class="line">lowcost = [<span class="number">0</span>] * MAXN</span><br><span class="line">G = [[INF] * MAXN <span class="keyword">for</span> _ in range(MAXN)]</span><br><span class="line">demo = []</span><br><span class="line"></span><br><span class="line">m,n = <span class="built_in">map</span>(<span class="type">int</span>, input().split())</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i in range(n):</span><br><span class="line">    a,b,c = <span class="built_in">map</span>(<span class="type">int</span>, input().split())</span><br><span class="line">    G[b][a]=G[a][b]=c</span><br><span class="line"></span><br><span class="line">def prim():</span><br><span class="line">    global closest, lowcost, G, m</span><br><span class="line">    <span class="keyword">for</span> i in range(m):</span><br><span class="line">        lowcost[i] = INF</span><br><span class="line">        closest[i] = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    closest[<span class="number">0</span>] = <span class="number">-1</span></span><br><span class="line">    num = <span class="number">0</span></span><br><span class="line">    ans = <span class="number">0</span></span><br><span class="line">    e = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> num &lt; m<span class="number">-1</span>:</span><br><span class="line">        micost = INF</span><br><span class="line">        miedge = <span class="number">-1</span></span><br><span class="line">        <span class="keyword">for</span> i in range(m):</span><br><span class="line">            <span class="keyword">if</span> closest[i] != <span class="number">-1</span>:</span><br><span class="line">                temp = G[e][i]</span><br><span class="line">                <span class="keyword">if</span> temp &lt; lowcost[i]:</span><br><span class="line">                    lowcost[i] = temp</span><br><span class="line">                    closest[i] = e</span><br><span class="line">                <span class="keyword">if</span> lowcost[i] &lt; micost:</span><br><span class="line">                    miedge=i</span><br><span class="line">                    micost = lowcost[miedge]</span><br><span class="line">        ans += micost</span><br><span class="line">        demo.append(micost)</span><br><span class="line">        e = miedge</span><br><span class="line">        closest[e] = <span class="number">-1</span></span><br><span class="line">        num += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line"></span><br><span class="line">print(prim())</span><br><span class="line"><span class="keyword">for</span> i in range(m - <span class="number">1</span>): print(demo[i], end=<span class="string">&#x27; &#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="kruskal-算法"><a href="#kruskal-算法" class="headerlink" title="kruskal 算法"></a>kruskal 算法</h3><p>对边进行贪心操作：“最短的边一定在 <code>MST</code> 上”。 从最短的边开始，把它加入到 <code>MST</code> 中；在剩下的边中找最短的边，加入到 <code>MST</code> 中；继续这个过程，直到所有点都在 <code>MST</code> 中。</p>
<p><code>kruskal</code> 算法的 2 个关键技术： （1）对边进行排序。 （2）判断圈，即处理连通性问题。这个问题用并查集简单而高效，并查集是 <code>kruskal</code> 算法的实现基础。</p>
<p>初始时最小生成树 <code>MST</code> 为空。开始的时候，每个点属于独立的集。</p>
<p>按边长从小到大进行边的遍历操作：</p>
<p>尝试将最小边加入最小生成树：</p>
<ul>
<li>如果边的两个端点属于同一个集合，就说明这两个点已经被加入最小生成树。则不能将边加入，否则就会生成一个环。</li>
<li>如果两个端点不属于同一个集合，就说明该点还未纳入最小生成树，此边可以加入。</li>
</ul>
<p>重复上述操作，直到加入 <code>n-1</code> 条边。</p>
<p><code>kruskal</code> 算法的复杂度包括两部分：对边的排序 <code>O(ElogE)</code>，并查集的操作 <code>O(E)</code>，一共是 <code>O(ElogE + E)</code>，约等于 <code>O(ElogE)</code>，时间主要花在排序上。</p>
<p>如果图的边很多，<code>kruskal</code> 的复杂度要差一些。<code>kruskal</code> 适用于稀疏图，<code>prim</code> 适合稠密图。</p>
<p><strong>模板如下：</strong></p>
<figure class="hljs highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="type">int</span> father[<span class="number">1100000</span>];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    <span class="type">int</span> y;</span><br><span class="line">    <span class="type">int</span> k;</span><br><span class="line">&#125; Q[<span class="number">1100000</span>];</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> x)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (father[x] == x)</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">return</span> father[x] = find(father[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">bool</span> <span class="title function_">cmp</span><span class="params">(node a, node b)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> a.k &lt; b.k;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> cont = <span class="number">0</span>,</span><br><span class="line">        sum = <span class="number">0</span>, st = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;Q[i].x, &amp;Q[i].y, &amp;Q[i].k);</span><br><span class="line">        cont += Q[i].k;</span><br><span class="line">    &#125;</span><br><span class="line">    sort(Q, Q + m, cmp);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        father[i] = i;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> tx = find(Q[i].x);</span><br><span class="line">        <span class="type">int</span> ty = find(Q[i].y);</span><br><span class="line">        <span class="keyword">if</span> (tx != ty)</span><br><span class="line">        &#123;</span><br><span class="line">            sum += Q[i].k;</span><br><span class="line">            st++;</span><br><span class="line">            father[tx] = ty;</span><br><span class="line">            <span class="keyword">if</span> (st == n - <span class="number">1</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, sum);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">import java.util.Arrays;</span><br><span class="line">import java.util.Scanner;</span><br><span class="line"></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">Main</span> &#123;</span></span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> n, m;</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span>[] father;</span><br><span class="line">    <span class="type">static</span> Node[] Q;</span><br><span class="line"></span><br><span class="line">    <span class="type">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">        <span class="type">int</span> x;</span><br><span class="line">        <span class="type">int</span> y;</span><br><span class="line">        <span class="type">int</span> k;</span><br><span class="line"></span><br><span class="line">        public <span class="title function_">Node</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">            this.x = x;</span><br><span class="line">            this.y = y;</span><br><span class="line">            this.k = k;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public <span class="type">static</span> <span class="type">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Scanner scanner = new Scanner(System.in);</span><br><span class="line">        n = scanner.nextInt();</span><br><span class="line">        m = scanner.nextInt();</span><br><span class="line"></span><br><span class="line">        father = new <span class="type">int</span>[n + <span class="number">1</span>];</span><br><span class="line">        Q = new Node[m];</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> cont = <span class="number">0</span>, sum = <span class="number">0</span>, st = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="type">int</span> x = scanner.nextInt();</span><br><span class="line">            <span class="type">int</span> y = scanner.nextInt();</span><br><span class="line">            <span class="type">int</span> k = scanner.nextInt();</span><br><span class="line">            Q[i] = new Node(x, y, k);</span><br><span class="line">            cont += k;</span><br><span class="line">        &#125;</span><br><span class="line">        Arrays.sort(Q, (a, b) -&gt; a.k - b.k);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            father[i] = i;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="type">int</span> tx = find(Q[i].x);</span><br><span class="line">            <span class="type">int</span> ty = find(Q[i].y);</span><br><span class="line">            <span class="keyword">if</span> (tx != ty) &#123;</span><br><span class="line">                sum += Q[i].k;</span><br><span class="line">                st++;</span><br><span class="line">                father[tx] = ty;</span><br><span class="line">                <span class="keyword">if</span> (st == n - <span class="number">1</span>)</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(sum);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (father[x] == x)</span><br><span class="line">            <span class="keyword">return</span> x;</span><br><span class="line">        <span class="keyword">return</span> father[x] = find(father[x]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">n, m = <span class="built_in">map</span>(<span class="type">int</span>, input().split())</span><br><span class="line"></span><br><span class="line">father = [i <span class="keyword">for</span> i in range(n+<span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line">Q = []</span><br><span class="line"></span><br><span class="line">cont = <span class="number">0</span></span><br><span class="line">sum = <span class="number">0</span></span><br><span class="line">st = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i in range(m):</span><br><span class="line">    x, y, k = <span class="built_in">map</span>(<span class="type">int</span>, input().split())</span><br><span class="line">    Q.append(&#123;<span class="string">&#x27;x&#x27;</span>: x, <span class="string">&#x27;y&#x27;</span>: y, <span class="string">&#x27;k&#x27;</span>: k&#125;)</span><br><span class="line">    cont += k</span><br><span class="line"></span><br><span class="line">Q.sort(key=lambda x:x[<span class="string">&#x27;k&#x27;</span>])</span><br><span class="line"></span><br><span class="line">def find(x):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> father[x] == x :</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    father[x] = find(father[x])</span><br><span class="line">    <span class="keyword">return</span> father[x]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i in range(m):</span><br><span class="line">    tx = find(Q[i][<span class="string">&#x27;x&#x27;</span>])</span><br><span class="line">    ty = find(Q[i][<span class="string">&#x27;y&#x27;</span>])</span><br><span class="line">    <span class="keyword">if</span> tx != ty:</span><br><span class="line">        sum += Q[i][<span class="string">&#x27;k&#x27;</span>]</span><br><span class="line">        st += <span class="number">1</span></span><br><span class="line">        father[tx] = ty</span><br><span class="line">        <span class="keyword">if</span> st == n - <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">print(sum)</span><br></pre></td></tr></table></figure>

<hr>
<p>show: step version: 1.0 enable_checker: true</p>
<hr>
<h1 id="图论例题"><a href="#图论例题" class="headerlink" title="图论例题"></a>图论例题</h1><h2 id="蓝桥王国-lanqiaoOJ-题号-1122"><a href="#蓝桥王国-lanqiaoOJ-题号-1122" class="headerlink" title="蓝桥王国 lanqiaoOJ 题号 1122"></a>蓝桥王国 lanqiaoOJ 题号 1122</h2><p><strong>题目描述</strong></p>
<p>蓝桥王国一共有 (N) 个建筑和 (M) 条单向道路，每条道路都连接着两个建筑，每个建筑都有自己编号，分别为 (1 \sim N)。（其中皇宫的编号为 1）国王想让小明回答从皇宫到每个建筑的最短路径是多少，但紧张的小明此时已经无法思考，请你编写程序帮助小明回答国王的考核。</p>
<p><strong>输入描述</strong></p>
<p>输入第一行包含 2 个正整数 (N,M)。第 2 到 (M+1) 行每行包含三个正整数 (u,v,w)，表示 (u \to v) 之间存在一条距离为 (w) 的路。(1 \leq N \leq 3 \times 10^5)，(1 \leq M \leq 10^6)，(1 \leq u_i , v_i \leq N)，(0 \leq w_i \leq 10^9)。</p>
<p><strong>输出描述</strong></p>
<p>输出仅一行，共 (N) 个数，分别表示从皇宫到编号为 (1 \sim N) 建筑的最短距离，两两之间用空格隔开。（如果无法到达则输出 −1）</p>
<p><strong>解题思路:</strong></p>
<p>本题为单源最短路的模板题，直接套模板即可，本题我们采用 Dijkstra。</p>
<p>C++ 语言描述:</p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">long</span> <span class="type">long</span> INF = <span class="number">0x3f3f3f3f3f3f3f3f</span>LL;</span><br><span class="line"><span class="comment">//这样定义INF的好处是: INF &lt;= INF+x</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N= <span class="number">3e5</span>+<span class="number">2</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span>&#123;</span><br><span class="line">    <span class="type">int</span> from, to; <span class="type">long</span> <span class="type">long</span> w; <span class="comment">//起点，终点，权值。起点from并没有用到，e[i]的i就是from</span></span><br><span class="line">    <span class="built_in">edge</span>(<span class="type">int</span> a, <span class="type">int</span> b,<span class="type">long</span> <span class="type">long</span> c)&#123;from=a; to=b; w=c;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;edge&gt;e[N];          <span class="comment">//用于存储图</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">s_node</span>&#123;</span><br><span class="line">    <span class="type">int</span> id; <span class="type">long</span> <span class="type">long</span> n_dis;   <span class="comment">//id：结点；n_dis：这个结点到起点的距离</span></span><br><span class="line">    <span class="built_in">s_node</span>(<span class="type">int</span> b,<span class="type">long</span> <span class="type">long</span> c)&#123;id=b; n_dis=c;&#125;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span> &lt; (<span class="type">const</span> s_node &amp; a) <span class="type">const</span></span><br><span class="line">    &#123; <span class="keyword">return</span> n_dis &gt; a.n_dis;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="type">int</span> pre[N];                                <span class="comment">//记录前驱结点，用于生成路径</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print_path</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t)</span> </span>&#123;            <span class="comment">//打印从s到t的最短路</span></span><br><span class="line">    <span class="keyword">if</span>(s==t)&#123; <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, s); <span class="keyword">return</span>; &#125;  <span class="comment">//打印起点</span></span><br><span class="line">    <span class="built_in">print_path</span>(s, pre[t]);                 <span class="comment">//先打印前一个点</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, t);                      <span class="comment">//后打印当前点。最后打印的是终点t</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">long</span> <span class="type">long</span>  dis[N];         <span class="comment">//记录所有结点到起点的距离</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dijkstra</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> s = <span class="number">1</span>;             <span class="comment">//起点s是1</span></span><br><span class="line">    <span class="type">bool</span> done[N]; <span class="comment">//done[i]=true表示到结点i的最短路径已经找到</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;dis[i]=INF; done[i]=<span class="literal">false</span>; &#125;    <span class="comment">//初始化</span></span><br><span class="line">    dis[s]=<span class="number">0</span>;                           <span class="comment">//起点到自己的距离是0</span></span><br><span class="line">    priority_queue &lt;s_node&gt; Q;          <span class="comment">//优先队列，存结点信息</span></span><br><span class="line">    Q.<span class="built_in">push</span>(<span class="built_in">s_node</span>(s, dis[s]));          <span class="comment">//起点进队列</span></span><br><span class="line">    <span class="keyword">while</span> (!Q.<span class="built_in">empty</span>())   &#123;</span><br><span class="line">        s_node u = Q.<span class="built_in">top</span>();             <span class="comment">//pop出距起点s距离最小的结点u</span></span><br><span class="line">        Q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">if</span>(done[u.id])  <span class="keyword">continue</span>;       <span class="comment">//丢弃已经找到最短路径的结点。即集合A中的结点</span></span><br><span class="line">        done[u.id]= <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;e[u.id].<span class="built_in">size</span>(); i++) &#123;  <span class="comment">//检查结点u的所有邻居</span></span><br><span class="line">            edge y = e[u.id][i];         <span class="comment">//u.id的第i个邻居是y.to</span></span><br><span class="line">            <span class="keyword">if</span>(done[y.to])  <span class="keyword">continue</span>;    <span class="comment">//丢弃已经找到最短路径的邻居结点</span></span><br><span class="line">            <span class="keyword">if</span> (dis[y.to] &gt; y.w + u.n_dis) &#123;</span><br><span class="line">                dis[y.to] = y.w + u.n_dis;</span><br><span class="line">                Q.<span class="built_in">push</span>(<span class="built_in">s_node</span>(y.to, dis[y.to]));  <span class="comment">//扩展新的邻居，放到优先队列中</span></span><br><span class="line">                pre[y.to]=u.id;  <span class="comment">//如果有需要，记录路径</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// print_path(s,n);          //如果有需要，打印路径: 起点1，终点n</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)    e[i].<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">while</span> (m--) &#123;</span><br><span class="line">        <span class="type">int</span> u,v,w;  <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%lld&quot;</span>,&amp;u,&amp;v,&amp;w);</span><br><span class="line">        e[u].<span class="built_in">push_back</span>(<span class="built_in">edge</span>(u,v,w));</span><br><span class="line">     <span class="comment">// e[v].push_back(edge(v,u,w));    //本题是单向道路</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dijkstra</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(dis[i]&gt;=INF)  cout&lt;&lt;<span class="string">&quot;-1 &quot;</span>;</span><br><span class="line">        <span class="keyword">else</span>   <span class="built_in">printf</span>(<span class="string">&quot;%lld &quot;</span>, dis[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Python 语言描述:</p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"></span><br><span class="line">INF = <span class="number">0x3f3f3f3f3f3f3f3f</span></span><br><span class="line">N = <span class="number">300002</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Edge</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, fr, to, w</span>):</span><br><span class="line">        self.fr = fr</span><br><span class="line">        self.to = to</span><br><span class="line">        self.w = w</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SNode</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, <span class="built_in">id</span>, n_dis</span>):</span><br><span class="line">        self.<span class="built_in">id</span> = <span class="built_in">id</span></span><br><span class="line">        self.n_dis = n_dis</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__lt__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">return</span> self.n_dis &lt; other.n_dis</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">print_path</span>(<span class="params">s, t</span>):</span><br><span class="line">    <span class="keyword">if</span> s == t:</span><br><span class="line">        <span class="built_in">print</span>(s, end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    print_path(s, pre[t])</span><br><span class="line">    <span class="built_in">print</span>(t, end=<span class="string">&quot; &quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dijkstra</span>():</span><br><span class="line">    s = <span class="number">1</span></span><br><span class="line">    done = [<span class="literal">False</span>] * N</span><br><span class="line">   </span><br><span class="line"></span><br><span class="line"> dis = [INF] * N</span><br><span class="line">    pre = [-<span class="number">1</span>] * N</span><br><span class="line">    dis[s] = <span class="number">0</span></span><br><span class="line">    pq = []</span><br><span class="line">    heapq.heappush(pq, SNode(s, dis[s]))</span><br><span class="line">    <span class="keyword">while</span> pq:</span><br><span class="line">        u = heapq.heappop(pq)</span><br><span class="line">        <span class="keyword">if</span> done[u.<span class="built_in">id</span>]:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        done[u.<span class="built_in">id</span>] = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">for</span> y <span class="keyword">in</span> e[u.<span class="built_in">id</span>]:</span><br><span class="line">            <span class="keyword">if</span> done[y.to]:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">if</span> dis[y.to] &gt; y.w + u.n_dis:</span><br><span class="line">                dis[y.to] = y.w + u.n_dis</span><br><span class="line">                heapq.heappush(pq, SNode(y.to, dis[y.to]))</span><br><span class="line">                pre[y.to] = u.<span class="built_in">id</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n+<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> dis[i] &gt;= INF:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;-1&quot;</span>, end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(dis[i], end=<span class="string">&quot; &quot;</span>)</span><br><span class="line"></span><br><span class="line">n, m = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())</span><br><span class="line">e = [[] <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(N)]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(m):</span><br><span class="line">    u, v, w = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())</span><br><span class="line">    e[u].append(Edge(u, v, w))</span><br><span class="line"></span><br><span class="line">dijkstra()</span><br></pre></td></tr></table></figure>

<p>Java 语言描述:</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">INF</span> <span class="operator">=</span> <span class="number">0x3f3f3f3f3f3f3f3fL</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">N</span> <span class="operator">=</span> <span class="number">300005</span>;</span><br><span class="line">    <span class="keyword">static</span> ArrayList&lt;Edge&gt;[] e = <span class="keyword">new</span> <span class="title class_">ArrayList</span>[N];</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> n, m;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[] pre = <span class="keyword">new</span> <span class="title class_">int</span>[N];</span><br><span class="line">    <span class="keyword">static</span> <span class="type">long</span>[] dis = <span class="keyword">new</span> <span class="title class_">long</span>[N];</span><br><span class="line">    <span class="keyword">static</span> <span class="type">boolean</span>[] done = <span class="keyword">new</span> <span class="title class_">boolean</span>[N];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Edge</span> &#123;</span><br><span class="line">        <span class="type">int</span> from, to;</span><br><span class="line">        <span class="type">long</span> w;</span><br><span class="line"></span><br><span class="line">        Edge(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">long</span> c) &#123;</span><br><span class="line">            from = a;</span><br><span class="line">            to = b;</span><br><span class="line">            w = c;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">SNode</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;SNode&gt; &#123;</span><br><span class="line">        <span class="type">int</span> id;</span><br><span class="line">        <span class="type">long</span> n_dis;</span><br><span class="line"></span><br><span class="line">        SNode(<span class="type">int</span> b, <span class="type">long</span> c) &#123;</span><br><span class="line">            id = b;</span><br><span class="line">            n_dis = c;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(SNode o)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> Long.compare(n_dis, o.n_dis);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printPath</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (s == t) &#123;</span><br><span class="line">            System.out.print(s + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        printPath(s, pre[t]);</span><br><span class="line">        System.out.print(t + <span class="string">&quot; &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">dijkstra</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">s</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        PriorityQueue&lt;SNode&gt; Q = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;();</span><br><span class="line">        Arrays.fill(dis, INF);</span><br><span class="line">        dis[s] = <span class="number">0</span>;</span><br><span class="line">        Q.offer(<span class="keyword">new</span> <span class="title class_">SNode</span>(s, dis[s]));</span><br><span class="line">        <span class="keyword">while</span> (!Q.isEmpty()) &#123;</span><br><span class="line">            <span class="type">SNode</span> <span class="variable">u</span> <span class="operator">=</span> Q.poll();</span><br><span class="line">            <span class="keyword">if</span> (done[u.id])</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            done[u.id] = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">for</span> (Edge y : e[u.id]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (done[y.to])</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">if</span> (dis[y.to] &gt; y.w + u.n_dis) &#123;</span><br><span class="line">                    dis[y.to] = y.w + u.n_dis;</span><br><span class="line">                    Q.offer(<span class="keyword">new</span> <span class="title class_">SNode</span>(y.to, dis[y.to]));</span><br><span class="line">                    pre[y.to] = u.id;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// printPath(s, n);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(System.in));</span><br><span class="line">        <span class="type">StringTokenizer</span> <span class="variable">st</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringTokenizer</span>(br.readLine());</span><br><span class="line">        n = Integer.parseInt(st.nextToken());</span><br><span class="line">        m = Integer.parseInt(st.nextToken());</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            e[i] = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">            st = <span class="keyword">new</span> <span class="title class_">StringTokenizer</span>(br.readLine());</span><br><span class="line">            <span class="type">int</span> <span class="variable">u</span> <span class="operator">=</span> Integer.parseInt(st.nextToken());</span><br><span class="line">            <span class="type">int</span> <span class="variable">v</span> <span class="operator">=</span> Integer.parseInt(st.nextToken());</span><br><span class="line">            <span class="type">long</span> <span class="variable">w</span> <span class="operator">=</span> Long.parseLong(st.nextToken());</span><br><span class="line">            e[u].add(<span class="keyword">new</span> <span class="title class_">Edge</span>(u, v, w));</span><br><span class="line">            <span class="comment">// e[v].add(new Edge(v, u, w)); //本题是单向道路</span></span><br><span class="line">        &#125;</span><br><span class="line">        dijkstra();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (dis[i] &gt;= INF)</span><br><span class="line">                System.out.print(<span class="string">&quot;-1 &quot;</span>);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                System.out.print(dis[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="随机数据下的最短路问题-lanqiaoOJ-题号-1366"><a href="#随机数据下的最短路问题-lanqiaoOJ-题号-1366" class="headerlink" title="随机数据下的最短路问题 lanqiaoOJ 题号 1366"></a>随机数据下的最短路问题 lanqiaoOJ 题号 1366</h2><p><strong>题目描述</strong></p>
<p>给定 (N) 个点和 (M) 条单向道路，每条道路都连接着两个点，每个点都有自己编号，分别为 (1 \sim N)。问你从 (S) 点出发，到达每个点的最短路径为多少。</p>
<p><strong>输入描述</strong></p>
<p>输入第一行包含三个正整数 (N,M,S)。第 2 到 (M+1) 行每行包含三个正整数 (u,v,w)，表示 (u \to v) 之间存在一条距离为 (w) 的路。(1 \leq N \leq 5 \times 10^3)，(1 \leq M \leq 5 \times 10^4)，(1 \leq u_i, v_i \leq N)，(0 \leq w_i \leq 10^9)。</p>
<p><strong>输出描述</strong></p>
<p>输出仅一行，共 (N) 个数，分别表示从编号 (S) 到编号为 (1 \sim N) 点的最短距离，两两之间用空格隔开。（如果无法到达则输出 −1）</p>
<p><strong>解题思路:</strong></p>
<p>本题为单源最短路的模板题，直接套模板即可，本题我们采用 SPFA。</p>
<p>C++ 语言描述:</p>
<figure class="hljs highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">long</span> <span class="type">long</span> INF = <span class="number">0x3f3f3f3f3f3f3f3f</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">5e3</span>+<span class="number">10</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span>&#123;</span><br><span class="line">    <span class="type">int</span> to;    <span class="type">long</span> <span class="type">long</span> w;</span><br><span class="line">    <span class="built_in">edge</span>(<span class="type">int</span> tt,<span class="type">long</span> <span class="type">long</span> ww) &#123;to = tt; w = ww;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> dist[N];</span><br><span class="line"><span class="type">int</span> inq[N];</span><br><span class="line">vector&lt;edge&gt; e[N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">spfa</span><span class="params">(<span class="type">int</span> s)</span></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dist,<span class="number">0x3f</span>,<span class="built_in">sizeof</span>(dist));</span><br><span class="line">    dist[s] = <span class="number">0</span>;      <span class="comment">//起点到自己的距离是0</span></span><br><span class="line">    queue&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">    q.<span class="built_in">push</span>(s);        <span class="comment">//从s开始，s进队列</span></span><br><span class="line">    inq[s] = <span class="number">1</span>;       <span class="comment">//起点在队列中</span></span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="type">int</span> u = q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        inq[u] = <span class="number">0</span>;   <span class="comment">//u已经不在队列中</span></span><br><span class="line">        <span class="keyword">if</span>(dist[u] == INF)     <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; e[u].<span class="built_in">size</span>();i++) &#123;   <span class="comment">//遍历u的邻居</span></span><br><span class="line">            <span class="type">int</span> v = e[u][i].to;</span><br><span class="line">            <span class="type">long</span> <span class="type">long</span> w = e[u][i].w;</span><br><span class="line">            <span class="keyword">if</span>(dist[v] &gt; dist[u]+w) &#123;         <span class="comment">//u的第i个邻居v，它借道u，到s更近</span></span><br><span class="line">                dist[v] = dist[u]+w;          <span class="comment">//更新邻居v到s的距离</span></span><br><span class="line">                <span class="keyword">if</span>(!inq[v]) &#123;      <span class="comment">//邻居v更新状态了，但v不在队列中，放进队列</span></span><br><span class="line">                    q.<span class="built_in">push</span>(v);</span><br><span class="line">                    inq[v] = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> n,m,s;cin&gt;&gt;n&gt;&gt;m&gt;&gt;s;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>;i &lt;= m;i++)    &#123;</span><br><span class="line">        <span class="type">int</span> u,v; <span class="type">long</span> <span class="type">long</span> w;</span><br><span class="line">        cin&gt;&gt;u&gt;&gt;v&gt;&gt;w;</span><br><span class="line">        e[u].<span class="built_in">push_back</span>(<span class="built_in">edge</span>(v,w));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">spfa</span>(s);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>;i &lt;= n;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(dist[i]==INF)  cout &lt;&lt; <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">else</span>              cout &lt;&lt; dist[i];</span><br><span class="line">        <span class="keyword">if</span>(i != n)        cout &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        <span class="keyword">else</span>              cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Python 语言描述:</p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"></span><br><span class="line">INF = <span class="number">0x3f3f3f3f3f3f3f3f</span></span><br><span class="line">N = <span class="number">5010</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Edge</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, to, w</span>):</span><br><span class="line">        self.to = to</span><br><span class="line">        self.w = w</span><br><span class="line"></span><br><span class="line">dist = [INF] * N</span><br><span class="line">inq = [<span class="number">0</span>] * N</span><br><span class="line">e = [[] <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(N)]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">spfa</span>(<span class="params">s</span>):</span><br><span class="line">    <span class="keyword">global</span> dist</span><br><span class="line">    <span class="keyword">global</span> inq</span><br><span class="line">    dist = [INF] * N</span><br><span class="line">    dist[s] = <span class="number">0</span></span><br><span class="line">    q = []</span><br><span class="line">    heapq.heappush(q, s)</span><br><span class="line">    inq[s] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> q:</span><br><span class="line">        u = heapq.heappop(q)</span><br><span class="line">        inq[u] = <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> dist[u] == INF:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(e[u])):</span><br><span class="line">            v = e[u][i].to</span><br><span class="line">            w = e[u][i].w</span><br><span class="line">            <span class="keyword">if</span> dist[v] &gt; dist[u] + w:</span><br><span class="line">                dist[v] = dist[u] + w</span><br><span class="line">                <span class="keyword">if</span> inq[v] == <span class="number">0</span>:</span><br><span class="line">                    heapq.heappush(q, v)</span><br><span class="line">                    inq[v] = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">n, m, s = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(m):</span><br><span class="line">    u, v, w = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())</span><br><span class="line">    e[u].append(Edge(v, w))</span><br><span class="line">spfa(s)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n+<span class="number">1</span>):</span><br><span class="line">    <span class="keyword">if</span> dist[i] == INF:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;-1&quot;</span>, end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(dist[i], end=<span class="string">&quot; &quot;</span>)</span><br></pre></td></tr></table></figure>

<p>Java 语言描述:</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">INF</span> <span class="operator">=</span> <span class="number">0x3f3f3f3f3f3f3f3fL</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">N</span> <span class="operator">=</span> <span class="number">5010</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">long</span>[] dist = <span class="keyword">new</span> <span class="title class_">long</span>[N];</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[] inq = <span class="keyword">new</span> <span class="title class_">int</span>[N];</span><br><span class="line">    <span class="keyword">static</span> List&lt;edge&gt;[] e = <span class="keyword">new</span> <span class="title class_">ArrayList</span>[N];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">edge</span> &#123;</span><br><span class="line">        <span class="type">int</span> to;</span><br><span class="line">        <span class="type">long</span> w;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">edge</span><span class="params">(<span class="type">int</span> tt, <span class="type">long</span> ww)</span> &#123;</span><br><span class="line">            to = tt;</span><br><span class="line">            w = ww;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">spfa</span><span class="params">(<span class="type">int</span> s)</span> &#123;</span><br><span class="line">        Arrays.fill(dist, INF);</span><br><span class="line">        dist[s] = <span class="number">0</span>;</span><br><span class="line">        Queue&lt;Integer&gt; q = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        q.add(s);</span><br><span class="line">        inq[s] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (!q.isEmpty()) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">u</span> <span class="operator">=</span> q.poll();</span><br><span class="line">            inq[u] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span> (dist[u] == INF) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; e[u].size(); i++) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">v</span> <span class="operator">=</span> e[u].get(i).to;</span><br><span class="line">                <span class="type">long</span> <span class="variable">w</span> <span class="operator">=</span> e[u].get(i).w;</span><br><span class="line">                <span class="keyword">if</span> (dist[v] &gt; dist[u] + w) &#123;</span><br><span class="line">                    dist[v] = dist[u] + w;</span><br><span class="line">                    <span class="keyword">if</span> (inq[v] == <span class="number">0</span>) &#123;</span><br><span class="line">                        q.add(v);</span><br><span class="line">                        inq[v] = <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> in.nextInt();</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> in.nextInt();</span><br><span class="line">        <span class="type">int</span> <span class="variable">s</span> <span class="operator">=</span> in.nextInt();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            e[i] = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">u</span> <span class="operator">=</span> in.nextInt();</span><br><span class="line">            <span class="type">int</span> <span class="variable">v</span> <span class="operator">=</span> in.nextInt();</span><br><span class="line">            <span class="type">long</span> <span class="variable">w</span> <span class="operator">=</span> in.nextLong();</span><br><span class="line">            e[u].add(<span class="keyword">new</span> <span class="title class_">edge</span>(v, w));</span><br><span class="line">        &#125;</span><br><span class="line">        spfa(s);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (dist[i] == INF) System.out.print(<span class="string">&quot;-1 &quot;</span>);</span><br><span class="line">            <span class="keyword">else</span> System.out.print(dist[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="路径-OJ-编号-1460"><a href="#路径-OJ-编号-1460" class="headerlink" title="路径 OJ 编号 1460"></a>路径 OJ 编号 1460</h2><p><img src="/./../imgs/%E5%9B%BE%E8%AE%BA%E5%85%A5%E9%97%A8/e77a71de068da604d1245d5231201326-0.png" alt="图片描述"></p>
<p><strong>解题思路:</strong></p>
<p>填空题对时间没有要求，用最简单的 floyd</p>
<p>C++ 语言描述:</p>
<figure class="hljs highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">3000</span>;</span><br><span class="line"><span class="type">const</span> ll INF = <span class="number">1e18</span>;</span><br><span class="line">ll mp[N][N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">floyd</span><span class="params">(<span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">1</span>;k &lt;= n;k++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>;i &lt;= n;i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>;j &lt;= n;j++)</span><br><span class="line">                mp[i][j] = <span class="built_in">min</span>(mp[i][j], mp[i][k] + mp[k][j]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> n = <span class="number">2021</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>;i &lt;= n;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>;j &lt;= n;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i == j) mp[i][j] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">abs</span>(i - j)&lt;=<span class="number">21</span>) mp[i][j]=mp[j][i]=i*j/__gcd(i, j);</span><br><span class="line">            <span class="keyword">else</span> mp[i][j] = mp[j][i] = INF;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">floyd</span>(n);</span><br><span class="line">    cout &lt;&lt; mp[<span class="number">1</span>][<span class="number">2021</span>];</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Python 语言描述:</p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">lcm</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">int</span>(a * b / math.gcd(a, b))</span><br><span class="line"></span><br><span class="line">n = <span class="number">2021</span></span><br><span class="line">g = [[<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n + <span class="number">2</span>)] <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n + <span class="number">2</span>)]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> i == j:</span><br><span class="line">            g[i][j] = g[j][i] = <span class="number">0</span></span><br><span class="line">        <span class="keyword">elif</span> <span class="built_in">abs</span>(i - j) &lt;= <span class="number">21</span>:</span><br><span class="line">            g[i][j] = g[j][i] = lcm(i, j)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            g[i][j] = <span class="number">1000000000</span></span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> g[i][j] &gt; g[i][k] + g[k][j]:</span><br><span class="line">                g[i][j] = g[i][k] + g[k][j]</span><br><span class="line"><span class="built_in">print</span>(g[<span class="number">1</span>][n])</span><br></pre></td></tr></table></figure>

<p>Java 语言描述:</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">2021</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">gcd</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> b == <span class="number">0</span> ? a : gcd(b, a % b);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">lcm</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a * b / gcd(a, b);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[][] floyd = <span class="keyword">new</span> <span class="title class_">int</span>[n][n];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i + <span class="number">1</span>; j &lt; n &amp;&amp; j &lt; i + <span class="number">22</span>; j++)</span><br><span class="line">                floyd[i][j] = floyd[j][i] = lcm(i + <span class="number">1</span>, j + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; n; k++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">                    <span class="keyword">if</span> (floyd[i][k] != <span class="number">0</span> &amp;&amp; floyd[k][j] != <span class="number">0</span> &amp;&amp; (floyd[i][j] == <span class="number">0</span> || floyd[i][k] + floyd[k][j] &lt; floyd[i][j]))</span><br><span class="line">                        floyd[i][j] = floyd[i][k] + floyd[k][j];</span><br><span class="line">        System.out.println(floyd[<span class="number">0</span>][n - <span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="出差"><a href="#出差" class="headerlink" title="出差"></a>出差</h2><p><img src="/./../imgs/%E5%9B%BE%E8%AE%BA%E5%85%A5%E9%97%A8/6fab239959de9ee1ffb4d57d7654fabf-0.png" alt="图片描述"></p>
<p><strong>解题思路:</strong></p>
<p><img src="/./../imgs/%E5%9B%BE%E8%AE%BA%E5%85%A5%E9%97%A8/a28b434cf3a3579931db1586e3d0d710-0.png" alt="图片描述"></p>
<p>我们这里给大家一个朴素的 dijkstra 的模板，大家感受一下，优先队列到底优化的那一部分。</p>
<p>C++ 语言描述:</p>
<figure class="hljs highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1010</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//邻接矩阵</span></span><br><span class="line"><span class="type">int</span> gra[N][N];</span><br><span class="line"><span class="type">int</span> dist[N];</span><br><span class="line"><span class="type">int</span> g[N];</span><br><span class="line"><span class="type">bool</span> st[N];</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="comment">//朴素版dijkstra</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">dijkstra</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">     <span class="built_in">memset</span>(dist, <span class="number">0x3f</span>, <span class="keyword">sizeof</span> dist);</span><br><span class="line">    dist[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i ++ )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> t = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j ++ )</span><br><span class="line">            <span class="keyword">if</span> (!st[j] &amp;&amp; (t == <span class="number">-1</span> || dist[t] &gt; dist[j]))</span><br><span class="line">                t = j;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j ++ )</span><br><span class="line">            dist[j] = <span class="built_in">min</span>(dist[j], dist[t] + gra[t][j]);</span><br><span class="line">        st[t] = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dist[n];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;++i) cin&gt;&gt;g[i];</span><br><span class="line">    g[n]=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(gra, <span class="number">0x3f</span>, <span class="keyword">sizeof</span> gra);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line">        <span class="type">int</span> u,v,c;</span><br><span class="line">        cin&gt;&gt;u&gt;&gt;v&gt;&gt;c;</span><br><span class="line">        gra[u][v]=g[v]+c;</span><br><span class="line">        gra[v][u]=g[u]+c;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;<span class="built_in">dijkstra</span>()&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Python 语言描述:</p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span></span><br><span class="line"></span><br><span class="line">n, m = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 邻接矩阵</span></span><br><span class="line">gra = [[<span class="built_in">float</span>(<span class="string">&#x27;inf&#x27;</span>)] * (n+<span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n+<span class="number">1</span>)]</span><br><span class="line">dist = [<span class="built_in">float</span>(<span class="string">&#x27;inf&#x27;</span>)] * (n+<span class="number">1</span>)</span><br><span class="line">g = [<span class="number">0</span>] + <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split()))</span><br><span class="line">g[n] = <span class="number">0</span></span><br><span class="line">st = [<span class="literal">False</span>] * (n+<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 朴素版 Dijkstra</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dijkstra</span>() -&gt; <span class="built_in">int</span>:</span><br><span class="line">    dist[<span class="number">1</span>] = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n - <span class="number">1</span>):</span><br><span class="line">        t = -<span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> st[j] <span class="keyword">and</span> (t == -<span class="number">1</span> <span class="keyword">or</span> dist[t] &gt; dist[j]):</span><br><span class="line">                t = j</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">            dist[j] = <span class="built_in">min</span>(dist[j], dist[t] + gra[t][j])</span><br><span class="line">        st[t] = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">return</span> dist[n]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(m):</span><br><span class="line">    u, v, c = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())</span><br><span class="line">    gra[u][v] = g[v] + c</span><br><span class="line">    gra[v][u] = g[u] + c</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(dijkstra())</span><br></pre></td></tr></table></figure>

<p>Java 语言描述:</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="variable">N</span> <span class="operator">=</span> <span class="number">1010</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[][] gra = <span class="keyword">new</span> <span class="title class_">int</span>[N][N];</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[] dist = <span class="keyword">new</span> <span class="title class_">int</span>[N];</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[] g = <span class="keyword">new</span> <span class="title class_">int</span>[N];</span><br><span class="line">    <span class="keyword">static</span> <span class="type">boolean</span>[] st = <span class="keyword">new</span> <span class="title class_">boolean</span>[N];</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> n, m;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scan</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        n = scan.nextInt();</span><br><span class="line">        m = scan.nextInt();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            g[i] = scan.nextInt();</span><br><span class="line">        &#125;</span><br><span class="line">        g[n] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i &lt; N ; i ++) Arrays.fill(gra[i], <span class="number">0x3f3f3f</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">u</span> <span class="operator">=</span> scan.nextInt(), v = scan.nextInt(), c = scan.nextInt();</span><br><span class="line">            gra[u][v] = g[v] + c;</span><br><span class="line">            gra[v][u] = g[u] + c;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(dijkstra());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">dijkstra</span><span class="params">()</span> &#123;</span><br><span class="line">        Arrays.fill(dist, <span class="number">10000000</span>);</span><br><span class="line">        dist[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(!st[j] &amp;&amp; (t == -<span class="number">1</span> || dist[t] &gt; dist[j])) &#123;</span><br><span class="line">                    t = j;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(t == -<span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">                dist[j] = Math.min(dist[j], dist[t] + gra[t][j]);</span><br><span class="line">            &#125;</span><br><span class="line">            st[t] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dist[n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="聪明的猴子"><a href="#聪明的猴子" class="headerlink" title="聪明的猴子"></a>聪明的猴子</h2><p><img src="/./../imgs/%E5%9B%BE%E8%AE%BA%E5%85%A5%E9%97%A8/ceeb52dc7e8b316134f2c9c7b74b1c11-0.png" alt="图片描述"></p>
<hr>
<p><strong>解题思路:</strong></p>
<p><img src="/./../imgs/%E5%9B%BE%E8%AE%BA%E5%85%A5%E9%97%A8/f77dcab941517e1b3648b7cb3c2fa740-0.png" alt="图片描述"></p>
<p>C++ 语言描述:</p>
<figure class="hljs highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> a[<span class="number">5005</span>], x[<span class="number">5005</span>], y[<span class="number">5005</span>], f[<span class="number">5005</span>];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Edge</span>&#123;</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    <span class="type">int</span> y;</span><br><span class="line">    <span class="type">double</span> w;</span><br><span class="line">&#125;edge[<span class="number">1000005</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == f[x])</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    f[x] = <span class="built_in">find</span>(f[x]);</span><br><span class="line">    <span class="keyword">return</span> f[x];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">cmp</span><span class="params">(Edge a, Edge b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a.w &lt; b.w;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">merge</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> xx = <span class="built_in">find</span>(x);</span><br><span class="line">    <span class="type">int</span> yy = <span class="built_in">find</span>(y);</span><br><span class="line">    <span class="keyword">if</span> (xx != yy)</span><br><span class="line">        f[yy] = xx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> n, m;</span><br><span class="line">    cin &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        cin &gt;&gt; x[i] &gt;&gt; y[i];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        f[i] = i;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = i + <span class="number">1</span>; j &lt;= n; j++)&#123;</span><br><span class="line">            <span class="type">double</span> w = <span class="built_in">sqrt</span>((x[i] - x[j])*(x[i] - x[j]) + (y[i] - y[j])*(y[i] - y[j]));</span><br><span class="line">            edge[++cnt] = &#123;i, j, w&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(edge + <span class="number">1</span>, edge + cnt + <span class="number">1</span>, cmp);</span><br><span class="line">    <span class="type">int</span> num = <span class="number">0</span>;</span><br><span class="line">    <span class="type">double</span> max = <span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= cnt; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">find</span>(edge[i].x)!=<span class="built_in">find</span>(edge[i].y))&#123;</span><br><span class="line">            <span class="built_in">merge</span>(edge[i].x, edge[i].y);</span><br><span class="line">            num++;</span><br><span class="line">            max = max&gt;=edge[i].w?max:edge[i].w;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (num == n - <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">        <span class="keyword">if</span> (a[i] &gt;= max)</span><br><span class="line">            ans++;</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Python 语言描述:</p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Edge</span>:</span><br><span class="line">    x = <span class="number">0</span></span><br><span class="line">    y = <span class="number">0</span></span><br><span class="line">    w = <span class="number">0.0</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, x, y, w</span>):</span><br><span class="line">        self.x = x</span><br><span class="line">        self.y = y</span><br><span class="line">        self.w = w</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">if</span> f[x]==x:</span><br><span class="line">        <span class="keyword">return</span> f[x]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        f[x] = find(f[x])</span><br><span class="line">        <span class="keyword">return</span> f[x]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">merge</span>(<span class="params">x,y</span>):</span><br><span class="line">    xx = find(x)</span><br><span class="line">    yy = find(y)</span><br><span class="line">    <span class="keyword">if</span> xx!=yy:</span><br><span class="line">        f[yy] = xx</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    m = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">    a = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split()))</span><br><span class="line">    n = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">    x = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n + <span class="number">2</span>)]</span><br><span class="line">    y = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n + <span class="number">2</span>)]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        b = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split()))</span><br><span class="line">        x[i + <span class="number">1</span>] = b[<span class="number">0</span>]</span><br><span class="line">        y[i + <span class="number">1</span>] = b[<span class="number">1</span>]</span><br><span class="line">    edge_list = []</span><br><span class="line">    maxvalue = <span class="number">0</span></span><br><span class="line">    num = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i + <span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">            w = math.sqrt((x[i] - x[j]) * (x[i] - x[j]) + (y[i] - y[j]) * (y[i] - y[j]))</span><br><span class="line">            edge =  Edge(i, j, w)</span><br><span class="line">            edge_list.append(edge)</span><br><span class="line"></span><br><span class="line">    edge_list.sort(key=<span class="keyword">lambda</span> x: x.w)</span><br><span class="line">    f = [i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n + <span class="number">1</span>)]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> edge_list:</span><br><span class="line">        <span class="keyword">if</span> find(i.x)!=find(i.y):</span><br><span class="line">            merge(i.x,i.y)</span><br><span class="line">            maxvalue = <span class="built_in">max</span>(maxvalue,i.w)</span><br><span class="line">            num+=<span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> num==n-<span class="number">1</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">    ans = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(m):</span><br><span class="line">        <span class="keyword">if</span> a[i]&gt;=maxvalue:</span><br><span class="line">            ans+=<span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(ans)</span><br></pre></td></tr></table></figure>

<p>Java 语言描述:</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStreamWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> n;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[] a;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> m;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[] x;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[] y;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">double</span> max;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[] f;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">BufferedReader</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(System.in));</span><br><span class="line">    <span class="keyword">static</span> <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintWriter</span>(<span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(System.out));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        m = Integer.parseInt(in.readLine().trim());</span><br><span class="line">        a = <span class="keyword">new</span> <span class="title class_">int</span>[m];</span><br><span class="line">        String[] s = in.readLine().trim().split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++)</span><br><span class="line">            a[i] = Integer.parseInt(s[i]);</span><br><span class="line">        n = Integer.parseInt(in.readLine().trim());</span><br><span class="line">        x = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        y = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</span><br><span class="line">            s = in.readLine().trim().split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">            x[i] = Integer.parseInt(s[<span class="number">0</span>]);</span><br><span class="line">            y[i] = Integer.parseInt(s[<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        ArrayList&lt;Edge&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n-<span class="number">1</span>;i++) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=i+<span class="number">1</span>;j&lt;n;j++) &#123;</span><br><span class="line">                <span class="type">double</span> <span class="variable">l</span> <span class="operator">=</span> Math.sqrt((x[i]-x[j])*(x[i]-x[j])+(y[i]-y[j])*(y[i]-y[j]));</span><br><span class="line">                <span class="type">Edge</span> <span class="variable">edge</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Edge</span>(i, j, l);</span><br><span class="line">                list.add(edge);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        Collections.sort(list);</span><br><span class="line">        f = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">            f[i] = i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;list.size();i++) &#123;</span><br><span class="line">            <span class="type">Edge</span> <span class="variable">e</span> <span class="operator">=</span> list.get(i);</span><br><span class="line">            <span class="keyword">if</span>(find(e.x)!=find(e.y)) &#123;</span><br><span class="line">                merge(e.x,e.y);</span><br><span class="line">                max = Math.max(max, e.w);</span><br><span class="line">                num++;</span><br><span class="line">                <span class="keyword">if</span>(num==n-<span class="number">1</span>)</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++)</span><br><span class="line">            <span class="keyword">if</span>(a[i]&gt;=max)</span><br><span class="line">                ans++;</span><br><span class="line">        System.out.println(ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(f[x] == x)</span><br><span class="line">            <span class="keyword">return</span> f[x];</span><br><span class="line">        f[x] = find(f[x]);</span><br><span class="line">        <span class="keyword">return</span> f[x];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">xx</span> <span class="operator">=</span> find(x);</span><br><span class="line">        <span class="type">int</span> <span class="variable">yy</span> <span class="operator">=</span> find(y);</span><br><span class="line">        <span class="keyword">if</span>(xx!=yy)</span><br><span class="line">            f[yy] = xx;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Edge</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;Edge&gt;&#123;</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    <span class="type">int</span> y;</span><br><span class="line">    <span class="type">double</span> w;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Edge</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">double</span> w)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.x = x;</span><br><span class="line">        <span class="built_in">this</span>.y = y;</span><br><span class="line">        <span class="built_in">this</span>.w = w;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Edge o)</span> &#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.w&gt;o.w?<span class="number">1</span>:-<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="通电"><a href="#通电" class="headerlink" title="通电"></a>通电</h2><p><img src="/./../imgs/%E5%9B%BE%E8%AE%BA%E5%85%A5%E9%97%A8/e0bde279d708165b220cfdf8848e1467-0.png" alt="图片描述"></p>
<p><strong>解题思路:</strong></p>
<p>给了你 <code>n</code> 个节点，又给了你 <code>n</code> 个基点之间相互连接需要多少钱，现在要 <code>n</code> 个村庄都通电，只需要保证 <code>n</code> 个节点构成连通子图即可。</p>
<p>最小的连通子图是树，也就是构造一棵树，那么在图上构造一棵最最少花费的树的问题即为最小生成树。</p>
<p>C++ 语言描述:</p>
<figure class="hljs highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MAXN = <span class="number">1005</span>;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; demo;</span><br><span class="line"><span class="type">double</span> closest[MAXN], lowcost[MAXN];</span><br><span class="line"><span class="type">int</span> m, n;             <span class="comment">// m为节点的个数，n为边的数量</span></span><br><span class="line"><span class="type">double</span> G[MAXN][MAXN]; <span class="comment">// 邻接矩阵</span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">prim</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        lowcost[i] = INF;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        closest[i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    closest[<span class="number">0</span>] = <span class="number">-1</span>;             <span class="comment">// 加入第一个点，-1表示该点在集合U中，否则在集合V中</span></span><br><span class="line">    <span class="type">int</span> num = <span class="number">0</span>,  e = <span class="number">0</span>; <span class="comment">// e为最新加入集合的点</span></span><br><span class="line">    <span class="type">double</span> ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (num &lt; m - <span class="number">1</span>)          <span class="comment">// 加入m-1条边</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> miedge = <span class="number">-1</span>;</span><br><span class="line">        <span class="type">double</span> micost = INF;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">            <span class="keyword">if</span> (closest[i] != <span class="number">-1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">double</span> temp = G[e][i];</span><br><span class="line">                <span class="keyword">if</span> (temp &lt; lowcost[i])</span><br><span class="line">                &#123;</span><br><span class="line">                    lowcost[i] = temp;</span><br><span class="line">                    closest[i] = e;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (lowcost[i] &lt; micost)</span><br><span class="line">                    micost = lowcost[miedge = i];</span><br><span class="line">            &#125;</span><br><span class="line">        ans += micost;</span><br><span class="line">        demo.<span class="built_in">push_back</span>(micost);</span><br><span class="line">        closest[e = miedge] = <span class="number">-1</span>;</span><br><span class="line">        num++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">double</span> x, y, h;</span><br><span class="line">&#125; dis[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">getDistance</span><span class="params">(node a, node b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sqrt</span>(<span class="built_in">pow</span>(a.x - b.x, <span class="number">2</span>) + <span class="built_in">pow</span>(a.y - b.y, <span class="number">2</span>)) + <span class="built_in">pow</span>(a.h - b.h, <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;m);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lf%lf%lf&quot;</span>, &amp;dis[i].x, &amp;dis[i].y, &amp;dis[i].h);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m - <span class="number">1</span>; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = i + <span class="number">1</span>; j &lt; m; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            G[i][j] = <span class="built_in">getDistance</span>(dis[i], dis[j]);</span><br><span class="line">            G[j][i] = G[i][j];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%.2lf&quot;</span>, <span class="built_in">prim</span>());</span><br><span class="line">    <span class="comment">// for (int i = 0; i &lt; m - 1; i++)</span></span><br><span class="line">    <span class="comment">//     cout &lt;&lt; demo[i] &lt;&lt; &quot; &quot;;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Python 语言描述:</p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">caculate</span>(<span class="params">x1,y1,h1,x2,y2,h2</span>):</span><br><span class="line">    <span class="keyword">return</span> math.sqrt( (x1-x2)**<span class="number">2</span>+(y1-y2)**<span class="number">2</span>)+(h1-h2)**<span class="number">2</span>\</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">if</span> x!=ufs[x]:</span><br><span class="line">        ufs[x]=find(ufs[x])</span><br><span class="line">    <span class="keyword">return</span> ufs[x]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">kruskal</span>():</span><br><span class="line">    <span class="keyword">global</span> ufs</span><br><span class="line">    ufs=<span class="built_in">list</span>(<span class="built_in">range</span>(n+<span class="number">1</span>))</span><br><span class="line">    my_brige.sort(key=<span class="keyword">lambda</span> x:x[<span class="number">2</span>])</span><br><span class="line">    ans=<span class="number">0</span></span><br><span class="line">    cnt=<span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> a,b,w <span class="keyword">in</span> my_brige:</span><br><span class="line">        x=find(a)</span><br><span class="line">        y=find(b)</span><br><span class="line">        <span class="keyword">if</span> x==y:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        cnt+=<span class="number">1</span></span><br><span class="line">        ans+=w</span><br><span class="line">        ufs[x]=y</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> cnt==n-<span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> ans</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">n=<span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">brige=[[] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n+<span class="number">1</span>)]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,n+<span class="number">1</span>):</span><br><span class="line">    x,y,h=<span class="built_in">map</span>(<span class="built_in">int</span>,<span class="built_in">input</span>().split())</span><br><span class="line">    brige[i]=(x,y,h)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">my_brige=[]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,n):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i+<span class="number">1</span>,n+<span class="number">1</span>):</span><br><span class="line">        x1,y1,h1=brige[i]</span><br><span class="line">        x2,y2,h2=brige[j]</span><br><span class="line">        w=caculate(x1,y1,h1,x2,y2,h2)</span><br><span class="line">        my_brige.append((i,j,w))</span><br><span class="line">ans=kruskal()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:.2f&#125;&quot;</span>.<span class="built_in">format</span>(ans))</span><br></pre></td></tr></table></figure>

<p>Java 语言描述:</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="variable">N</span> <span class="operator">=</span> <span class="number">1010</span>;</span><br><span class="line">    <span class="keyword">static</span> List&lt;Node&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[] x = <span class="keyword">new</span> <span class="title class_">int</span>[N], y = <span class="keyword">new</span> <span class="title class_">int</span>[N], z = <span class="keyword">new</span> <span class="title class_">int</span>[N];</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> n;</span><br><span class="line">    <span class="comment">//并查集数组</span></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[] q = <span class="keyword">new</span> <span class="title class_">int</span>[N];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        n = sc.nextInt();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            x[i] = sc.nextInt();</span><br><span class="line">            y[i] = sc.nextInt();</span><br><span class="line">            z[i] = sc.nextInt();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//建边  任意两个村庄都要建边</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i + <span class="number">1</span>; j &lt; n; j++) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> x[i] - x[j];</span><br><span class="line">                <span class="type">int</span> <span class="variable">r</span> <span class="operator">=</span> y[i] - y[j];</span><br><span class="line">                <span class="type">double</span> <span class="variable">c</span> <span class="operator">=</span> z[i] - z[j];</span><br><span class="line">                <span class="comment">// i 村庄 到  j 村庄的 距离</span></span><br><span class="line">                <span class="type">double</span> <span class="variable">s</span> <span class="operator">=</span> Math.sqrt(l * l + r * r) + c * c;</span><br><span class="line">                list.add(<span class="keyword">new</span> <span class="title class_">Node</span>(i, j, s));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 核心：按权值排序</span></span><br><span class="line">        list.sort(Comparator.comparingDouble(a -&gt; a.w));</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            q[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//记录权重之和，答案</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> list.get(i).a;</span><br><span class="line">            <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> list.get(i).b;</span><br><span class="line">            <span class="type">double</span> <span class="variable">w</span> <span class="operator">=</span> list.get(i).w;</span><br><span class="line">            a = find(a);</span><br><span class="line">            b = find(b);</span><br><span class="line">            <span class="keyword">if</span> (a != b) &#123;</span><br><span class="line">                q[a] = b;</span><br><span class="line">                res += w;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.printf(<span class="string">&quot;%.2f&quot;</span>, res);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (q[x] != x) q[x] = find(q[x]);</span><br><span class="line">        <span class="keyword">return</span> q[x];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        <span class="type">int</span> a, b;</span><br><span class="line">        <span class="type">double</span> w;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">double</span> w)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.a = a;</span><br><span class="line">            <span class="built_in">this</span>.b = b;</span><br><span class="line">            <span class="built_in">this</span>.w = w;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="机房"><a href="#机房" class="headerlink" title="机房"></a>机房</h2><p>这天, 小明在机房学习。</p>
<p>他发现机房里一共有 �<em>n</em> 台电脑, 编号为 1 到 �<em>n</em>, 电脑和电脑之间有网线连 接, 一共有 �−1<em>n</em>−1 根网线将 �<em>n</em> 台电脑连接起来使得任意两台电脑都直接或者间 接地相连。</p>
<p>小明发现每台电脑转发、发送或者接受信息需要的时间取决于这台电脑和 多少台电脑直接相连, 而信息在网线中的传播时间可以忽略。比如如果某台电脑 用网线直接连接了另外 �<em>d</em> 台电脑, 那么任何经过这台电脑的信息都会延迟 �<em>d</em> 单 位时间 (发送方和接收方也会产生这样的延迟, 当然如果发送方和接收方都是 同一台电脑就只会产生一次延迟)。</p>
<p>小明一共产生了 �<em>m</em> 个疑问: 如果电脑 ��<em>u**i</em> 向电脑 ��<em>v**i</em> 发送信息, 那么信息从 ��<em>u**i</em> 传到 ��<em>v**i</em> 的最短时间是多少?</p>
<p><strong>解题思路:</strong></p>
<p>还是一道比较明显的求<code>LCA</code>(最近公共祖先)模型的题目,我们可以使用多种方法来解决该问题，这里我们使用更好写的离线的<code>tarjan</code>算法来解决该问题。</p>
<p>除去<code>tarjan</code>算法必用的基础数组，我们还有一个数组<code>d[]</code>,<code>d[i]</code>记录的是每个点的出度，也就是它的延迟时间，以及数组<code>w[]</code>,<code>w[i]</code>的含义是点<code>i</code>到根节点的延迟时间。在通过<code>dfs</code>求出每个点<code>i</code>的<code>w[i]</code>以后，在<code>tarjan</code>中我们该如何求出两点的延迟时间呢？</p>
<p>我们设点<code>i</code>到<code>j</code>的延迟时间为�(�)<em>f</em>(<em>x</em>),当我们求得<code>i</code>与<code>j</code>的最近公共祖先为<code>anc</code>，我们首先让�(�)&#x3D;�[�]+�[�]<em>f</em>(<em>x</em>)&#x3D;<em>w</em>[<em>i</em>]+<em>w</em>[<em>j</em>],但很明显，我们多加了两遍�[���]<em>w</em>[<em>a<strong>n</strong>c</em>]，所以我们需要减去两倍的�[���]<em>w</em>[<em>a<strong>n</strong>c</em>]，但延迟时间还包括经过<code>anc</code>的时间，所以还得加上一个�[���]<em>d</em>[<em>a<strong>n</strong>c</em>]。<strong>此处请结合<code>w[]</code>和<code>d[]</code>的含义理解。</strong> 最后能得出式子:�(�)&#x3D;�[�]+�[ℎ]−�[���]∗2+�[���]<em>f</em>(<em>x</em>)&#x3D;<em>w</em>[<em>i</em>]+<em>w</em>[<em>h</em>]−<em>w</em>[<em>a<strong>n</strong>c</em>]∗2+<em>d</em>[<em>a<strong>n</strong>c</em>]我们利用这个式子在<code>tarjan</code>函数中就能得出每个询问的答案，当然对于起始和结束都在同一个节点的情况下,它的答案就是当前节点的出度，我们可以进行特判一下。输入输出较多，建议使用<code>scanf</code>和<code>printf</code>进行输入输出。</p>
<p><strong>时间复杂度</strong>:<code>dfs</code>：每个点遍历一次,复杂度级别�(�)<em>O</em>(<em>n</em>),<code>tarjan</code>算法复杂度接近 �(�+�)<em>O</em>(<em>n</em>+<em>m</em>)。</p>
<p>C++ 语言描述:</p>
<figure class="hljs highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; PII;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">100010</span>;</span><br><span class="line"></span><br><span class="line">unordered_map&lt;<span class="type">int</span>,vector&lt;<span class="type">int</span>&gt;&gt; gra;</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="comment">//单个点的出度</span></span><br><span class="line"><span class="type">int</span> d[N];</span><br><span class="line"><span class="comment">//记录点i到根节点的延迟</span></span><br><span class="line"><span class="type">int</span> w[N];</span><br><span class="line"><span class="comment">//并查集数组</span></span><br><span class="line"><span class="type">int</span> q[N];</span><br><span class="line"><span class="comment">//记录答案</span></span><br><span class="line"><span class="type">int</span> res[N];</span><br><span class="line"><span class="type">int</span> st[N];</span><br><span class="line"><span class="comment">//存下查询</span></span><br><span class="line">vector&lt;PII&gt;    query[N];</span><br><span class="line"><span class="comment">//并查集查询</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x!=q[x]) q[x]=<span class="built_in">find</span>(q[x]);</span><br><span class="line">    <span class="keyword">return</span> q[x];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    w[u]+=d[u];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> g:gra[u])&#123;</span><br><span class="line">        <span class="keyword">if</span>(g==fa) <span class="keyword">continue</span>;</span><br><span class="line">        w[g]+=w[u];</span><br><span class="line">        <span class="built_in">dfs</span>(g,u);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">tarjan</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    st[u]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> j:gra[u])&#123;</span><br><span class="line">        <span class="keyword">if</span>(!st[j])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">tarjan</span>(j);</span><br><span class="line">            q[j]=u;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> item: query[u])&#123;</span><br><span class="line">        <span class="type">int</span> y=item.first,id=item.second;</span><br><span class="line">        <span class="keyword">if</span>(st[y]==<span class="number">2</span>)&#123;</span><br><span class="line">            <span class="type">int</span> anc=<span class="built_in">find</span>(y);</span><br><span class="line">            res[id]=w[y]+w[u]-w[anc]*<span class="number">2</span>+d[anc];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    st[u]=<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n<span class="number">-1</span>;++i)&#123;</span><br><span class="line">        <span class="type">int</span> a,b;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;a,&amp;b);</span><br><span class="line">        gra[a].<span class="built_in">push_back</span>(b);</span><br><span class="line">        gra[b].<span class="built_in">push_back</span>(a);</span><br><span class="line">        d[a]++,d[b]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;++i)&#123;</span><br><span class="line">        <span class="type">int</span> a,b;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;a,&amp;b);</span><br><span class="line">        <span class="keyword">if</span>(a!=b)&#123;</span><br><span class="line">            query[a].<span class="built_in">push_back</span>(&#123;b,i&#125;);</span><br><span class="line">            query[b].<span class="built_in">push_back</span>(&#123;a,i&#125;);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            res[i]=d[a];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">1</span>,<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;++i) q[i]=i;</span><br><span class="line">    <span class="built_in">tarjan</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;++i) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,res[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Python 语言描述:</p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"></span><br><span class="line">gra = defaultdict(<span class="built_in">list</span>)</span><br><span class="line">d = [<span class="number">0</span>] * <span class="number">100010</span></span><br><span class="line">w = [<span class="number">0</span>] * <span class="number">100010</span></span><br><span class="line">q = [<span class="number">0</span>] * <span class="number">100010</span></span><br><span class="line">res = [<span class="number">0</span>] * <span class="number">100010</span></span><br><span class="line">st = [<span class="number">0</span>] * <span class="number">100010</span></span><br><span class="line">query = [[] <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100010</span>)]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">if</span> x != q[x]:</span><br><span class="line">        q[x] = find(q[x])</span><br><span class="line">    <span class="keyword">return</span> q[x]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">u, fa</span>):</span><br><span class="line">    w[u] += d[u]</span><br><span class="line">    <span class="keyword">for</span> g <span class="keyword">in</span> gra[u]:</span><br><span class="line">        <span class="keyword">if</span> g == fa:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        w[g] += w[u]</span><br><span class="line">        dfs(g, u)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">tarjan</span>(<span class="params">u</span>):</span><br><span class="line">    st[u] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> gra[u]:</span><br><span class="line">        <span class="keyword">if</span> st[j] == <span class="number">0</span>:</span><br><span class="line">            tarjan(j)</span><br><span class="line">            q[j] = u</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> query[u]:</span><br><span class="line">        y, <span class="built_in">id</span> = item</span><br><span class="line">        <span class="keyword">if</span> st[y] == <span class="number">2</span>:</span><br><span class="line">            anc = find(y)</span><br><span class="line">            res[<span class="built_in">id</span>] = w[y] + w[u] - w[anc] * <span class="number">2</span> + d[anc]</span><br><span class="line">    st[u] = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">n, m = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n - <span class="number">1</span>):</span><br><span class="line">    a, b = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())</span><br><span class="line">    gra[a].append(b)</span><br><span class="line">    gra[b].append(a)</span><br><span class="line">    d[a] += <span class="number">1</span></span><br><span class="line">    d[b] += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(m):</span><br><span class="line">    a, b = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())</span><br><span class="line">    <span class="keyword">if</span> a != b:</span><br><span class="line">        query[a].append((b, i))</span><br><span class="line">        query[b].append((a, i))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        res[i] = d[a]</span><br><span class="line"></span><br><span class="line">dfs(<span class="number">1</span>, -<span class="number">1</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">    q[i] = i</span><br><span class="line">tarjan(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(m):</span><br><span class="line">    <span class="built_in">print</span>(res[i])</span><br></pre></td></tr></table></figure>

<p>Java 语言描述:</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Pair</span> &#123;</span><br><span class="line">        <span class="type">int</span> first, second;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Pair</span><span class="params">(<span class="type">int</span> first, <span class="type">int</span> second)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.first = first;</span><br><span class="line">            <span class="built_in">this</span>.second = second;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> Map&lt;Integer, List&lt;Integer&gt;&gt; gra = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[] d = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">100010</span>];</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[] w = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">100010</span>];</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[] q = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">100010</span>];</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[] res = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">100010</span>];</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[] st = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">100010</span>];</span><br><span class="line">    <span class="keyword">static</span> List&lt;Pair&gt;[] query = <span class="keyword">new</span> <span class="title class_">List</span>[<span class="number">100010</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (x != q[x]) q[x] = find(q[x]);</span><br><span class="line">        <span class="keyword">return</span> q[x];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> fa)</span> &#123;</span><br><span class="line">        w[u] += d[u];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> g : gra.get(u)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (g == fa) <span class="keyword">continue</span>;</span><br><span class="line">            w[g] += w[u];</span><br><span class="line">            dfs(g, u);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">tarjan</span><span class="params">(<span class="type">int</span> u)</span> &#123;</span><br><span class="line">        st[u] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j : gra.get(u)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (st[j] == <span class="number">0</span>) &#123;</span><br><span class="line">                tarjan(j);</span><br><span class="line">                q[j] = u;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (Pair item : query[u]) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> item.first, id = item.second;</span><br><span class="line">            <span class="keyword">if</span> (st[y] == <span class="number">2</span>) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">anc</span> <span class="operator">=</span> find(y);</span><br><span class="line">                res[id] = w[y] + w[u] - w[anc] * <span class="number">2</span> + d[anc];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        st[u] = <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            gra.put(i, <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;());</span><br><span class="line">            query[i] = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">            <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">            gra.get(a).add(b);</span><br><span class="line">            gra.get(b).add(a);</span><br><span class="line">            d[a]++;</span><br><span class="line">            d[b]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">            <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">            <span class="keyword">if</span> (a != b) &#123;</span><br><span class="line">                query[a].add(<span class="keyword">new</span> <span class="title class_">Pair</span>(b, i));</span><br><span class="line">                query[b].add(<span class="keyword">new</span> <span class="title class_">Pair</span>(a, i));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                res[i] = d[a];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        dfs(<span class="number">1</span>, -<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">           q[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        tarjan(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            System.out.println(res[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="环境治理"><a href="#环境治理" class="headerlink" title="环境治理"></a>环境治理</h2><p>LQ 国拥有 �<em>n</em> 个城市, 从 0 到 �−1<em>n</em>−1 编号, 这 �<em>n</em> 个城市两两之间都有且仅有 一条双向道路连接, 这意味着任意两个城市之间都是可达的。每条道路都有一 个属性 �<em>D</em>, 表示这条道路的灰尘度。当从一个城市 �<em>A</em> 前往另一个城市 �<em>B</em> 时, 可 能存在多条路线, 每条路线的灰尘度定义为这条路线所经过的所有道路的灰尘 度之和, LQ 国的人都很讨厌灰尘, 所以他们总会优先选择灰尘度最小的路线。</p>
<p>LQ 国很看重居民的出行环境, 他们用一个指标 �<em>P</em> 来衡量 LQ 国的出行环 境, �<em>P</em> 定义为:</p>
<p>�&#x3D;∑∗�&#x3D;0�−1∑∗�&#x3D;0�−1�(�,�)<em>P</em>&#x3D;∑∗<em>i</em>&#x3D;0<em>n</em>−1∑∗<em>j</em>&#x3D;0<em>n</em>−1<em>d</em>(<em>i</em>,<em>j</em>)</p>
<p>其中 �(�,�)<em>d</em>(<em>i</em>,<em>j</em>) 表示城市 �<em>i</em> 到城市 �<em>j</em> 之间灰尘度最小的路线对应的灰尘度的值。 为了改善出行环境, 每个城市都要有所作为, 当某个城市进行道路改善时, 会将与这个城市直接相连的所有道路的灰尘度都减少 1 , 但每条道路都有一个 灰尘度的下限值 �<em>L</em>, 当灰尘度达到道路的下限值时, 无论再怎么改善, 道路的 灰尘度也不会再减小了。</p>
<p>具体的计划是这样的:</p>
<p>第 1 天, 0 号城市对与其直接相连的道路环境进行改善;</p>
<p>第 2 天, 1 号城市对与其直接相连的道路环境进行改善;</p>
<p>⋯⋯</p>
<p>第 �<em>n</em> 天, �−1<em>n</em>−1 号城市对与其直接相连的道路环境进行改善;</p>
<p>第 �+1<em>n</em>+1 天, 0 号城市对与其直接相连的道路环境进行改善;</p>
<p>第 �+2<em>n</em>+2 天, 1 号城市对与其直接相连的道路环境进行改善;</p>
<p>LQ 国想要使得 �<em>P</em> 指标满足 �≤�<em>P</em>≤<em>Q</em> 。请问最少要经过多少天之后, �<em>P</em> 指标 可以满足 �≤�<em>P</em>≤<em>Q</em> 。如果在初始时就已经满足条件, 则输出 0 ; 如果永远不可能 满足, 则输出 −1−1 。</p>
<p><strong>解题思路:</strong></p>
<p>首先，对于求解<code>P</code>指的公式，我们要清楚，是每个点到其他所有点的最短路径之和相加，这种涉及到任意两点的最短路，加上 �<em>n</em> 的最大范围只有<code>100</code>，很明显我们需要想到<code>Floyd</code>算法求任意两点的最短路。</p>
<p>我们并没有一个直观的算法直接求得答案，所以，我们考虑<strong>二分答案。</strong> 如果改善<code>x</code>天是符合要求的，那么大于<code>x</code>的天数也一定符合，但小于<code>x</code>的天数不一定，所以满足二段性，我们可以二分。</p>
<p>我们用<code>g[][]</code>记录初始道路的灰尘度,<code>m[][]</code>记录每条道路的最低灰尘度,<code>f[][]</code>记录的是在改善<code>x</code>天后的每条道路的环境。这样我们就可以使用二分+<code>Floyd</code>的做法得到答案。</p>
<p>当然这里有一些需要注意的细节问题，当我们改变<code>f[i][j]</code>的值时，相应的也要改变<code>f[j][i]</code>的值，因为任意两点只存在一条双向道路，所以这两个状态应该表示的是同一条道路。每次<code>check</code>时，别忘记将<code>f[][]</code>重置回<code>g[][]</code>，再去减去对于的天数。<code>floyd</code>函数每次跑完后，计算并返回此时的<code>P</code>值。</p>
<p>最开始时我们可以判断每条道路都是最低复杂度的情况下，计算出来的<code>P</code>是否大于<code>Q</code>，如果大于说明肯定无解，直接返回<code>-1</code>即可。二分对于<code>r</code>的上限也需要注意，最多<code>100</code>个点，每个点最大<code>1e5</code>，所以理论上我们只要开到大于<code>1e7</code>以上就不会有问题，否则样例过大时可能会出错。</p>
<p>时间复杂度：�(�3���(�∗�))<em>O</em>(<em>n</em>3<em>l<strong>o</strong>g</em>(<em>n</em>∗<em>m</em>))。</p>
<p>C++ 语言描述:</p>
<figure class="hljs highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">110</span>;</span><br><span class="line"></span><br><span class="line">LL g[N][N];</span><br><span class="line">LL m[N][N];</span><br><span class="line">LL f[N][N];</span><br><span class="line">LL n,q;</span><br><span class="line"><span class="function">LL <span class="title">floyd</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    LL a=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">1</span>; k &lt;= n; k ++ )</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++ )</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j ++ )</span><br><span class="line">                f[i][j] = <span class="built_in">min</span>(f[i][j], f[i][k] + f[k][j]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;++j)</span><br><span class="line">            a+=f[i][j];</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//改善X天</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(LL x)</span></span>&#123;</span><br><span class="line">    <span class="built_in">memcpy</span>(f,g,<span class="built_in">sizeof</span>(g));</span><br><span class="line">    LL h=x/n;</span><br><span class="line">    LL s=x%n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;++j)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i==j) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(i&lt;=s) f[i][j]=<span class="built_in">max</span>(m[i][j],f[i][j]-h<span class="number">-1</span>);</span><br><span class="line">            <span class="keyword">else</span> f[i][j]=<span class="built_in">max</span>(m[i][j],f[i][j]-h);</span><br><span class="line">            f[j][i]=f[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">floyd</span>()&lt;=q;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;q;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;++j)&#123;</span><br><span class="line">            cin&gt;&gt;g[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;++j)&#123;</span><br><span class="line">            cin&gt;&gt;m[i][j];</span><br><span class="line">            f[i][j]=m[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">floyd</span>()&gt;q)&#123;</span><br><span class="line">        cout&lt;&lt;<span class="number">-1</span>&lt;&lt;endl;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    LL l=<span class="number">0</span>,r=<span class="number">1000000000</span>;</span><br><span class="line">    <span class="keyword">while</span>(l&lt;r)&#123;</span><br><span class="line">        <span class="type">int</span> mid=l+r&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">check</span>(mid)) r=mid;</span><br><span class="line">        <span class="keyword">else</span> l=mid+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;r&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">solve</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Python 语言描述:</p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line">N=<span class="number">110</span></span><br><span class="line">g=[[<span class="number">0</span>]*N <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(N)]</span><br><span class="line">m=[[<span class="number">0</span>]*N <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(N)]</span><br><span class="line">f=[[<span class="number">0</span>]*N <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(N)]</span><br><span class="line">n,q=<span class="built_in">map</span>(<span class="built_in">int</span>,<span class="built_in">input</span>().split())</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">floyd</span>(<span class="params">f</span>):</span><br><span class="line">    a=<span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,n+<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,n+<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,n+<span class="number">1</span>):</span><br><span class="line">                f[i][j]=<span class="built_in">min</span>(f[i][j],f[i][k]+f[k][j])</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,n+<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,n+<span class="number">1</span>):</span><br><span class="line">            a=a+f[i][j]</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">check</span>(<span class="params">x,g</span>):</span><br><span class="line">    f=copy.deepcopy(g)</span><br><span class="line">    h=x//n</span><br><span class="line">    s=x%n</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,n+<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,n+<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> i==j:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">if</span> i&lt;=s:</span><br><span class="line">                f[i][j]=<span class="built_in">max</span>(m[i][j],f[i][j]-h-<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                f[i][j]=<span class="built_in">max</span>(m[i][j],f[i][j]-h)</span><br><span class="line">            f[j][i]=f[i][j]</span><br><span class="line">    <span class="keyword">return</span>  floyd(f)&lt;=q</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">solve</span>():</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,n+<span class="number">1</span>):</span><br><span class="line">        l=<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>,<span class="built_in">input</span>().split()))</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,n+<span class="number">1</span>):</span><br><span class="line">            g[i][j]=l[j-<span class="number">1</span>]<span class="comment">#灰尘度</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,n+<span class="number">1</span>):</span><br><span class="line">        l = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split()))</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,n+<span class="number">1</span>):</span><br><span class="line">            m[i][j]=l[j-<span class="number">1</span>]<span class="comment">#灰尘度的下限值</span></span><br><span class="line">            f[i][j]=m[i][j]</span><br><span class="line">    <span class="keyword">if</span> floyd(f)&gt;q:</span><br><span class="line">        <span class="built_in">print</span>(-<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    l,r=<span class="number">0</span>,<span class="number">10000000</span></span><br><span class="line">    <span class="keyword">while</span> (l &lt; r):</span><br><span class="line">        mid=(l+r)&gt;&gt;<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> (check(mid,g)):</span><br><span class="line">            r=mid</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            l=mid+<span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(r)</span><br><span class="line">solve()</span><br></pre></td></tr></table></figure>

<p>Java 语言描述:</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> N=<span class="number">110</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">long</span>[][] g=<span class="keyword">new</span> <span class="title class_">long</span>[N][N],m=<span class="keyword">new</span> <span class="title class_">long</span>[N][N],f=<span class="keyword">new</span> <span class="title class_">long</span>[N][N];</span><br><span class="line">    <span class="keyword">static</span> <span class="type">long</span> n,q;</span><br><span class="line">    <span class="keyword">static</span> BufferedReader br=<span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(System.in));</span><br><span class="line">    <span class="keyword">static</span> PrintWriter  out=<span class="keyword">new</span> <span class="title class_">PrintWriter</span>(<span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(System.out));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        String[] s=br.readLine().split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        n=Long.parseLong(s[<span class="number">0</span>]);</span><br><span class="line">        q=Long.parseLong(s[<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line">            s=br.readLine().split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;++j)&#123;</span><br><span class="line">                g[i][j]=Long.parseLong(s[j-<span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line">            s=br.readLine().split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;++j)&#123;</span><br><span class="line">                m[i][j]=Long.parseLong(s[j-<span class="number">1</span>]);</span><br><span class="line">                f[i][j]=m[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(floyd()&gt;q)&#123;</span><br><span class="line">            out.println(-<span class="number">1</span>);</span><br><span class="line">            out.flush();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> l=<span class="number">0</span>,r=<span class="number">1000000000</span>;</span><br><span class="line">        <span class="keyword">while</span>(l&lt;r)&#123;</span><br><span class="line">            <span class="type">long</span> mid=l+r&gt;&gt;<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(check(mid)) r=mid;</span><br><span class="line">            <span class="keyword">else</span> l=mid+<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        out.println(r);</span><br><span class="line">        out.flush();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">long</span> <span class="title function_">floyd</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">long</span> a=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">1</span>; k &lt;= n; k ++ )</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i ++ )</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= n; j ++ )</span><br><span class="line">                    f[i][j] =Math.min(f[i][j], f[i][k] + f[k][j]);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;++j)</span><br><span class="line">                a+=f[i][j];</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">check</span><span class="params">(<span class="type">long</span> x)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;++j) f[i][j]=g[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> h=x/n;</span><br><span class="line">        <span class="type">long</span> s=x%n;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;++j)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i==j) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">if</span>(i&lt;=s) f[i][j]=Math.max(m[i][j],f[i][j]-h-<span class="number">1</span>);</span><br><span class="line">                <span class="keyword">else</span> f[i][j]=Math.max(m[i][j],f[i][j]-h);</span><br><span class="line">                f[j][i]=f[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> floyd()&lt;=q;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%A4%87%E8%B5%9B/" rel="tag"><i class="fas fa-tags"></i>蓝桥杯备赛</a>
        
      </div>
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="https://actz123.github.io/2024/02/22/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="zdx">
        <meta itemprop="description" content="">
        <meta itemprop="image" content="/images/avatar.png">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="Actz">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2024/02/22/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" itemprop="url">动态规划</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2024-02-22T17:39:09+08:00">2024-02-22 17:39:09</time></span>
        </span>
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-categories">
          
          <i class="far fa-folder-open"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%86%B2%E5%88%BA%E8%90%A5/" itemprop="url" rel="index"><span itemprop="name">蓝桥杯冲刺营</span></a></span><i class="fas fa-angle-right"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%86%B2%E5%88%BA%E8%90%A5/10-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" itemprop="url" rel="index"><span itemprop="name">10.动态规划</span></a></span>
        </span>
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <h1 id="动态规划（Dynamic-Programming）"><a href="#动态规划（Dynamic-Programming）" class="headerlink" title="动态规划（Dynamic Programming）"></a>动态规划（Dynamic Programming）</h1><h2 id="实验介绍"><a href="#实验介绍" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本节课我们进入动态规划课程的学习，动态规划是一种多阶段的决策过程最优化的问题。</p>
<p>本课程对于算法学习非常重要，但是又比较难，我们讲解分 33 个章节进行动态规划问题的讲解。</p>
<p>今天的课程是动态规划系列的第一个章节。</p>
<h3 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h3><ul>
<li>动态规划的基本思想</li>
<li>动态规划问题的基本套路与步骤</li>
</ul>
<h2 id="为什么使用动态规划算法"><a href="#为什么使用动态规划算法" class="headerlink" title="为什么使用动态规划算法"></a>为什么使用动态规划算法</h2><p>我们先回忆一下贪心问题。</p>
<p>贪心又称贪婪算法。是一种在每一步选择中都采取在当前状态下最好或最优（即最有利）的选择，从而使得问题得到全局最优解。</p>
<p><strong>它的特点：</strong></p>
<p>贪心选择性质是指所求问题的整体最优解可以通过一系列局部最优的选择，即贪心选择来达到。</p>
<p>这是贪心算法可行的第一个基本要素，也是贪心算法与动态规划算法的主要区别。</p>
<p>贪心选择性质就是，该问题的每一步选择都在选择最优的情况下能够导致最终问题的答案也是最优。</p>
<p>其实贪心和动态规划的区别，你可以理解为一个是正推，一眼就能看出来最优子结构，依次按照最优子结构选择每个过程最优选择即可。</p>
<p>而动态规划是没办法按照题目的意思直接得到最有优子结构，如下文所述:</p>
<h4 id="多阶段决策过程最优化问题"><a href="#多阶段决策过程最优化问题" class="headerlink" title="多阶段决策过程最优化问题"></a>多阶段决策过程最优化问题</h4><p>动态规划问题，是运筹学的一个分支，动态规划主要用于求解以时间划分阶段的动态过程的优化问题。</p>
<p>在实际生活中，动态规划问题与贪心问题相似，都是完成某一事件的过程可以划分成多个阶段。</p>
<p>但是与贪心不同的是动态规划的每个状态之间都会相互影响和相互干涉，也就是说在某一阶段做出的决策会影响整个事件的最终结果。</p>
<p>因为阶段是有先后的，所以某一阶段的选取受之前阶段的影响，他也会影响后面的阶段。</p>
<p><strong>多阶段决策问题：</strong></p>
<p>多阶段决策过程问题，就是一类在每一阶段都需要做出选择，且某一阶段的决策受前面所有阶段决策后的状态影响，他的决策又会影响后续的决策。</p>
<p>这样一类问题就是多阶段决策问题。</p>
<p><strong>多阶段决策过程最优化问题：</strong></p>
<p>在多阶段决策问题中，各个阶段采取的决策，通常与时间相关，但有时又与其他的线性的变量相关。</p>
<p>我们前面说到，某个阶段的决策是在前面做完了的决策引发的某一个状态开始进行决策的。</p>
<p>而现在做的决策又会使得状态进行转移，那么又影响了下次进行决策的状态。</p>
<p>所以说作决策时的状态是动态的，规划是解决最优化问题的方式，所以解决这种多阶段决策过程最优化的方法叫做动态规划。</p>
<h4 id="动态规划中的术语解释"><a href="#动态规划中的术语解释" class="headerlink" title="动态规划中的术语解释"></a>动态规划中的术语解释</h4><ul>
<li>阶段： 把所给求解问题的过程恰当地分成若干个相互联系的阶段，以便于求解，过程不同，阶段数就可能不同</li>
<li>状态： 述事物的性质，不同事物有不同的性质，因而用不同的状态来刻画。对问题的求解状态的描述是分阶段的</li>
<li>决策： 根据题意要求，对每个阶段所做出的某种选择性操作</li>
<li>策略： 由每个阶段的决策组成的序列称为策略</li>
<li>状态转移方程： 用数学公式描述与阶段相关的状态间的演变规律</li>
</ul>
<h4 id="能采用动态规划求解的问题的性质"><a href="#能采用动态规划求解的问题的性质" class="headerlink" title="能采用动态规划求解的问题的性质"></a>能采用动态规划求解的问题的性质</h4><ul>
<li><p>最优化原理：</p>
<p>如果问题的最优解所包含的子问题的解也是最优的，就称该问题具有最优子结构，即满足最优化原理。</p>
</li>
<li><p>无后效性：</p>
<p>即某阶段状态一旦确定，就不受这个状态以后决策的影响。也就是说，某状态以后的过程不会影响以前的状态，只与当前状态有关。</p>
</li>
<li><p>有重叠子问题：</p>
<p>即子问题之间是不独立的，一个子问题在下一阶段决策中可能被多次使用到。（该性质并不是动态规划适用的必要条件，但是如果没有这条性质，动态规划算法同其他算法相比就不具备优势）</p>
</li>
</ul>
<h4 id="解题步骤"><a href="#解题步骤" class="headerlink" title="解题步骤"></a>解题步骤</h4><ul>
<li>拆分问题</li>
<li>定义状态(并找出初状态)</li>
<li>找到状态转移</li>
<li>逆推找最优子结构</li>
<li>写出 DP 状态转移方程。</li>
</ul>
<h4 id="一般的模型方法"><a href="#一般的模型方法" class="headerlink" title="一般的模型方法"></a>一般的模型方法</h4><ul>
<li>递归搜索法</li>
<li>记忆化搜索(记忆化暴力)</li>
<li>递推式法</li>
</ul>
<h4 id="经典例题数塔问题"><a href="#经典例题数塔问题" class="headerlink" title="经典例题数塔问题"></a>经典例题数塔问题</h4><p>我们先来回顾一下我们之前讲过的数塔问题：</p>
<p><strong>题目描述:</strong></p>
<p><img src="/./../imgs/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/06b8663e2aceb6c87e0913d2fe0710f2-0.png" alt="图片描述"></p>
<p>如图数字三角形。如下所示为一个数字三角形。请编一个程序计算从顶到底的某处的一条路径，使该路径所经过的数字总和最大。只要求输出总和。</p>
<ol>
<li>一步可沿左斜线向下或右斜线向下走；</li>
<li>三角形行数小于等于 100100；</li>
<li>三角形中的数字为 0，1，…，990，1，…，99；</li>
</ol>
<p>测试数据通过键盘逐行输入。</p>
<p>如上例数据应以样例所示格式输入：</p>
<p><strong>样例:</strong></p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">输入：</span><br><span class="line"></span><br><span class="line">5</span><br><span class="line">7</span><br><span class="line">3 8</span><br><span class="line">8 1 0</span><br><span class="line">2 7 4 4</span><br><span class="line">4 5 2 6 5</span><br><span class="line">输出：</span><br><span class="line"></span><br><span class="line">30</span><br></pre></td></tr></table></figure>

<p><strong>运行限制:</strong></p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. 最大运行时间：1s</span><br><span class="line">2. 最大运行内存：128M</span><br></pre></td></tr></table></figure>

<p><strong>题目分析:</strong></p>
<ol>
<li><p>定义状态 假设 <code>dp[i][j]</code> 为处理 <code>a[i][j]</code> 后能达到的最大值。</p>
</li>
<li><p>找出状态转移</p>
<p><code>dp[i][j]</code>怎么转移呢？按照题意他有两条路径可以转移</p>
<p><code>dp[i+1][j]=dp[i][j]+a[i+1][j]</code> 向下走</p>
<p><code>dp[i+1][j+1]=dp[i][j]+a[i+1][j+1]</code> 向右下走</p>
<p>我们有办法知道这两条路径哪条更优吗？</p>
<p>不能！因为通向了两个不同的决策过程。为什么贪心可以知道，因为贪心处理完之后通向的是同一个决策过程，这里<code>dp[i+1][j]和dp[i+1][j+1]</code>明显他们两个所能达到的状态是完全不同的，这就是动态规划和贪心的不同之处。</p>
<p>那我们怎样处理呢，我们要做的就是达到同一个状态我们才能够判断那个是最优的，这就是最优子结构。</p>
</li>
<li><p>逆推找最优子结构</p>
<p>虽然我们进行了逆推，但是实际上不是因为我们逆推做了什么，只是因为我们找最优子结构的过程中恰好做了逆推的过程。</p>
<p>我们要找最优子结构，我们刚才说了，要找到达同一状态的转移才能比较。那我们就考虑什么状态能够转移得到<code>dp[i][j]</code>，这时候我们直接看也能看出来是这两条路径<code>dp[i+1][j]+a[i][j],dp[i+1][j+1]+a[i][j]</code>。</p>
</li>
<li><p>写出状态转移方程</p>
</li>
</ol>
<p>��[�][�]&#x3D;�����[�+1][�]+�[�][�],��[�+1][�+1]+�[�][�]<em>d**p</em>[<em>i</em>][<em>j</em>]&#x3D;<em>m<strong>a</strong>x<strong>d</strong>p</em>[<em>i</em>+1][<em>j</em>]+<em>a</em>[<em>i</em>][<em>j</em>],<em>d**p</em>[<em>i</em>+1][<em>j</em>+1]+<em>a</em>[<em>i</em>][<em>j</em>]</p>
<p>空间优化，已知 <code>dp[i][j]</code> 的值只会被覆盖前使用一次，所以可以合并 <code>dp[i][j]</code> 和 <code>a[i][j]</code> 那么就变成了。</p>
<p>�[�][�]&#x3D;����[�][�]+�[�+1][�],�[�][�]+�[�+1][�+1]<em>a</em>[<em>i</em>][<em>j</em>]&#x3D;<em>m<strong>a</strong>x**a</em>[<em>i</em>][<em>j</em>]+<em>a</em>[<em>i</em>+1][<em>j</em>],<em>a</em>[<em>i</em>][<em>j</em>]+<em>a</em>[<em>i</em>+1][<em>j</em>+1]</p>
<p>则 逆推到出发点 <code>a[1][1]</code> 为题目所求答案，即第一层到第 <code>N</code> 层的最大值。</p>
<p><strong>答案解析：</strong></p>
<p><strong>C++ 解题代码:</strong></p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n; <span class="comment">//n层</span></span><br><span class="line">    <span class="type">int</span> a[<span class="number">101</span>][<span class="number">101</span>]; <span class="comment">//路径矩阵</span></span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//输入数字三角形的值</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>; j&lt;=i; j++)</span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">        cin&gt;&gt;a[i][j]; <span class="comment">//输入原始数据</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//递推开始</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=n<span class="number">-1</span>; i&gt;=<span class="number">1</span>; i--)<span class="comment">//从最后一层逆推</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>; j&lt;=i; j++)</span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (a[i+<span class="number">1</span>][j]&gt;=a[i+<span class="number">1</span>][j+<span class="number">1</span>])</span><br><span class="line">                a[i][j]+=a[i+<span class="number">1</span>][j];     <span class="comment">//路径选择</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                a[i][j]+=a[i+<span class="number">1</span>][j+<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout&lt;&lt;a[<span class="number">1</span>][<span class="number">1</span>]&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Python 解题代码:</strong></p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">a = [[<span class="number">0</span>] * <span class="number">101</span>] * <span class="number">101</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">  n = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 输入数字三角形的值</span></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n+<span class="number">1</span>):</span><br><span class="line">      a[i] = <span class="built_in">input</span>().split()</span><br><span class="line">      a[i] = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, a[i]))  <span class="comment"># split 分割后都是 字符 这里是转化成数字</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="comment"># for i in range(1, n + 1):</span></span><br><span class="line">  <span class="comment">#     print(a[i])</span></span><br><span class="line"></span><br><span class="line"> <span class="comment"># a = list(map(int, a)) # split 分割后都是 字符 这里是转化成数字</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 递推开始</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n - <span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>):</span><br><span class="line">      <span class="comment"># 最后一层逆推</span></span><br><span class="line">      <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, i):</span><br><span class="line"></span><br><span class="line">          <span class="comment"># 路径选择</span></span><br><span class="line">          <span class="keyword">if</span> a[i + <span class="number">1</span>][j] &gt;= a[i + <span class="number">1</span>][j + <span class="number">1</span>]:</span><br><span class="line">              a[i][j] += a[i + <span class="number">1</span>][j]</span><br><span class="line"></span><br><span class="line">          <span class="keyword">else</span>:</span><br><span class="line">              a[i][j] += a[i + <span class="number">1</span>][j + <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">  <span class="comment"># for i in range(1, n + 1):</span></span><br><span class="line">  <span class="comment">#     print(a[i])</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(a[<span class="number">1</span>][<span class="number">0</span>])</span><br></pre></td></tr></table></figure>

<p><strong>Java 解题代码</strong></p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="type">int</span> [][]a=<span class="keyword">new</span> <span class="title class_">int</span> [<span class="number">101</span>][<span class="number">101</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="type">int</span> n;</span><br><span class="line">      <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">      n = in.nextInt();</span><br><span class="line"></span><br><span class="line">      <span class="comment">//输入数字三角形的值</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>; j&lt;=i; j++)</span><br><span class="line">          &#123;</span><br><span class="line">              a[i][j]=in.nextInt(); <span class="comment">//输入原始数据</span></span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//递推开始</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> i=n-<span class="number">1</span>; i&gt;=<span class="number">1</span>; i--)<span class="comment">//从最后一层逆推</span></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>; j&lt;=i; j++)</span><br><span class="line">          &#123;</span><br><span class="line">              <span class="keyword">if</span> (a[i+<span class="number">1</span>][j]&gt;=a[i+<span class="number">1</span>][j+<span class="number">1</span>])</span><br><span class="line">                  a[i][j]+=a[i+<span class="number">1</span>][j];     <span class="comment">//路径选择</span></span><br><span class="line"></span><br><span class="line">              <span class="keyword">else</span>  a[i][j]+=a[i+<span class="number">1</span>][j+<span class="number">1</span>];</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      System.out.println(a[<span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其实我们在讲这道题目中所用到的思想就是动态规划。</p>
<p>我们换种方式在理解一遍。</p>
<p>在用动态规划考虑数塔问题时可以自顶向下的分析，自底向上的计算。</p>
<p>从顶点出发时到底向左走还是向右走应取决于是从左走能取到最大值还是从右走能取到最大值，只要左右两道路径上的最大值求出来了才能作出决策。</p>
<p>同样的道理下一层的走向又要取决于再下一层上的最大值是否已经求出才能决策。</p>
<p>这样一层一层推下去，直到倒数第二层时就非常明了。</p>
<p>所以第一步对第五层的 88 个数据，做如下四次决策：</p>
<ul>
<li>如果经过第四层 22，则在第五层的 44 和 55 中，决策选择的肯定是 1919</li>
<li>如果经过第四层 77，则在第五层的 55 和 22 中，决策选择的肯定是 1010</li>
<li>如果经过第四层第一个 44，则在第五层的 22 和 66 中，决策选择的肯定是 66</li>
<li>如果经过第四层第二个 44，则在第五层的 66 和 55 中肯定是 66</li>
</ul>
<p>经过一次决策，问题降了一阶。55 层数塔问题转换成 44 层数塔问题，经过如此的决策，就将原来问题转换为一阶数塔问题。</p>
<p>于是我们可以用我们上面的递推求解。</p>
<p>这就是递推式法模型。</p>
<p>我们通过这道简单的例题，大家首先要去找感觉，去分解问题的状态，去找决策，去找状态转移，而笔者认为动态规划问题，感觉是最重要的。</p>
<p>有的人 1010 道题就能找到感觉，有的人 100100 道题也找不到感觉。</p>
<h4 id="游戏中的学问"><a href="#游戏中的学问" class="headerlink" title="游戏中的学问"></a>游戏中的学问</h4><p>难度: 简单 标签: DP, JSOI, 2013</p>
<p>题目链接：<a target="_blank" rel="noopener" href="https://www.lanqiao.cn/problems/1436/learning/">https://www.lanqiao.cn/problems/1436/learning/</a></p>
<p><strong>题目描述：</strong></p>
<p>大家应该都见过很多人手拉手围着篝火跳舞的场景吧？</p>
<p>一般情况下，大家手拉手跳舞总是会围成一个大圈，每个人的左手拉着旁边朋友的右手，右手拉着另一侧朋友的左手。</p>
<p>不过，如果每一个人都随机的拉住两个不同人的手，然后再慢慢散开，事情就变得有趣多了——此时大家依旧会形成圈，不过却可能会形成多个独立的圈。</p>
<p>当然这里我们依然要求一个人的右手只能拉另一个人的左手，反之亦然。</p>
<p>班里一共有 �<em>N</em> 个同学，由 11 到 �<em>N</em> 编号。Will 想知道，究竟有多少种本质不同的拉手方案，使得最终大家散开后恰好形成 �<em>k</em> 个圈呢？</p>
<p>给定两种方案，若存在一个人和他的一只手，满足在这两种方案中，拉着这只手的人的编号不同，则这两种方案本质不同。</p>
<p><strong>输入描述：</strong></p>
<figure class="hljs highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入一行包含三个正整数 N k P</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>&lt;=<span class="number">3</span>k&lt;=N&lt;=<span class="number">3000</span>，<span class="number">10</span>^<span class="number">4</span>&lt;=p&lt;=<span class="number">2</span>×<span class="number">10</span>^<span class="number">9</span></span><br></pre></td></tr></table></figure>

<p><strong>输出描述：</strong></p>
<p>输出一行一个整数，表示本质不同的方案数对 p 的余数。保证 p 一定是一个质数。</p>
<p><strong>输入输出样例：</strong></p>
<ul>
<li><p>样例 1： Input：</p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3 1 1000000009</span><br></pre></td></tr></table></figure>

<p>output：</p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>答案解析：</strong></p>
<p>题目是说随即的拉住右手，共计 N 个人形成 k 个独立环的可能的情况有多少种。</p>
<p>我们举个例子，A B C 三个人：</p>
<p><img src="/./../imgs/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/4e9534885e67b5c512405e7d1d5c182b-0.png" alt="图片描述"></p>
<p>A 的左手是 C A 的右手是 B B 的左手是 A B 的右手是 C C 的左手是 B C 的右手是 A</p>
<p><img src="/./../imgs/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/a0502745d207f9d9d3dfdb4bc2ad841d-0.png" alt="图片描述"></p>
<p>A 的左手是 B A 的右手是 C B 的左手是 C B 的右手是 A C 的左手是 A C 的右手是 B</p>
<p>这两种是不同的。</p>
<p>最后对 P 取模。</p>
<p>这道题目可以说是记忆化搜索，也可以说是递推法模型。</p>
<p><strong>定义状态：</strong></p>
<p>我们设 dp{i,j} 是 i 个人组成 j 个圈有多少种情况的状态</p>
<p><strong>找初始状态：</strong></p>
<p>由于最少是三个人围成 1 个圈</p>
<p>所以 dp{3,1}&#x3D;2</p>
<p><strong>找状态转移：</strong></p>
<p>我们考虑 <code>dp&#123;4,1&#125;</code> 的时候： 由于一开始三个人之间共计 3 个空位置，它可以见缝插针，所以就有 3×3×dp {3,13,1}，dp{4,14,1} &#x3D; 3×3×dp{3,13,1}</p>
<p>接着考虑 <code>dp&#123;x+1,y&#125;</code> 和 <code>dp&#123;x,y&#125;</code> 的关系：</p>
<p>假设 <code>X</code> 个人分成了 <code>y</code> 个环后每个环得人数是 <code>X1 X2 ... Xy</code></p>
<p>对于第一个环 <code>X1</code> 来说共有 <code>X1</code> 个空</p>
<p>对于第二个环 <code>X2</code> 来说共有 <code>X2</code> 个空</p>
<p>共计 <code>X1+X2+...+Xy=X</code></p>
<p>所以共有 <code>X</code> 个空，那么第 <code>X+1</code> 个人就用 <code>X</code> 种选择可以做。</p>
<p>所以 dp{�+1,�<em>x</em>+1,<em>y</em>} &#x3D; �×<em>x</em>× dp{�,�<em>x</em>,<em>y</em>}，即 dp{�,�<em>i</em>,<em>j</em>}&#x3D;(�−1)×(<em>i</em>−1)×dp{�−1,�<em>i</em>−1,<em>j</em>}</p>
<p>考虑 dp{6,16,1} 和 dp{6,26,2} ：</p>
<p>大家考虑以下我们划分阶段得方式是什么，是圈数吗？</p>
<p>如果是圈数，我们发现好像{6,16,1} 和 {6,26,2} 两个状态之间没有什么关系？</p>
<p>单纯的圈数不存在关系。</p>
<p>我们思考一下，至少需要 <code>3</code> 个人才能组成一个圈。</p>
<p>所以第 <code>i</code> 个人加入时，要在前 <code>i-1</code> 个人中抽出两个人才能组成一个新圈。</p>
<p>所以原本的 dp{�−1,�<em>i</em>−1,<em>j</em>} 的状态就变成了，dp{�−3,�<em>i</em>−3,<em>j</em>}了。</p>
<p>由于是从 <code>i-1</code> 个人中抽出 <code>2</code> 个人所以，共计��−12<em>C**i</em>−12的抽取方式，<code>3</code> 个人我们已知能组成两种方案。</p>
<p>根据组合数求方案数的方式</p>
<p>2×��−12&#x3D;2×(�−1)!(�−3)!×22×<em>C**i</em>−12&#x3D;2×(<em>i</em>−3)!×2(<em>i</em>−1)!</p>
<p>2×��−12&#x3D;(�−1)!&#x2F;(�−3)!&#x3D;(�−1)∗(�−2)2×<em>C**i</em>−12&#x3D;(<em>i</em>−1)!&#x2F;(<em>i</em>−3)!&#x3D;(<em>i</em>−1)∗(<em>i</em>−2)</p>
<p>所以 <code>dp&#123;i,j+1&#125;=dp&#123;i-3,j&#125;×(i-1)×(i-2)</code></p>
<p>即 <code>dp&#123;i,j&#125;=dp&#123;i-3,j-1&#125;×(i-1)×(i-2)</code></p>
<p>就此我们得到状态转移方程</p>
<ul>
<li><code>dp&#123;i,j&#125;=dp&#123;i-1,j&#125;×(i-1)</code></li>
<li><code>dp&#123;i,j&#125;=dp&#123;i-3,j-1&#125;×(i-1)×(i-2)</code></li>
</ul>
<p>除此之外，我们还有要考虑的情况，即建不建立新圈都是 <code>dp&#123;i,j&#125;</code>的情况，所以这里不是等于，而是求和:</p>
<figure class="hljs highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dp&#123;i,j&#125;=dp&#123;i-1,j&#125;×(i-1)</span><br><span class="line">dp&#123;i,j&#125;=dp&#123;i,j&#125;+dp&#123;i-3,j-1&#125;×(i-1)×(i-2)</span><br></pre></td></tr></table></figure>

<p>比如：</p>
<p><code>dp&#123;7,2&#125;</code>可以由 <code>dp&#123;6,2&#125;</code>转移而来</p>
<p><code>dp&#123;7,2&#125;</code>也可以由 <code>dp&#123;4,1&#125;</code>转移而来</p>
<p>为什么这两种情况没有重叠，而是绝对异构的：</p>
<p><code>dp&#123;6,2&#125;</code>由 <code>dp&#123;3,1&#125;</code>转移而来</p>
<p><code>dp&#123;4,1&#125;</code>由 <code>dp&#123;3,1&#125;</code>转移而来</p>
<p><code>dp&#123;4,1&#125;</code>中 <code>1-4</code> 号是在同一个圈内的。</p>
<p><code>dp&#123;6,2&#125;</code>中 两个圈中的任意 <code>3</code> 个在一个圈内</p>
<p>不可能出现 <code>1-4</code> 在一个圈里的这种情况。</p>
<p>所以推导 <code>dp&#123;i,j&#125;</code></p>
<p><code>dp&#123;i,j&#125;</code>由 <code>dp&#123;i-i,j&#125;</code>转移而来 <code>dp&#123;i,j&#125;</code>也可以由 <code>dp&#123;i-3,j-1&#125;</code> 转移而来</p>
<figure class="hljs highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dp&#123;i-i,j&#125;`可以由 `dp&#123;i-2,j&#125;`或者 `dp&#123;i-4,j-1&#125;` `dp&#123;i-3,j-1&#125;`可以由 `dp&#123;i-4,j-1&#125;`或者 `dp&#123;i-6,j-2&#125;</span><br></pre></td></tr></table></figure>

<p>最终还是会到 <code>3,1</code>。</p>
<p>所以通过 <code>3</code>，通过两种方式走向了完全不同的方向。</p>
<p>至此我们轻松写出代码。</p>
<p>C++ 描述：</p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line">LL DP[<span class="number">3100</span>][<span class="number">3100</span>],mod;</span><br><span class="line"><span class="type">int</span> n,k;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;k&gt;&gt;mod;</span><br><span class="line">    DP[<span class="number">3</span>][<span class="number">1</span>]=<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">4</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;<span class="number">3</span>*j&lt;=i&amp;&amp;j&lt;=k;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            DP[i][j]=DP[i<span class="number">-1</span>][j]*(i<span class="number">-1</span>)%mod;</span><br><span class="line"></span><br><span class="line">            DP[i][j]=(DP[i][j]+DP[i<span class="number">-3</span>][j<span class="number">-1</span>]*(i<span class="number">-1</span>)*(i<span class="number">-2</span>))%mod;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;DP[n][k];</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Python 语言描述：</p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">n, k, mod = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())</span><br><span class="line"></span><br><span class="line">DP=[[<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span> (<span class="number">3100</span>)] <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span> (<span class="number">3100</span>) ]</span><br><span class="line"></span><br><span class="line">DP[<span class="number">3</span>][<span class="number">1</span>]=<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>,n+<span class="number">1</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,k+<span class="number">1</span>):</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="number">3</span>*j&gt;i:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        DP[i][j]=DP[i-<span class="number">1</span>][j]*(i-<span class="number">1</span>)%mod</span><br><span class="line"></span><br><span class="line">        DP[i][j]=(DP[i][j]+DP[i-<span class="number">3</span>][j-<span class="number">1</span>]*(i-<span class="number">1</span>)*(i-<span class="number">2</span>))%mod</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(DP[n][k])</span><br></pre></td></tr></table></figure>

<p>java 语言描述：</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="comment">// 1:无需package</span></span><br><span class="line"><span class="comment">// 2: 类名必须Main, 不可修改</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">long</span> DP[][]=<span class="keyword">new</span> <span class="title class_">long</span> [<span class="number">3100</span>][<span class="number">3100</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> n,k;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span> <span class="params">(String[] args)</span> <span class="keyword">throws</span> java.lang.Exception</span><br><span class="line"> &#123;</span><br><span class="line">     <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">     n=in.nextInt();</span><br><span class="line"></span><br><span class="line">     k=in.nextInt();</span><br><span class="line"></span><br><span class="line">    <span class="type">long</span> mod=in.nextLong();</span><br><span class="line"></span><br><span class="line">     DP[<span class="number">3</span>][<span class="number">1</span>]=<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">4</span>;i&lt;=n;i++)</span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;<span class="number">3</span>*j&lt;=i&amp;&amp;j&lt;=k;j++)</span><br><span class="line">            &#123;</span><br><span class="line">                DP[i][j]=DP[i-<span class="number">1</span>][j]*(i-<span class="number">1</span>)%mod;</span><br><span class="line"></span><br><span class="line">                DP[i][j]=(DP[i][j]+DP[i-<span class="number">3</span>][j-<span class="number">1</span>]*(i-<span class="number">1</span>)*(i-<span class="number">2</span>))%mod;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">  System.out.println(DP[n][k]);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="跳跃"><a href="#跳跃" class="headerlink" title="跳跃"></a>跳跃</h4><p>难度: 简单 标签: 动态规划, 搜索, 2021, 模拟赛</p>
<p>题目链接：<a target="_blank" rel="noopener" href="https://www.lanqiao.cn/problems/553/learning/">https://www.lanqiao.cn/problems/553/learning/</a></p>
<p><strong>题目描述：</strong> 开始时，小蓝站在方格图的左上角，即第 11 行第 11 列。</p>
<p>小蓝可以在方格图上走动，走动时，如果当前在第 �<em>r</em> 行第 �<em>c</em> 列，他不能走到行号比 �<em>r</em> 小的行，也不能走到列号比 �<em>c</em> 小的列。</p>
<p>同时，他一步走的直线距离不超过 33。</p>
<p>例如，如果当前小蓝在第 33 行第 55 列，他下一步可以走到</p>
<p>第 33 行第 66 列 第 33 行第 77 列 第 33 行第 88 列 第 44 行第 55 列 第 44 行第 66 列 第 44 行第 77 列 第 55 行第 55 列 第 55 行第 66 列 第 66 行第 55 列 小蓝最终要走到第 �<em>n</em> 行第 �<em>m</em> 列。</p>
<p>在图中，有的位置有奖励，走上去即可获得，有的位置有惩罚，走上去就要接受惩罚。奖励和惩罚最终抽象成一个权值，奖励为正，惩罚为负。</p>
<p>小蓝希望，从第 11 行第 11 列走到第 �<em>n</em> 行第 �<em>m</em> 列后，总的权值和最大。请问最大是多少？</p>
<p><strong>输入描述：</strong></p>
<p>输入的第一行包含两个整数 �,�<em>n</em>,<em>m</em>，表示图的大小。</p>
<p>接下来 �<em>n</em> 行，每行 �<em>m</em> 个整数，表示方格图中每个点的权值。</p>
<p>其中，1≤�≤1001≤<em>n</em>≤100，−104≤−104≤权值≤104≤104。</p>
<p><strong>输出描述：</strong></p>
<p>输出一个整数，表示最大权值和。</p>
<p><strong>输入输出样例：</strong></p>
<ul>
<li><p>样例 1： Input：</p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3 5</span><br><span class="line">-4 -5 -10 -3 1</span><br><span class="line">7 5 -9 3 -10</span><br><span class="line">10 -2 6 -10 -4</span><br></pre></td></tr></table></figure>

<p>output：</p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">15</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>运行限制:</strong></p>
<ul>
<li>最大运行时间：1s</li>
<li>最大运行内存: 128M</li>
</ul>
<p><strong>答案解析：</strong></p>
<p>由于这道题目数据较弱，大家可以使用搜索把所有情况都搜索到，每次到终点就保存最大值，知道遍历完所有的情况，然后输出最大值。</p>
<p>大家一定要写一遍 <code>DFS</code> 然后在看后边的 <code>DP</code> ,有时动态规划要从状态出发，有时动态规划又可以看成暴力搜索的剪枝。</p>
<p>我们先看一下搜索的解法：</p>
<p>因为只能向右下方移动，不存再走回头路的情况，所以不需要设置 <code>Vis</code> 数组。</p>
<p>C++ 描述：</p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAX 105</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n, m, sum = <span class="number">-0x3f3f3f3f</span>;</span><br><span class="line"><span class="type">int</span> map[MAX][MAX];</span><br><span class="line"><span class="type">int</span> nextt[<span class="number">9</span>][<span class="number">2</span>] = &#123; &#123;<span class="number">0</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="number">2</span>&#125;,&#123;<span class="number">2</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="number">3</span>&#125;,&#123;<span class="number">3</span>,<span class="number">0</span>&#125;,&#123;<span class="number">1</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">2</span>,<span class="number">1</span>&#125; &#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y,<span class="type">int</span> value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    value += map[x][y];</span><br><span class="line">    <span class="keyword">if</span> (x == n &amp;&amp; y == m)</span><br><span class="line">    &#123;</span><br><span class="line">        sum=<span class="built_in">max</span>(sum,value);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> tx = x + nextt[i][<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> ty = y + nextt[i][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (tx &lt;= n &amp;&amp; ty &lt;= m)</span><br><span class="line">            <span class="built_in">dfs</span>(tx, ty, value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; j++)</span><br><span class="line">            cin &gt;&gt; map[i][j];</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    cout &lt;&lt; sum;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Python 语言描述：</p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="comment"># 请在此输入您的代码</span></span><br><span class="line">n,m = <span class="built_in">map</span>(<span class="built_in">int</span>,<span class="built_in">input</span>().strip().split())</span><br><span class="line"></span><br><span class="line">mapTable = [<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>,<span class="built_in">input</span>().strip().split())) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n)]</span><br><span class="line"></span><br><span class="line">nextt = [[<span class="number">0</span>,<span class="number">1</span>],[<span class="number">0</span>,<span class="number">2</span>],[<span class="number">0</span>,<span class="number">3</span>],[<span class="number">1</span>,<span class="number">0</span>],[<span class="number">2</span>,<span class="number">0</span>],[<span class="number">3</span>,<span class="number">0</span>],[<span class="number">1</span>,<span class="number">1</span>],[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">2</span>,<span class="number">1</span>]] <span class="comment">#9种走的方式</span></span><br><span class="line"></span><br><span class="line">Sum=<span class="built_in">float</span>(<span class="string">&#x27;-inf&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">x,y,value</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">global</span> Sum</span><br><span class="line"></span><br><span class="line">    value+=mapTable[x][y]</span><br><span class="line">    <span class="keyword">if</span> x==n-<span class="number">1</span> <span class="keyword">and</span> y==m-<span class="number">1</span> :</span><br><span class="line">        Sum=<span class="built_in">max</span>(Sum,value)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">9</span>):</span><br><span class="line">        tx = x+nextt[i][<span class="number">0</span>]</span><br><span class="line">        ty = y+nextt[i][<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">if</span>  tx&lt;n <span class="keyword">and</span>  ty&lt;m :</span><br><span class="line"></span><br><span class="line">            dfs(tx,ty,value)</span><br><span class="line">dfs(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(Sum)</span><br></pre></td></tr></table></figure>

<p>java 语言描述：</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> n, m, Sum = -<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> [][] mapTable=<span class="keyword">new</span> <span class="title class_">int</span> [<span class="number">105</span>][<span class="number">105</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> nextt[][] =&#123; &#123;<span class="number">0</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="number">2</span>&#125;,&#123;<span class="number">2</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="number">3</span>&#125;,&#123;<span class="number">3</span>,<span class="number">0</span>&#125;,&#123;<span class="number">1</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">2</span>,<span class="number">1</span>&#125; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y,<span class="type">int</span> value)</span></span><br><span class="line">    &#123;</span><br><span class="line">        value += mapTable[x][y];</span><br><span class="line">        <span class="keyword">if</span> (x == n &amp;&amp; y == m)</span><br><span class="line">        &#123;</span><br><span class="line">             <span class="comment">// System.out.println(Sum);</span></span><br><span class="line">            Sum=Math.max(Sum,value);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">9</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">tx</span> <span class="operator">=</span> x + nextt[i][<span class="number">0</span>];</span><br><span class="line">            <span class="type">int</span> <span class="variable">ty</span> <span class="operator">=</span> y + nextt[i][<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span> (tx &lt;= n &amp;&amp; ty &lt;= m)</span><br><span class="line">                dfs(tx, ty, value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span> <span class="params">(String[] args)</span> <span class="keyword">throws</span> java.lang.Exception</span><br><span class="line"> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">    n=in.nextInt();</span><br><span class="line">    m=in.nextInt();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= m; j++)</span><br><span class="line">                mapTable[i][j]=in.nextInt();</span><br><span class="line"></span><br><span class="line">       dfs(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(Sum);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们再来看一下 DP 怎么解这个问题。</p>
<p><strong>定义状态：</strong></p>
<p>我们设 dp{�,�<em>i</em>,<em>j</em>} 当走到第 �<em>i</em> 行第 �<em>j</em> 列的值。</p>
<p><strong>找初始状态：</strong></p>
<p>dp{1,11,1}</p>
<p><strong>找状态转移：</strong></p>
<p>对于dp{�,�<em>i</em>,<em>j</em>} 会有 99 种不同的状态转移，我们很难知道当前的选择去怎样影响后续的值，这就是上边的搜索问题，我们难以找到一种 DP 思路去求解这个问题，但是我们反向考虑，既然dp{�,�<em>i</em>,<em>j</em>} 会有 99 种转移方式，那么当这 99 种状态的值为从这九种状态到达终点的最优解（最大值）时，那么我们就能轻易得到dp{�,�<em>i</em>,<em>j</em>} 的最大值为这九种最优解的最大值。</p>
<p>继续消解子问题，那么我们得到这 99 种最优子状态，继续根据同样的原理得到这 99 种最优的子状态的最优子状态。</p>
<p>持续消解，发现只有到了 dp{�,�<em>n</em>,<em>m</em>} 采用终止，这就是一个递归的过程。</p>
<figure class="hljs highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">value[n+<span class="number">5</span>][m+<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line">dp(x,y)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(x==n&amp;&amp;y==m)</span><br><span class="line">        <span class="keyword">return</span> value[n][m]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(越界)</span><br><span class="line">        <span class="keyword">return</span> 负无穷</span><br><span class="line"></span><br><span class="line">    value[x][y]=value[x][y]+max(dp(x+<span class="number">1</span>,y)......,dp(<span class="number">2</span>,<span class="number">1</span>))</span><br><span class="line">    <span class="keyword">return</span> dp(x,y)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这个过程是正推，根据递归写出递推来就变成了逆推，其实并不是根据动态规划写出来的逆推式，而是用正推递归变递推变来的，当然有的同学一眼看出来，那是非常优秀的。</p>
<p>这个题目数据量较小，用递归写不会爆，大家可以根据我的伪代码写写试试。</p>
<p>正推也是可以写出递推式，大家有兴趣可以尝试下。</p>
<p>C++ 描述：</p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAX 105</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n, m, sum = <span class="number">-0x3f3f3f3f</span>;</span><br><span class="line"><span class="type">int</span> map[MAX][MAX];</span><br><span class="line"><span class="type">int</span> nextt[<span class="number">9</span>][<span class="number">2</span>] = &#123; &#123;<span class="number">0</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="number">2</span>&#125;,&#123;<span class="number">2</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="number">3</span>&#125;,&#123;<span class="number">3</span>,<span class="number">0</span>&#125;,&#123;<span class="number">1</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">2</span>,<span class="number">1</span>&#125; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; j++)</span><br><span class="line">            cin &gt;&gt; map[i][j];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=n;i&gt;=<span class="number">1</span>;i--)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">for</span>(<span class="type">int</span> j=m;j&gt;=<span class="number">1</span>;j--)</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="keyword">if</span>(i==n&amp;&amp;j==m) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="type">int</span> maxTemp=<span class="number">-0x3f3f3f3f</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; <span class="number">9</span>; k++)</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="type">int</span> tx = i + nextt[k][<span class="number">0</span>];</span><br><span class="line">          <span class="type">int</span> ty = j + nextt[k][<span class="number">1</span>];</span><br><span class="line">          <span class="keyword">if</span> (tx &gt; n || ty &gt; m) <span class="keyword">continue</span>;</span><br><span class="line">          maxTemp=<span class="built_in">max</span>(maxTemp,map[tx][ty]);</span><br><span class="line">        &#125;</span><br><span class="line">        map[i][j]+=maxTemp;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">        <span class="comment">// for (int i = 1; i &lt;= n; i++)&#123;</span></span><br><span class="line">        <span class="comment">//   for (int j = 1; j &lt;= m; j++)</span></span><br><span class="line">        <span class="comment">//   cout &lt;&lt; map[i][j]&lt;&lt;&quot; &quot;;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//   cout&lt;&lt;endl;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">          cout &lt;&lt; map[<span class="number">1</span>][<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Python 语言描述：</p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">nextt = [[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">0</span>, <span class="number">2</span>], [<span class="number">0</span>, <span class="number">3</span>], [<span class="number">1</span>, <span class="number">0</span>], [<span class="number">2</span>, <span class="number">0</span>], [<span class="number">3</span>, <span class="number">0</span>], [<span class="number">1</span>, <span class="number">1</span>], [<span class="number">1</span>, <span class="number">2</span>], [<span class="number">2</span>, <span class="number">1</span>]]  <span class="comment"># 9种走的方式</span></span><br><span class="line"></span><br><span class="line">n, m = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())</span><br><span class="line"></span><br><span class="line">DP = [<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n)]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n - <span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(m - <span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> i == n - <span class="number">1</span> <span class="keyword">and</span> j == m - <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        maxTemp = <span class="built_in">float</span>(<span class="string">&#x27;-inf&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">9</span>):</span><br><span class="line">            tx = i + nextt[k][<span class="number">0</span>]</span><br><span class="line">            ty = j + nextt[k][<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> tx &gt;= n <span class="keyword">or</span> ty &gt;= m:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">            maxTemp = <span class="built_in">max</span>(maxTemp, DP[tx][ty])</span><br><span class="line"></span><br><span class="line">        DP[i][j] += maxTemp</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(DP[<span class="number">0</span>][<span class="number">0</span>])</span><br></pre></td></tr></table></figure>

<p>java 语言描述：</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">test</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> n, m, Sum = -<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> [][] mapTable=<span class="keyword">new</span> <span class="title class_">int</span> [<span class="number">105</span>][<span class="number">105</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> nextt[][] =&#123; &#123;<span class="number">0</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="number">2</span>&#125;,&#123;<span class="number">2</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="number">3</span>&#125;,&#123;<span class="number">3</span>,<span class="number">0</span>&#125;,&#123;<span class="number">1</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">2</span>,<span class="number">1</span>&#125; &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span> <span class="params">(String[] args)</span> <span class="keyword">throws</span> java.lang.Exception</span><br><span class="line"> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">      n=in.nextInt();</span><br><span class="line">      m=in.nextInt();</span><br><span class="line">     <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= m; j++)</span><br><span class="line">                    mapTable[i][j]=in.nextInt();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=n;i&gt;=<span class="number">1</span>;i--)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">for</span>(<span class="type">int</span> j=m;j&gt;=<span class="number">1</span>;j--)</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="keyword">if</span>(i==n&amp;&amp;j==m) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="type">int</span> maxTemp=-<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; <span class="number">9</span>; k++)</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="type">int</span> <span class="variable">tx</span> <span class="operator">=</span> i + nextt[k][<span class="number">0</span>];</span><br><span class="line">          <span class="type">int</span> <span class="variable">ty</span> <span class="operator">=</span> j + nextt[k][<span class="number">1</span>];</span><br><span class="line">          <span class="keyword">if</span> (tx &gt; n || ty &gt; m) <span class="keyword">continue</span>;</span><br><span class="line">          maxTemp=Math.max(maxTemp,mapTable[tx][ty]);</span><br><span class="line">        &#125;</span><br><span class="line">        mapTable[i][j]+=maxTemp;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  System.out.println(mapTable[<span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>show: step version: 1.0 enable_checker: true</p>
<hr>
<h1 id="动态规划背包问题"><a href="#动态规划背包问题" class="headerlink" title="动态规划背包问题"></a>动态规划背包问题</h1><h2 id="实验介绍-1"><a href="#实验介绍-1" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本节课我们进入动态规划课程的学习，动态规划是一种多阶段的决策过程最优化的问题。</p>
<p>本课程对于算法学习非常重要，但是又比较难，我们讲解分 33 个章节进行动态规划问题的讲解。</p>
<p>今天的课程是动态规划系列的第二个章节。</p>
<h3 id="知识点-1"><a href="#知识点-1" class="headerlink" title="知识点"></a>知识点</h3><ul>
<li>0-1 背包</li>
<li>完全背包</li>
<li>多重背包问题</li>
</ul>
<h2 id="背包问题"><a href="#背包问题" class="headerlink" title="背包问题"></a>背包问题</h2><p>我们上一章课程讲解了动态规划算法的基本原理，包括动态规划的“为什么使用动态规划算法”、“多阶段决策过程最优化问题”、“动态规划中的术语解释”，“可解动态鬼规划的性质”等知识点。</p>
<p>今天我们来讲一下，动态规划中的背包问题，背包问题，是比赛中常考的问题，也是动态规划入门的问题，其实动态规划并没有套路，只是这类问题有着明确的特点，如果你做的题足够多的话，你会发现很多问题都会有模板。</p>
<p>背包问题基本都是不可拆分背包，因为可拆分背包是贪心去求解的问题。我们今天讲三种背包的基本模型：1.0-1 背包、2.完全背包、3.多重背包问题。</p>
<h4 id="0-1-背包问题"><a href="#0-1-背包问题" class="headerlink" title="0-1 背包问题"></a>0-1 背包问题</h4><p>0-1 背包是背包问题的入门的问题。但是背包问题的模板也是最简单的。</p>
<p><strong>0-1 背包的问题是什么呢？</strong></p>
<p>其问题的简单表述为，有 N 件物品，每件物品只有一件。每个物品都有一个价值��<em>w**i</em>，每件物品都有一个占一个部分空间��<em>c**i</em>,已知你的背包共计可承重 C(Contains),现在让你求你的背包最多装得下多少����<em>w<strong>M</strong>a**x</em>，即求你背包中物品的最大价值����<em>w<strong>M</strong>a**x</em>。</p>
<p><strong>对于这个问题我们有以下模板:</strong></p>
<p>1.定义变量并输入</p>
<p>C++ 语言描述：</p>
<figure class="hljs highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义V,W用于保存价值和质量</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Maxn 5000</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> c[Maxn],w[Maxn];</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> C;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输入</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"></span><br><span class="line">cin&gt;&gt; n;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">    cin&gt;&gt;c[i]&gt;&gt;w[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cin&gt;&gt;C;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建动态规划数组</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> dp[Maxn];</span><br></pre></td></tr></table></figure>

<p>Python 语言描述：</p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line">c = []</span><br><span class="line">w = []</span><br><span class="line">dp = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    n, C = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().strip().split())</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line"></span><br><span class="line">        tempC, tempW = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().strip().split())</span><br><span class="line"></span><br><span class="line">        c.append(tempC)</span><br><span class="line"></span><br><span class="line">        w.append(tempW)</span><br></pre></td></tr></table></figure>

<p>java 语言描述：</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.Math.max;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>  <span class="keyword">class</span>  <span class="title class_">Main</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> []c;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> []w;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> dp[];</span><br><span class="line"></span><br><span class="line">   <span class="keyword">static</span> <span class="type">int</span> C;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> n;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">        n=in.nextInt();</span><br><span class="line"></span><br><span class="line">       C=in.nextInt();</span><br><span class="line"></span><br><span class="line">       c=<span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">50</span>];</span><br><span class="line"></span><br><span class="line">       w=<span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">50</span>];</span><br><span class="line"></span><br><span class="line">       dp=<span class="keyword">new</span> <span class="title class_">int</span> [C+<span class="number">50</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line"></span><br><span class="line">             c[i]=in.nextInt();</span><br><span class="line">             w[i]=in.nextInt();;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.执行算法</p>
<p>我们先去找到状态转移方程</p>
<figure class="hljs highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dp[i][j]=max(dp[i][j],dp[i−1]j−c[i]]+w[i])</span><br></pre></td></tr></table></figure>

<p>含义，选到第 i 件物品，且背包现在重量为 j。</p>
<p>那么考虑这个状态会由什么状态转移而来，肯定是选到第 i-1 件的时候。</p>
<p>如果选了第 i 件，那么就是由 <code>dp[i−1]j−c[i]]</code>转移而来。</p>
<p>如果不选第 i 件，那么就是由 <code>dp[i][j]</code>转移而来。</p>
<p>那么已知 <code>dp[i−1]j−c[i]]和 dp[i][j]</code>都为各自最优的状态，那我们直接取最优状态即可。</p>
<p>C++ 描述：</p>
<figure class="hljs highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=C;j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(j&gt;=c[i])</span><br><span class="line">            dp[i][j]=max(dp[i][j],dp[i<span class="number">-1</span>][j-c[i]]+w[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Python 语言描述:</p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">reversed</span>(C+<span class="number">1</span>):</span><br><span class="line"></span><br><span class="line">        dp[i][j]=<span class="built_in">max</span>(dp[i][j],dp[i-<span class="number">1</span>][j-c[i]]+w[i])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(dp[C])</span><br></pre></td></tr></table></figure>

<p>Java 语言描述：</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=C;j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(j&gt;=c[i])</span><br><span class="line">            dp[i][j]=max(dp[i][j],dp[i-<span class="number">1</span>][j-c[i]]+w[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        System.out.println(dp[C]);</span><br></pre></td></tr></table></figure>

<p>空间优化：</p>
<p>因为状态转移每次只与上一层有关，所以用一个一维数组就可以。</p>
<p>为什么从大到小遍历， 看 ��[�]&#x3D;��[�−�[�]]+�[�]<em>d**p</em>[<em>j</em>]&#x3D;<em>d**p</em>[<em>j</em>−<em>c</em>[<em>i</em>]]+<em>w</em>[<em>i</em>] 这一状态转移，是根据小的改大的，如果先把小的改了，那小的还会被用到，数据就不对了，所以从小到大。</p>
<p>C++ 描述；</p>
<figure class="hljs highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++) <span class="comment">//遍历每一件物品</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=C;j&gt;=c[i];j--)</span><br><span class="line">    <span class="comment">//遍历背包容量，表示在上一层的基础上，容量为J时，第i件物品装或不装的最优解;</span></span><br><span class="line">        dp[j]=max(dp[j-c[i]]+w[i],dp[j]);</span><br></pre></td></tr></table></figure>

<p>Python 语言描述:</p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">reversed</span>(<span class="built_in">range</span>(c[i],C+<span class="number">1</span>)):</span><br><span class="line">        dp[j] = <span class="built_in">max</span>(dp[j - c[i]] + w[i], dp[j]);</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(dp[C])</span><br></pre></td></tr></table></figure>

<p>Java 语言描述：</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) <span class="comment">//遍历每一件物品</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> C; j &gt;= c[i]; j--)</span><br><span class="line">        <span class="comment">//遍历背包容量，表示在上一层的基础上，容量为J时，第i件物品装或不装的最优解;</span></span><br><span class="line">        dp[j] = max(dp[j - c[i]] + w[i], dp[j]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">System.out.println(dp[C]);</span><br></pre></td></tr></table></figure>

<p>初始化细节：</p>
<ul>
<li>装满 ��[0]&#x3D;0<em>d**p</em>[0]&#x3D;0，其余赋值 −���−<em>I<strong>N</strong>F</em>；</li>
<li>不装满全初始化为 00；</li>
</ul>
<p>C++ 语言描述：</p>
<figure class="hljs highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//装满</span></span><br><span class="line"><span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line"></span><br><span class="line">dp[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//不装满</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">memset</span>(dp, <span class="number">-0x3f</span>, <span class="keyword">sizeof</span>(dp));</span><br></pre></td></tr></table></figure>

<p>Python 语言描述:</p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 装满</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(C + <span class="number">50</span>):</span><br><span class="line"></span><br><span class="line">    dp.append(-<span class="number">0x3f3f3f3f</span>)</span><br><span class="line"></span><br><span class="line">dp[<span class="number">0</span>]=<span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 不装满</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(C + <span class="number">50</span>):</span><br><span class="line"></span><br><span class="line">    dp.append(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p>Java 语言描述：</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//装满</span></span><br><span class="line">Arrays.fill(dp, -<span class="number">0x3f3f3f3f</span>);</span><br><span class="line"></span><br><span class="line">dp[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//不装满</span></span><br><span class="line"></span><br><span class="line">memset(dp, -<span class="number">0x3f</span>, sizeof(dp));</span><br></pre></td></tr></table></figure>

<p><strong>题目描述:</strong></p>
<p>题目链接：<a target="_blank" rel="noopener" href="https://www.lanqiao.cn/problems/1174/learning/">https://www.lanqiao.cn/problems/1174/learning/</a></p>
<p>小明有一个容量为 �<em>V</em> 的背包。</p>
<p>这天他去商场购物，商场一共有 �<em>N</em> 件物品，第 �<em>i</em> 件物品的体积为 �<em>w</em> ，价值为 �<em>v</em>，每种物品都只有一个。</p>
<p>小明想知道在购买的物品总体积不超过 �<em>V</em> 的情况下所能获得的最大价值为多少，请你帮他算算。</p>
<p><strong>输入描述:</strong></p>
<p>输入第 11 行包含两个正整数 �,�<em>N</em>,<em>V</em>，表示商场物品的数量和小明的背包容量。</p>
<p>第 2∼�+12∼<em>N</em>+1 行包含 22 个正整数 �,�<em>w</em>,<em>v</em>，表示物品的体积和价值。</p>
<p><strong>样例:</strong></p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">输入：</span><br><span class="line"></span><br><span class="line">5 20</span><br><span class="line">1 6</span><br><span class="line">2 5</span><br><span class="line">3 8</span><br><span class="line">5 15</span><br><span class="line">3 3</span><br><span class="line">输出：</span><br><span class="line"></span><br><span class="line">37</span><br></pre></td></tr></table></figure>

<p><strong>运行限制:</strong></p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. 最大运行时间：1s</span><br><span class="line">2. 最大运行内存：128M</span><br></pre></td></tr></table></figure>

<p><strong>答案解析：</strong></p>
<p><strong>C++ 解题代码</strong></p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Maxn 5000</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> c[Maxn], w[Maxn];</span><br><span class="line"><span class="type">int</span> dp[Maxn];</span><br><span class="line"><span class="type">int</span> C;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输入</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    cin &gt;&gt; C;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line"></span><br><span class="line">        cin &gt;&gt; c[i] &gt;&gt; w[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> dp[Maxn];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="built_in">sizeof</span>(dp)); <span class="comment">//不装满</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建动态规划数组</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) <span class="comment">//遍历每一件物品</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = C; j &gt;= c[i]; j--)</span><br><span class="line">            <span class="comment">//遍历背包容量，表示在上一层的基础上，容量为J时，第i件物品装或不装的最优解;</span></span><br><span class="line">            dp[j] = <span class="built_in">max</span>(dp[j - c[i]] + w[i], dp[j]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; dp[C] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Python 解题代码</strong></p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">c = []</span><br><span class="line">w = []</span><br><span class="line">dp = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    n, C = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().strip().split())</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        tempC, tempW = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().strip().split())</span><br><span class="line">        c.append(tempC)</span><br><span class="line">        w.append(tempW)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(C + <span class="number">50</span>):</span><br><span class="line">        dp.append(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">reversed</span>(<span class="built_in">range</span>(c[i],C+<span class="number">1</span>)):</span><br><span class="line">            dp[j] = <span class="built_in">max</span>(dp[j - c[i]] + w[i], dp[j]);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(dp[C])</span><br></pre></td></tr></table></figure>

<p><strong>Java 解题代码</strong></p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.Math.max;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>  <span class="keyword">class</span>  <span class="title class_">Main</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> []c;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> []w;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> dp[];</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> C;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> n;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">        n=in.nextInt();</span><br><span class="line">        C=in.nextInt();</span><br><span class="line">        c=<span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">50</span>];</span><br><span class="line">        w=<span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">50</span>];</span><br><span class="line">        dp=<span class="keyword">new</span> <span class="title class_">int</span> [C+<span class="number">50</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line"></span><br><span class="line">             c[i]=in.nextInt();</span><br><span class="line">             w[i]=in.nextInt();;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Arrays.fill(dp, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) <span class="comment">//遍历每一件物品</span></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> C; j &gt;= c[i]; j--)</span><br><span class="line">                <span class="comment">//遍历背包容量，表示在上一层的基础上，容量为J时，第i件物品装或不装的最优解;</span></span><br><span class="line">                dp[j] = max(dp[j - c[i]] + w[i], dp[j]);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(dp[C]);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="完全背包问题"><a href="#完全背包问题" class="headerlink" title="完全背包问题"></a>完全背包问题</h4><p>完全背包是背包问题的入门的问题。</p>
<p>根据 <code>0-1</code> 背包写出模板也是很简单的。</p>
<p><strong>完全背包的问题是什么呢？</strong></p>
<p>其问题的简单表述为，有 �<em>N</em> 件物品，每件物品有无数件。每个物品都有一个价值��<em>w**i</em>，每件物品都有一个占一个部分空间��<em>c**i</em>,已知你的背包共计可承重 �(��������)<em>C</em>(<em>C<strong>o</strong>n<strong>t</strong>a<strong>i</strong>n**s</em>),现在让你求你的背包最多装得下多少����<em>w<strong>M</strong>a**x</em>，即求你背包中物品的最大价值����<em>w<strong>M</strong>a**x</em>。</p>
<p><strong>对于这个问题我们有以下模板:</strong></p>
<p>1.定义变量并输入</p>
<p>参考 0-1 背包。</p>
<p>2.执行算法</p>
<p>我们先去找到状态转移方程</p>
<figure class="hljs highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dp[i][j]=max(dp[i][j],dp[i]j−c[i]]+w[i])</span><br></pre></td></tr></table></figure>

<p>含义，选到第 �<em>i</em> 件物品，且背包现在重量为 �<em>j</em>。</p>
<p>那么考虑这个状态会由什么状态转移而来，肯定是选到第 �−1<em>i</em>−1 件的时候,或者选了若干次第 �<em>i</em> 件。</p>
<p>如果不选第 �<em>i</em> 种，那么就是由 <code>dp[i-1][j]</code>转移而来。</p>
<p>如果选了第 �<em>i</em> 件，那么就是由 <code>dp[i−1]j−c[i]]</code>转移而来。</p>
<p>或者在某一刻，不在选第 �<em>i</em> 件了，那么就是有 <code>dp[i][j]</code>转移而来。</p>
<p>那么已知 <code>dp[i]j−c[i]]</code>和 <code>dp[i][j]</code>都为各自最优的状态，那我们直接取最优状态即可。</p>
<p>C++ 描述：</p>
<figure class="hljs highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=C;j++)&#123;</span><br><span class="line">        dp[i][j]=dp[i<span class="number">-1</span>][j];</span><br><span class="line">        <span class="keyword">if</span>(j&gt;=c[i])  dp[i][j]=<span class="built_in">max</span>(dp[i][j],dp[i][j-c[i]]+w[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;dp[n][C]&lt;&lt;endl;</span><br></pre></td></tr></table></figure>

<p>Python 语言描述:</p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(C+<span class="number">1</span>):</span><br><span class="line">        dp[i][j]=dp[i-<span class="number">1</span>][j];</span><br><span class="line">        dp[i][j]=<span class="built_in">max</span>(dp[i][j],dp[i][j-c[i]]+w[i])</span><br><span class="line"><span class="built_in">print</span>(dp[n][C])</span><br></pre></td></tr></table></figure>

<p>Java 语言描述：</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=C;j++)&#123;</span><br><span class="line">        dp[i][j]=dp[i-<span class="number">1</span>][j];</span><br><span class="line">        <span class="keyword">if</span>(j&gt;=c[i])dp[i][j]=max(dp[i][j],dp[i][j-c[i]]+w[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> System.out.println(dp[n][C]);</span><br></pre></td></tr></table></figure>

<p>空间优化：</p>
<p>因为状态转移每次只与上一层有关，所以用一个一维数组就可以。</p>
<p>为什么从小到大遍历， 看 ��[�]&#x3D;��[�−�[�]]+�[�]<em>d**p</em>[<em>j</em>]&#x3D;<em>d**p</em>[<em>j</em>−<em>c</em>[<em>i</em>]]+<em>w</em>[<em>i</em>] 这一状态转移，是根据小的改大的，而此时的含义为选了 <code>x</code> 件后的容量与质量，跟 <code>01</code> 背包类似，但含义不同，处理方式上也有本质区别，处理完一件后在处理下件。</p>
<p>C++ 描述；</p>
<figure class="hljs highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++) <span class="comment">//遍历每一件物品</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=c[i];j&lt;=C;j++)</span><br><span class="line">    <span class="comment">//遍历背包容量，表示在上一层的基础上，容量为J时，第i件物品装或不装的最优解;</span></span><br><span class="line">        dp[j]=max(dp[j-c[i]]+w[i],dp[j]);</span><br></pre></td></tr></table></figure>

<p>Python 语言描述:</p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(c[i],C+<span class="number">1</span>):</span><br><span class="line">        dp[j] = <span class="built_in">max</span>(dp[j - c[i]] + w[i], dp[j]);</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(dp[C])</span><br></pre></td></tr></table></figure>

<p>Java 语言描述：</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) <span class="comment">//遍历每一件物品</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=c[i];j&lt;=C;j++)</span><br><span class="line">        <span class="comment">//遍历背包容量，表示在上一层的基础上，容量为J时，第i件物品装或不装的最优解;</span></span><br><span class="line">        dp[j] = max(dp[j - c[i]] + w[i], dp[j]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">System.out.println(dp[C]);</span><br></pre></td></tr></table></figure>

<p>初始化细节：</p>
<p>与 <code>0 - 1</code>背包相同。</p>
<ul>
<li>装满 ��[0]&#x3D;0<em>d**p</em>[0]&#x3D;0，其余赋值−���−<em>I<strong>N</strong>F</em>；</li>
<li>不装满全初始化为 00；</li>
</ul>
<p><strong>题目描述:</strong></p>
<p>题目链接：<a target="_blank" rel="noopener" href="https://www.lanqiao.cn/problems/1175/learning/">https://www.lanqiao.cn/problems/1175/learning/</a></p>
<p>小明有一个容量为 �<em>V</em> 的背包。</p>
<p>这天他去商场购物，商场一共有 �<em>N</em> 件物品，第 �<em>i</em> 件物品的体积为 �<em>w</em> ，价值为 �<em>v</em>，每种物品都有无限多个。</p>
<p>小明想知道在购买的物品总体积不超过 �<em>V</em> 的情况下所能获得的最大价值为多少，请你帮他算算。</p>
<p><strong>输入描述:</strong></p>
<p>输入第 11 行包含两个正整数 �,�<em>N</em>,<em>V</em>，表示商场物品的数量和小明的背包容量。</p>
<p>第 2∼�+12∼<em>N</em>+1 行包含 22 个正整数 �,�<em>w</em>,<em>v</em>，表示物品的体积和价值。</p>
<p><strong>样例:</strong></p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">输入：</span><br><span class="line"></span><br><span class="line">5 20</span><br><span class="line">1 6</span><br><span class="line">2 5</span><br><span class="line">3 8</span><br><span class="line">5 15</span><br><span class="line">3 3</span><br><span class="line">输出：</span><br><span class="line"></span><br><span class="line">120</span><br></pre></td></tr></table></figure>

<p><strong>运行限制:</strong></p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. 最大运行时间：1s</span><br><span class="line">2. 最大运行内存：128M</span><br></pre></td></tr></table></figure>

<p><strong>答案解析：</strong></p>
<p><strong>C++ 解题代码</strong></p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Maxn 5000</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> c[Maxn], w[Maxn];</span><br><span class="line"><span class="type">int</span> dp[Maxn];</span><br><span class="line"><span class="type">int</span> C;</span><br><span class="line"><span class="comment">// 输入</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    cin &gt;&gt; C;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line"></span><br><span class="line">        cin &gt;&gt; c[i] &gt;&gt; w[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> dp[Maxn];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="built_in">sizeof</span>(dp)); <span class="comment">//不装满</span></span><br><span class="line">    <span class="comment">//创建动态规划数组</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) <span class="comment">//遍历每一件物品</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=c[i];j&lt;=C;j++)</span><br><span class="line">            <span class="comment">//遍历背包容量，表示在上一层的基础上，容量为J时，第i件物品装或不装的最优解;</span></span><br><span class="line">            dp[j] = <span class="built_in">max</span>(dp[j - c[i]] + w[i], dp[j]);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; dp[C] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Python 解题代码</strong></p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line">c = []</span><br><span class="line">w = []</span><br><span class="line">dp = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    n, C = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().strip().split())</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        tempC, tempW = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().strip().split())</span><br><span class="line">        c.append(tempC)</span><br><span class="line">        w.append(tempW)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(C + <span class="number">50</span>):</span><br><span class="line">        dp.append(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(c[i],C+<span class="number">1</span>):</span><br><span class="line">            dp[j] = <span class="built_in">max</span>(dp[j - c[i]] + w[i], dp[j])</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(dp[C])</span><br></pre></td></tr></table></figure>

<p><strong>Java 解题代码</strong></p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.Math.max;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>  <span class="keyword">class</span>  <span class="title class_">Main</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> []c;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> []w;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> dp[];</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> C;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> n;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">        n=in.nextInt();</span><br><span class="line">        C=in.nextInt();</span><br><span class="line">        c=<span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">50</span>];</span><br><span class="line">        w=<span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">50</span>];</span><br><span class="line">        dp=<span class="keyword">new</span> <span class="title class_">int</span> [C+<span class="number">50</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">             c[i]=in.nextInt();</span><br><span class="line">             w[i]=in.nextInt();;</span><br><span class="line">        &#125;</span><br><span class="line">        Arrays.fill(dp, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) <span class="comment">//遍历每一件物品</span></span><br><span class="line">        &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> j=c[i];j&lt;=C;j++)</span><br><span class="line">                <span class="comment">//遍历背包容量，表示在上一层的基础上，容量为J时，第i件物品装或不装的最优解;</span></span><br><span class="line">                dp[j] = max(dp[j - c[i]] + w[i], dp[j]);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(dp[C])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="多重背包"><a href="#多重背包" class="headerlink" title="多重背包"></a>多重背包</h4><p>多重背包是背包问题的入门的问题。 根据 0-1 背包写出模板也是很简单的。</p>
<p><strong>多重背包的问题是什么呢？</strong></p>
<p>其问题的简单表述为，有 N 件物品，每件物品有��<em>s**i</em>件。每个物品都有一个价值��<em>w**i</em>，每件物品都有一个占一个部分空间��<em>c**i</em>,已知你的背包共计可承重 C(Contains),现在让你求你的背包最多装得下多少����<em>w<strong>M</strong>a**x</em>，即求你背包中物品的最大价值����<em>w<strong>M</strong>a**x</em>。</p>
<p><strong>对于这个问题我们有以下模板:</strong></p>
<p>1.定义变量并输入</p>
<p>参考 <code>0-1</code> 背包。</p>
<p>2.执行算法</p>
<p>这次我们直接空间优化，不再讲解二维做法：</p>
<p>多重背包是可以不选，也可以选 <code>1</code> 个，可以选多个，而 <code>0-1</code> 背包只能选 <code>0</code> 个或者 <code>1</code>个。</p>
<p>那就直接把种物品分开，即可比如：</p>
<p>每个盘子 <code>3</code> 块钱，我有 <code>2</code> 个。每双筷子 <code>1</code> 块钱，我有 <code>10</code> 双，每对刀叉 <code>3</code> 块钱，我有 <code>3</code> 个。</p>
<p>那么我就可以拆成，有 <code>2</code> 个三块的盘子，每个可以选也可以不选，就变成了 <code>0-1</code> 背包。</p>
<p>也就是说，对于每种是可以选多个，那就直接拆分成独立的个体就可以了。</p>
<p>C++ 描述；</p>
<figure class="hljs highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line"><span class="comment">//遍历每一个物品</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=s[i];j++)</span><br><span class="line">    <span class="comment">//遍历物品的数量</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> k=C;k&gt;=c[i];k--)</span><br><span class="line">        <span class="comment">//当做01背包来处理</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//取01背包情况的dp[k]和dp[k-c[i]]+w[i]的最大值</span></span><br><span class="line">            dp[k]=max( dp[k],dp[k-c[i]]+w[i] );</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<p>Python 语言描述:</p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(s[i]+<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">reversed</span>(<span class="built_in">range</span>(c[i],C+<span class="number">1</span>)):</span><br><span class="line">            dp[k]=<span class="built_in">max</span>( dp[k],dp[k-c[i]]+w[i] )</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(dp[C])</span><br></pre></td></tr></table></figure>

<p>Java 语言描述：</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line"><span class="comment">//遍历每一个物品</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=s[i];j++)</span><br><span class="line">    <span class="comment">//遍历物品的数量</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> k=C;k&gt;=c[i];k--)</span><br><span class="line">        <span class="comment">//当做01背包来处理</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//取01背包情况的dp[k]和dp[k-c[i]]+w[i]的最大值</span></span><br><span class="line">            dp[k]=max( dp[k],dp[k-c[i]]+w[i] );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">System.out.println(dp[C]);</span><br></pre></td></tr></table></figure>

<p>不顾这样做大概率会超时，我们换一种理解方式：</p>
<p>在这两种问题中，我们需要考虑每个物品选择取或不取的情况，通过动态规划来求解最优解。</p>
<p>0101背包问题中，对于每个物品�<em>i</em>，我们有两个选择：选取或不选取。状态转移方程为： [ dp[j] &#x3D; \max(dp[j], dp[j - v[i]] + w[i]) ]</p>
<p>多重背包问题中，对于每个物品i，我们可以选择取00个、11个、22个…直到�[�]<em>s</em>[<em>i</em>]个。状态转移方程为： [ dp[j] &#x3D; \max(dp[j], dp[j - v[i] \cdot k] + w[i] \cdot k) ] 其中，k的取值范围是[0, 1, 2, …, s[i]]</p>
<p>这两个问题的解决思路相似，都是通过填充一个二维的动态规划数组��<em>d**p</em>，其中��[�]<em>d**p</em>[<em>j</em>]表示背包容量为j时的最优解。在状态转移时，我们考虑了每个物品的选择情况，求解最终的最优解。</p>
<p>初始化细节：</p>
<p>与 0−10−1 背包相同。</p>
<ul>
<li>装满 ��[0]&#x3D;0<em>d**p</em>[0]&#x3D;0，其余赋值−���−<em>I<strong>N</strong>F</em>；</li>
<li>不装满全初始化为 00；</li>
</ul>
<p><strong>题目描述:</strong></p>
<p>题目链接：<a target="_blank" rel="noopener" href="https://www.lanqiao.cn/problems/1176/learning/">https://www.lanqiao.cn/problems/1176/learning/</a></p>
<p>小明有一个容量为 �<em>V</em>的背包。</p>
<p>这天他去商场购物，商场一共有 �<em>N</em> 件物品，第 �<em>i</em> 件物品的体积为 �<em>w</em>，价值为 �<em>v</em>，每种物品都有�<em>s</em>个。</p>
<p>小明想知道在购买的物品总体积不超过 �<em>V</em> 的情况下所能获得的最大价值为多少，请你帮他算算。</p>
<p><strong>输入描述:</strong></p>
<p>输入第 11 行包含两个正整数 �,�<em>N</em>,<em>V</em>，表示商场物品的数量和小明的背包容量。</p>
<p>第 2∼�+12∼<em>N</em>+1 行包含 33 个正整数 �,��<em>w</em>,<em>v**s</em>,表示物品的体积、价值和数量。</p>
<p><strong>样例:</strong></p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">输入：</span><br><span class="line"></span><br><span class="line">3 30</span><br><span class="line">1 2 3</span><br><span class="line">4 5 6</span><br><span class="line">7 8 9</span><br><span class="line">输出：</span><br><span class="line"></span><br><span class="line">39</span><br></pre></td></tr></table></figure>

<p><strong>运行限制:</strong></p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. 最大运行时间：1s</span><br><span class="line">2. 最大运行内存：128M</span><br></pre></td></tr></table></figure>

<p><strong>答案解析：</strong></p>
<p><strong>C++ 解题代码</strong></p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Maxn 5000</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> c[Maxn], w[Maxn], s[Maxn];</span><br><span class="line"><span class="type">int</span> dp[Maxn];</span><br><span class="line"><span class="type">int</span> C;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输入</span></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    cin &gt;&gt; C;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; c[i] &gt;&gt; w[i] &gt;&gt; s[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> dp[Maxn];</span><br><span class="line">    <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="built_in">sizeof</span>(dp)); <span class="comment">//不装满</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建动态规划数组</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line"><span class="comment">//遍历每一个物品</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=C;j&gt;=c[i];j--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;=s[i] &amp;&amp; j&gt;=k*c[i];k++)</span><br><span class="line">                <span class="comment">//遍历物品的数量</span></span><br><span class="line">                dp[j]=<span class="built_in">max</span>(dp[j],dp[j-k*c[i]]+w[i]*k);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; dp[C] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Python 解题代码</strong></p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">c = []</span><br><span class="line">w = []</span><br><span class="line">s=[]</span><br><span class="line">dp = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    n, C = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().strip().split())</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line"></span><br><span class="line">        tempC, tempW ,tempS= <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().strip().split())</span><br><span class="line">        c.append(tempC)</span><br><span class="line">        w.append(tempW)</span><br><span class="line">        s.append(tempS)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(C + <span class="number">50</span>):</span><br><span class="line">        dp.append(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">reversed</span>(<span class="built_in">range</span>(c[i],C+<span class="number">1</span>)):</span><br><span class="line">            <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(s[i]+<span class="number">1</span>):</span><br><span class="line">                <span class="keyword">if</span> j&lt;k*c[i]:</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                dp[j] = <span class="built_in">max</span>(dp[j], dp[j - k * c[i]] + w[i] * k)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(dp[C])</span><br></pre></td></tr></table></figure>

<p><strong>Java 解题代码</strong></p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.Math.max;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>  <span class="keyword">class</span>  <span class="title class_">Main</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">static</span> <span class="type">int</span> []c;</span><br><span class="line">        <span class="keyword">static</span> <span class="type">int</span> []w;</span><br><span class="line">        <span class="keyword">static</span> <span class="type">int</span> []s;</span><br><span class="line">        <span class="keyword">static</span> <span class="type">int</span> dp[];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">            <span class="type">int</span> n=in.nextInt();</span><br><span class="line">            <span class="type">int</span> C=in.nextInt();</span><br><span class="line">            c=<span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">50</span>];</span><br><span class="line">            w=<span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">50</span>];</span><br><span class="line">            s=<span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">50</span>];</span><br><span class="line">            dp=<span class="keyword">new</span> <span class="title class_">int</span> [C+<span class="number">50</span>];</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line"></span><br><span class="line">                c[i]=in.nextInt();</span><br><span class="line">                w[i]=in.nextInt();</span><br><span class="line">                s[i]=in.nextInt();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            Arrays.fill(dp, <span class="number">0</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line"><span class="comment">//遍历每一个物品</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> j=C;j&gt;=c[i];j--)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;=s[i] &amp;&amp; j&gt;=k*c[i];k++)</span><br><span class="line">                        <span class="comment">//遍历物品的数量</span></span><br><span class="line">                        dp[j]=max(dp[j],dp[j-k*c[i]]+w[i]*k);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println(dp[C]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>show: step version: 1.0 enable_checker: true</p>
<hr>
<h1 id="动态规划线性-DP"><a href="#动态规划线性-DP" class="headerlink" title="动态规划线性 DP"></a>动态规划线性 DP</h1><h2 id="实验介绍-2"><a href="#实验介绍-2" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本课程对于算法学习非常重要，但是又比较难，我们讲解分 33 个章节进行动态规划问题的讲解。</p>
<p>今天的课程是动态规划系列的第 33 个章节。</p>
<h3 id="知识点-2"><a href="#知识点-2" class="headerlink" title="知识点"></a>知识点</h3><ul>
<li>讲解很多经典的动态规划问题，对动态规划初步掌握。</li>
</ul>
<h2 id="普通线性-DP"><a href="#普通线性-DP" class="headerlink" title="普通线性 DP"></a>普通线性 DP</h2><p>线性 <code>DP</code> 是动态规划问题中的一类问题，指状态之间有线性关系的动态规划问题。</p>
<p>这类问题不像是我们讲的背包等问题有固定的模板。</p>
<p>少数常见的线性 <code>DP</code> 问题也有模板，比如我们讲的 ���<em>L<strong>I</strong>S</em> 和 ���<em>L<strong>C</strong>S</em> 问题。</p>
<p>大部分还是需要根据题目进行推导，基本没有什么规律可循。</p>
<p>大部分线性规划的问题，都需要自己首先定义状态，找到决策，推导状态转移方程。</p>
<p>我们再讲解几个题目，让大家找找做最普遍 <code>DP</code> 问题的感觉。</p>
<h4 id="蓝肽子序列"><a href="#蓝肽子序列" class="headerlink" title="蓝肽子序列"></a>蓝肽子序列</h4><p>题目链接：<a target="_blank" rel="noopener" href="https://www.lanqiao.cn/problems/1030/learning/">蓝肽子序列</a></p>
<p><strong>题目描述:</strong></p>
<p>L 星球上的生物由蛋蓝质组成，每一种蛋蓝质由一类称为蓝肽的物资首尾连接成一条长链后折叠而成。</p>
<p>生物学家小乔正在研究 L 星球上的蛋蓝质。她拿到两个蛋蓝质的蓝肽序列，想通过这两条蓝肽序列的共同特点来分析两种蛋蓝质的相似性。</p>
<p>具体的，一个蓝肽可以使用 11 至 55 个英文字母表示，其中第一个字母大写，后面的字母小写。一个蛋蓝质的蓝肽序列可以用蓝肽的表示顺序拼接而成。</p>
<p>在一条蓝肽序列中，如果选取其中的一些位置，把这些位置的蓝肽取出，并按照它们在原序列中的位置摆放，则称为这条蓝肽的一个子序列。蓝肽的子序列不一定在原序列中是连续的，中间可能间隔着一些未被取出的蓝肽。</p>
<p>如果第一条蓝肽序列可以取出一个子序列与第二条蓝肽序列中取出的某个子序列相等，则称为一个公共蓝肽子序列。</p>
<p>给定两条蓝肽序列，找出他们最长的那个公共蓝肽子序列的长度。</p>
<p><strong>输入描述:</strong></p>
<p>输入两行，每行包含一个字符串，表示一个蓝肽序列。字符串中间没有空格等分隔字符。</p>
<p>其中有 ，两个字符串的长度均不超过 10001000。</p>
<p><strong>输出描述:</strong></p>
<p>输出一个整数，表示最长的那个公共蓝肽子序列的长度。</p>
<p><strong>输入输出样例:</strong></p>
<p><strong>示例:</strong></p>
<blockquote>
<p>输入</p>
</blockquote>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LanQiaoBei LanTaiXiaoQiao</span><br></pre></td></tr></table></figure>

<blockquote>
<p>输出</p>
</blockquote>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure>

<h3 id="运行限制"><a href="#运行限制" class="headerlink" title="运行限制"></a>运行限制</h3><ul>
<li>最大运行时间：1s</li>
<li>最大运行内存: 128M</li>
</ul>
<p><strong>答案解析：</strong></p>
<p>该题目是 ���<em>L<strong>C</strong>S</em> 的变形，由原来的一个字符或者一个数字的匹配变成了，一个单词的匹配。</p>
<p>这个题目为先划分字符串变成基本的比较单位。</p>
<p>然后再套用 ���<em>L<strong>C</strong>S</em> 模板</p>
<p>即可完成这道题目。</p>
<p><strong>C++ 解题代码：</strong></p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> dp[<span class="number">1005</span>][<span class="number">1005</span>];</span><br><span class="line">string s1, s2;</span><br><span class="line">string a[<span class="number">1005</span>], b[<span class="number">1005</span>];</span><br><span class="line"><span class="type">int</span> n=<span class="number">0</span>, m=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; s1 &gt;&gt; s2;</span><br><span class="line">    <span class="type">int</span> d1 = s1.<span class="built_in">length</span>(), d2 = s2.<span class="built_in">length</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; d1;)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (s1[i] &gt;= <span class="string">&#x27;A&#x27;</span> &amp;&amp; s1[i] &lt;= <span class="string">&#x27;Z&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            a[n] += s1[i++];</span><br><span class="line">            <span class="keyword">while</span> (s1[i] &gt;= <span class="string">&#x27;a&#x27;</span> &amp;&amp; s1[i] &lt;= <span class="string">&#x27;z&#x27;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                a[n] += s1[i++];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        n++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; d2;)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (s2[i] &gt;= <span class="string">&#x27;A&#x27;</span> &amp;&amp; s2[i] &lt;= <span class="string">&#x27;Z&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            b[m] += s2[i++];</span><br><span class="line">            <span class="keyword">while</span> (s2[i] &gt;= <span class="string">&#x27;a&#x27;</span> &amp;&amp; s2[i] &lt;= <span class="string">&#x27;z&#x27;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                b[m] += s2[i++];</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        m++;</span><br><span class="line">    &#125;</span><br><span class="line">     dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++)</span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (a[i] == b[j])</span><br><span class="line">            &#123;</span><br><span class="line">                dp[i + <span class="number">1</span>][j + <span class="number">1</span>] = dp[i][j] + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                dp[i + <span class="number">1</span>][j + <span class="number">1</span>]=<span class="built_in">max</span>(dp[i + <span class="number">1</span>][j], dp[i][j + <span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    cout &lt;&lt; dp[n][m] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Python 解题代码</strong></p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">Maxn = <span class="number">1005</span></span><br><span class="line">dp = [[<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(Maxn)] <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(Maxn)]</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    s1 = <span class="built_in">input</span>()</span><br><span class="line">    s2 = <span class="built_in">input</span>()</span><br><span class="line">    a = []</span><br><span class="line">    b = []</span><br><span class="line">    temp = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> s1:</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;A&#x27;</span> &lt;= word &lt;= <span class="string">&#x27;Z&#x27;</span>:</span><br><span class="line">            <span class="keyword">if</span> temp != <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">                a.append(temp)</span><br><span class="line">            temp = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        temp += word</span><br><span class="line">    a.append(temp)</span><br><span class="line"></span><br><span class="line">    temp = <span class="string">&#x27; &#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> s2:</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;A&#x27;</span> &lt;= word &lt;= <span class="string">&#x27;Z&#x27;</span>:</span><br><span class="line">            <span class="keyword">if</span> temp != <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">                b.append(temp)</span><br><span class="line">            temp = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        temp += word</span><br><span class="line">    b.append(temp)</span><br><span class="line"></span><br><span class="line">    n = <span class="built_in">len</span>(a)</span><br><span class="line">    m = <span class="built_in">len</span>(b)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(a)):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(b)):</span><br><span class="line">            <span class="keyword">if</span> a[i] == b[j]:</span><br><span class="line">                dp[i + <span class="number">1</span>][j + <span class="number">1</span>] = dp[i][j] + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">if</span> dp[i + <span class="number">1</span>][j] &gt; dp[i][j + <span class="number">1</span>]:</span><br><span class="line">                    dp[i + <span class="number">1</span>][j + <span class="number">1</span>] = dp[i + <span class="number">1</span>][j]</span><br><span class="line"></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    dp[i + <span class="number">1</span>][j + <span class="number">1</span>] = <span class="built_in">max</span>(dp[i + <span class="number">1</span>][j], dp[i][j + <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(dp[n][m])</span><br></pre></td></tr></table></figure>

<p><strong>Java 解题代码</strong></p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[][] dp;</span><br><span class="line">    <span class="keyword">static</span> String s1;</span><br><span class="line">    <span class="keyword">static</span> String s2;</span><br><span class="line">    <span class="keyword">static</span> String []a;</span><br><span class="line">    <span class="keyword">static</span> String []b;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> n=<span class="number">0</span>,m=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        s1=in.next();</span><br><span class="line">        s2=in.next();</span><br><span class="line"></span><br><span class="line">        a=<span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">1005</span>];</span><br><span class="line">        b=<span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">1005</span>];</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> d1=s1.length();</span><br><span class="line">        <span class="type">int</span> d2=s2.length();</span><br><span class="line"></span><br><span class="line">        dp=<span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">1005</span>][<span class="number">1005</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; d1;n++)</span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (s1.charAt(i) - <span class="string">&#x27;A&#x27;</span>&gt;=<span class="number">0</span> &amp;&amp; s1.charAt(i) - <span class="string">&#x27;Z&#x27;</span>&lt;=<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                a[n] += s1.charAt(i++);</span><br><span class="line">                <span class="keyword">while</span> (i &lt; d1&amp;&amp;s1.charAt(i) -<span class="string">&#x27;a&#x27;</span>&gt;=<span class="number">0</span> &amp;&amp; s1.charAt(i)-<span class="string">&#x27;z&#x27;</span> &lt;=<span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    a[n] += s1.charAt(i++);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; d2;m++)</span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (s2.charAt(i) - <span class="string">&#x27;A&#x27;</span>&gt;=<span class="number">0</span> &amp;&amp; s2.charAt(i) - <span class="string">&#x27;Z&#x27;</span>&lt;=<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                b[m] += s2.charAt(i++);</span><br><span class="line">                <span class="keyword">while</span> (i &lt; d2&amp;&amp;s2.charAt(i) -<span class="string">&#x27;a&#x27;</span>&gt;=<span class="number">0</span>&amp;&amp; s2.charAt(i)-<span class="string">&#x27;z&#x27;</span> &lt;= <span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    b[m] += s2.charAt(i++);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> Maxn=Math.max(n,m)+<span class="number">50</span>;</span><br><span class="line">        dp=<span class="keyword">new</span> <span class="title class_">int</span>[Maxn][Maxn];</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; m; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (a[i].equals( b[j]))</span><br><span class="line">                &#123;</span><br><span class="line">                    dp[i + <span class="number">1</span>][j + <span class="number">1</span>] = dp[i][j] + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    dp[i + <span class="number">1</span>][j + <span class="number">1</span>]=Math.max(dp[i + <span class="number">1</span>][j], dp[i][j + <span class="number">1</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        System.out.println(dp[n][m]);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="合唱队形"><a href="#合唱队形" class="headerlink" title="合唱队形"></a>合唱队形</h4><p>题目链接：<a target="_blank" rel="noopener" href="https://www.lanqiao.cn/problems/742/learning/">https://www.lanqiao.cn/problems/742/learning/</a></p>
<p><strong>题目描述:</strong></p>
<p>�<em>N</em> 位同学站成一排，音乐老师要请其中的 (�−�)(<em>N</em>−<em>K</em>) 位同学出列，使得剩下的 �<em>K</em> 位同学排成合唱队形。</p>
<p>合唱队形是指这样的一种队形：设 �<em>K</em> 位同学从左到右依次编号为 1，2，⋯�1，2，⋯<em>K</em>，他们的身高分别为 �1，�2，⋯，��<em>T</em>1，<em>T</em>2，⋯，<em>T**K</em>， 则他们的身高满足 �1&lt;⋯&lt;��&gt;��+1&gt;⋯&gt;��(1≤�≤�)<em>T</em>1&lt;⋯&lt;<em>T<strong>i*&gt;*T</strong>i*+1&gt;⋯&gt;<em>T**K</em>(1≤</em>i<em>≤</em>K*)。</p>
<p>你的任务是，已知所有 �<em>N</em> 位同学的身高，计算最少需要几位同学出列，可以使得剩下的同学排成合唱队形。</p>
<p><strong>输入描述:</strong></p>
<p>输入两行。</p>
<p>第一行是一个整数 � (2≤�≤100)<em>N</em> (2≤<em>N</em>≤100)，表示同学的总数。</p>
<p>第二行有 �<em>n</em> 个整数，用空格分隔，第 �<em>i</em> 个整数 ��(130≤��≤230)<em>T**i</em>(130≤<em>T**i</em>≤230) 是第 �<em>i</em> 位同学的身高(厘米)。</p>
<p><strong>输出描述:</strong></p>
<p>输出一个整数，就是最少需要几位同学出列。</p>
<p><strong>输入输出样例:</strong></p>
<p><strong>示例:</strong> 1</p>
<blockquote>
<p>输入</p>
</blockquote>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">8 186 186 150 200 160 130 197 220</span><br></pre></td></tr></table></figure>

<blockquote>
<p>输出</p>
</blockquote>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4</span><br></pre></td></tr></table></figure>

<h3 id="运行限制-1"><a href="#运行限制-1" class="headerlink" title="运行限制"></a>运行限制</h3><ul>
<li>最大运行时间：1s</li>
<li>最大运行内存: 128M</li>
</ul>
<p><strong>答案解析：</strong></p>
<p>要使得出列最少，那么就要留下最多的，我们想到了 ���<em>L<strong>I</strong>S</em> ，但是 ���<em>L<strong>I</strong>S</em> 只能处理单调序列最长，所以并不能直接用。</p>
<p>我们看到，这里是两头低，中间高的一种情况。</p>
<p>在这种情况下，最多的话那么就是最高的那个人的左侧加上右侧最高。</p>
<p>到这，我们发现。</p>
<p>在中间那个人左侧，从左到右做了一遍 ���<em>L<strong>I</strong>S</em> 。</p>
<p>在那个人的右侧，从右到左的做了一遍 ���<em>L<strong>I</strong>S</em> 。</p>
<p>至此，我们好像找了策略。</p>
<p>通过枚举中间那个人，然后看他左侧的 ���<em>L<strong>I</strong>S</em> 和他右侧的���<em>L<strong>I</strong>S</em> 的值之和的大小，就能将这道题目解出。</p>
<p><strong>C++ 解题代码：</strong></p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> dp1[<span class="number">105</span>],dp2[<span class="number">105</span>],a[<span class="number">105</span>],s[<span class="number">105</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin&gt;&gt;a[i];</span><br><span class="line">        dp2[i]=<span class="number">1</span>;</span><br><span class="line">        dp1[i]=<span class="number">1</span>;</span><br><span class="line">    &#125;<span class="comment">//输入并赋初值</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//预处理，从右往左LIS</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=n<span class="number">-1</span>;i&gt;=<span class="number">1</span>;i--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=i+<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i]&gt;a[j]&amp;&amp;dp2[i]&lt;=dp2[j]+<span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                dp2[i]=dp2[j]+<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//预处理，从左往右LIS</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;i;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i]&gt;a[j]&amp;&amp;dp1[i]&lt;=dp1[j]+<span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                dp1[i]=dp1[j]+<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> maxx=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        s[i]=dp2[i]+dp1[i]<span class="number">-1</span>;</span><br><span class="line">        <span class="comment">//自己算了两次，所以-1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(s[i]&gt;maxx)</span><br><span class="line">        &#123;</span><br><span class="line">            maxx=s[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout&lt;&lt;n-maxx;<span class="comment">//是求出列的人数</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Python 解题代码</strong></p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 输入并赋初值</span></span><br><span class="line">    n = <span class="built_in">int</span>(<span class="built_in">input</span>().strip())</span><br><span class="line"></span><br><span class="line">    t = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split()))</span><br><span class="line"></span><br><span class="line">    dp1 = [<span class="number">1</span>] * n</span><br><span class="line">    dp2 = [<span class="number">1</span>] * n</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 预处理，从左往右LIS</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i):</span><br><span class="line">            <span class="keyword">if</span> t[i] &gt; t[j]:</span><br><span class="line">                dp1[i] = <span class="built_in">max</span>(dp1[i], dp1[j] + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 预处理，从右往左LIS</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n - <span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(n - <span class="number">1</span>, i, -<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> t[i] &gt; t[j]:</span><br><span class="line">                dp2[i] = <span class="built_in">max</span>(dp2[i], dp2[j] + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    maxx = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        maxx = <span class="built_in">max</span>(maxx, dp1[i] + dp2[i] - <span class="number">1</span>)</span><br><span class="line">        <span class="comment"># 自己算了两次，所以-1</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(n - maxx)</span><br></pre></td></tr></table></figure>

<p><strong>Java 解题代码</strong></p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> in.nextInt();</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] a = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        <span class="type">int</span>[] dp1 = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        <span class="type">int</span>[] dp2 = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            a[i] = in.nextInt();</span><br><span class="line">            dp2[i]=<span class="number">1</span>;</span><br><span class="line">            dp1[i]=<span class="number">1</span>;</span><br><span class="line">        &#125;<span class="comment">//输入并赋初值</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//预处理，从左往右LIS</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (a[i] &gt; a[j] &amp;&amp; dp1[j] + <span class="number">1</span> &gt; dp1[i]) &#123;</span><br><span class="line">                    dp1[i] = dp1[j] + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//预处理，从右往左LIS</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> n - <span class="number">1</span>; j &gt; i; j--) &#123;</span><br><span class="line">                <span class="keyword">if</span> (a[i] &gt; a[j] &amp;&amp; dp2[j] + <span class="number">1</span> &gt; dp2[i]) &#123;</span><br><span class="line">                    dp2[i] = dp2[j] + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">maxx</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            maxx = Math.max(maxx, dp1[i] + dp2[i]-<span class="number">1</span>);</span><br><span class="line">            <span class="comment">//自己算了两次，所以-1</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 是求出列的人数</span></span><br><span class="line">        System.out.println(n - maxx );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="最优包含"><a href="#最优包含" class="headerlink" title="最优包含"></a>最优包含</h4><p>题目链接：<a target="_blank" rel="noopener" href="https://www.lanqiao.cn/problems/239/learning/">https://www.lanqiao.cn/problems/239/learning/</a></p>
<p><strong>题目描述:</strong> 我们称一个字符串 �<em>S</em> 包含字符串 �<em>T</em> 是指 �<em>T</em> 是 �<em>S</em> 的一个子序列，即可以从字符串 �<em>S</em> 中抽出若干个字符，它们按原来的顺序组合成一个新的字符串与 �<em>T</em> 完全一样。给定两个字符串 �<em>S</em> 和 �<em>T</em>，请问最少修改 �<em>S</em> 中的多少个字符，能使 �<em>S</em> 包含 �<em>T</em> ？其中，1≤∣�∣≤∣�∣≤10001≤∣<em>T</em>∣≤∣<em>S</em>∣≤1000。</p>
<p><strong>输入描述:</strong></p>
<p>输入两行，每行一个字符串。第一行的字符串为 �<em>S</em>，第二行的字符串为 �<em>T</em>。两个字符串均非空而且只包含大写英文字母。<strong>输出描述:</strong></p>
<p>输出一个整数，表示答案。</p>
<p><strong>输入输出样例:</strong></p>
<p><strong>示例:</strong></p>
<blockquote>
<p>输入</p>
</blockquote>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ABCDEABCD XAABZ</span><br></pre></td></tr></table></figure>

<blockquote>
<p>输出</p>
</blockquote>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3</span><br></pre></td></tr></table></figure>

<p><strong>运行限制</strong></p>
<ul>
<li>最大运行时间：1s</li>
<li>最大运行内存: 256M</li>
</ul>
<p><strong>答案解析：</strong></p>
<p>个题目是线性 <code>DP</code> 中比较经典的题目。</p>
<p>这个类型就做编辑距离，可以通过 <code>DFS</code> 解决，也可以通过 <code>DP</code> 解决。</p>
<p><code>DP</code> 的时间复杂度低。</p>
<p>我们先来讲一下，编辑距离。</p>
<p>编辑距离为两个字符串，�<em>a</em> 和 �<em>b</em> 通过多少次变换，使得 �<em>a</em> 变成 �<em>b</em>。</p>
<p>我们可以做出 33 种操作。</p>
<p>1.1. 删除操作，将 �[�]<em>a</em>[<em>i</em>] 从 �<em>a</em> 中移除 2.2. 插入操作，在 �[�]<em>a</em>[<em>i</em>] 后加上 �[�]<em>b</em>[<em>j</em>] 3.3. 替换操作，将 �[�]<em>a</em>[<em>i</em>] 修改为 �[�]<em>b</em>[<em>j</em>]</p>
<p>编辑距离的状态转移类似 LCS ，但有有很大的差别。</p>
<p>初始状态，�&#x3D;�&#x3D;0<em>i</em>&#x3D;<em>j</em>&#x3D;0，都在字符串的开头。</p>
<p>然后开始判断 �[�]&#x3D;?�[�]<em>a</em>[<em>i</em>]&#x3D;?<em>b</em>[<em>j</em>]</p>
<ul>
<li><p>如果相同，那么就不需要修改，所以��[�+1][�+1]&#x3D;��[�][�]<em>d**p</em>[<em>i</em>+1][<em>j</em>+1]&#x3D;<em>d**p</em>[<em>i</em>][<em>j</em>]</p>
<p>所以在�[�−1]<em>a</em>[<em>i</em>−1]等于�[�−1]<em>b</em>[<em>j</em>−1]时，��[�][�]<em>d**p</em>[<em>i</em>][<em>j</em>]这个状态由��[�−1][�−1]<em>d**p</em>[<em>i</em>−1][<em>j</em>−1]转移而来。</p>
<p>��[�][�]&#x3D;��[�−1][�−1]<em>d**p</em>[<em>i</em>][<em>j</em>]&#x3D;<em>d**p</em>[<em>i</em>−1][<em>j</em>−1]</p>
</li>
<li><p>如果不同，那就需要进行三种可能的操作</p>
</li>
</ul>
<ol>
<li><p>修改操作：</p>
<p>�[�]<em>a</em>[<em>i</em>] 修改为 �[�]<em>b</em>[<em>j</em>]， 因为编辑了一次，所以+1+1</p>
<p>��[�+1][�+1]&#x3D;��[�][�]+1<em>d**p</em>[<em>i</em>+1][<em>j</em>+1]&#x3D;<em>d**p</em>[<em>i</em>][<em>j</em>]+1</p>
<p>所以在�[�−1]<em>a</em>[<em>i</em>−1]不等于�[�−1]<em>b</em>[<em>j</em>−1]时，��[�][�]<em>d**p</em>[<em>i</em>][<em>j</em>]这个状态由��[�−1][�−1]<em>d**p</em>[<em>i</em>−1][<em>j</em>−1]转移而来。</p>
<p>��[�][�]&#x3D;��[�−1][�−1]<em>d**p</em>[<em>i</em>][<em>j</em>]&#x3D;<em>d**p</em>[<em>i</em>−1][<em>j</em>−1]</p>
</li>
<li><p>删除操作，直接把 �[�]<em>a</em>[<em>i</em>] 删除，此时转移到 ��[�][�+1]<em>d**p</em>[<em>i</em>][<em>j</em>+1] ，因为 �[�]<em>a</em>[<em>i</em>] 被删除，但是下一个字符到了 �[�]<em>a</em>[<em>i</em>] 的位置，而对应比较的位置到了�[�+1]<em>b</em>[<em>j</em>+1]。</p>
<p>所以此时状态转移到了��[�][�+1]<em>d**p</em>[<em>i</em>][<em>j</em>+1]</p>
<p>��[�][�+1]&#x3D;��[�][�]+1<em>d**p</em>[<em>i</em>][<em>j</em>+1]&#x3D;<em>d**p</em>[<em>i</em>][<em>j</em>]+1</p>
<p>因为编辑了一次，所以+1+1</p>
<p>所以在�[�−1]<em>a</em>[<em>i</em>−1]不等于�[�−1]<em>b</em>[<em>j</em>−1]时，��[�][�]<em>d**p</em>[<em>i</em>][<em>j</em>]就有可能通过��[�−1][�]<em>d**p</em>[<em>i</em>−1][<em>j</em>]转移而来。</p>
</li>
<li><p>插入操作，在�[�]<em>a</em>[<em>i</em>]后添加一个�[�]<em>b</em>[<em>j</em>]，那么此时�[�+1]<em>a</em>[<em>i</em>+1]和�[�]<em>b</em>[<em>j</em>]对应，因为加了一个字符就变成了�[�+1]<em>a</em>[<em>i</em>+1],而且跟�[�]<em>b</em>[<em>j</em>]对应，那么下一个状态转移到了��[�+1][�]<em>d**p</em>[<em>i</em>+1][<em>j</em>]</p>
<p>��[�+1][�]&#x3D;��[�][�]+1<em>d**p</em>[<em>i</em>+1][<em>j</em>]&#x3D;<em>d**p</em>[<em>i</em>][<em>j</em>]+1</p>
<p>此时状态转移到了 ��[�+1][�]&#x3D;��[�][�]+1<em>d**p</em>[<em>i</em>+1][<em>j</em>]&#x3D;<em>d**p</em>[<em>i</em>][<em>j</em>]+1</p>
<p>因为编辑了一次，所以+1+1</p>
<p>所以在�[�−1]<em>a</em>[<em>i</em>−1]不等于�[�−1]<em>b</em>[<em>j</em>−1]时，��[�][�]<em>d**p</em>[<em>i</em>][<em>j</em>]就有可能通过��[�][�−1]<em>d**p</em>[<em>i</em>][<em>j</em>−1]转移而来。</p>
</li>
</ol>
<p>那么不同时，我们选择他们的最小值即可。</p>
<p>由此我们可以写出模板：</p>
<p><strong>C++ 解题代码：</strong></p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INF 99999999</span></span><br><span class="line">string s, t;</span><br><span class="line"><span class="type">int</span> dp[<span class="number">1010</span>][<span class="number">1010</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= s.<span class="built_in">size</span>(); i++) dp[i][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= t.<span class="built_in">size</span>(); j++) dp[<span class="number">0</span>][j] = INF;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cin &gt;&gt; s &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">init</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= s.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= t.<span class="built_in">size</span>(); j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s[i - <span class="number">1</span>] == t[j - <span class="number">1</span>]) dp[i][j] = dp[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                dp[i][j] = <span class="built_in">min</span>(dp[i - <span class="number">1</span>][j - <span class="number">1</span>],<span class="built_in">min</span>(dp[i - <span class="number">1</span>][j], dp[i][j - <span class="number">1</span>])) + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; dp[s.<span class="built_in">size</span>()][t.<span class="built_in">size</span>()];</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Python 解题代码</strong></p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">init</span>(<span class="params">s,t</span>):</span><br><span class="line"></span><br><span class="line">    dp = [[<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(t) + <span class="number">1</span>)] <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(s) + <span class="number">1</span>)]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(s) + <span class="number">1</span>):</span><br><span class="line">        dp[i][<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="built_in">len</span>(t) + <span class="number">1</span>):</span><br><span class="line">        dp[<span class="number">0</span>][j] = <span class="number">999999</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dp</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    s = <span class="built_in">list</span>(<span class="built_in">input</span>())</span><br><span class="line">    t = <span class="built_in">list</span>(<span class="built_in">input</span>())</span><br><span class="line"></span><br><span class="line">    dp=init(s,t)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(s)):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(t)):</span><br><span class="line">            <span class="keyword">if</span> s[i] == t[j]:</span><br><span class="line">                dp[i + <span class="number">1</span>][j + <span class="number">1</span>] = dp[i][j]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                dp[i + <span class="number">1</span>][j + <span class="number">1</span>] = <span class="built_in">min</span>(dp[i][j] + <span class="number">1</span>, dp[i][j + <span class="number">1</span>])</span><br><span class="line">                dp[i + <span class="number">1</span>][j + <span class="number">1</span>] = <span class="built_in">min</span>( dp[i + <span class="number">1</span>][j + <span class="number">1</span>] ,dp[j+<span class="number">1</span>][i]+<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(dp[-<span class="number">1</span>][-<span class="number">1</span>])</span><br></pre></td></tr></table></figure>

<p><strong>Java 解题代码</strong></p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>   <span class="type">int</span> dp[][];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(<span class="type">int</span> n,<span class="type">int</span> m)</span>&#123;</span><br><span class="line"></span><br><span class="line">        dp = <span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">1</span>][m+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= n; i++) dp[i][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= m; j++) dp[<span class="number">0</span>][j] = <span class="number">99999</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> in.nextLine();</span><br><span class="line">        <span class="type">String</span> <span class="variable">t</span> <span class="operator">=</span> in.nextLine();</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> s.length();</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> t.length();</span><br><span class="line"></span><br><span class="line">        init(n,m);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= m; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (s.charAt(i - <span class="number">1</span>) == t.charAt(j - <span class="number">1</span>)) dp[i][j] = dp[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">                <span class="keyword">else</span>  dp[i][j] = min(dp[i - <span class="number">1</span>][j - <span class="number">1</span>],min(dp[i - <span class="number">1</span>][j], dp[i][j - <span class="number">1</span>])) + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(dp[n][m]);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这道题目也比较简单，由于是包含关系，并不是相等关系，所以当 <code>S</code> 多余 <code>T</code> 是，不需要进行删除操作。</p>
<p>所以这个题目不考虑删除的那个状态转移即可。</p>
<p><strong>C++ 解题代码</strong></p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INF 99999999</span></span><br><span class="line">string s, t;</span><br><span class="line"><span class="type">int</span> dp[<span class="number">1010</span>][<span class="number">1010</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= s.<span class="built_in">size</span>(); i++) dp[i][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= t.<span class="built_in">size</span>(); j++) dp[<span class="number">0</span>][j] = INF;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cin &gt;&gt; s &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">init</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= s.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= t.<span class="built_in">size</span>(); j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s[i - <span class="number">1</span>] == t[j - <span class="number">1</span>]) dp[i][j] = dp[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">else</span> dp[i][j] = <span class="built_in">min</span>(dp[i - <span class="number">1</span>][j - <span class="number">1</span>] + <span class="number">1</span>, dp[i - <span class="number">1</span>][j]);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; dp[s.<span class="built_in">size</span>()][t.<span class="built_in">size</span>()];</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Python 解题代码</strong></p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">init</span>(<span class="params">s,t</span>):</span><br><span class="line"></span><br><span class="line">    dp = [[<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(t) + <span class="number">1</span>)] <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(s) + <span class="number">1</span>)]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(s) + <span class="number">1</span>):</span><br><span class="line">        dp[i][<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="built_in">len</span>(t) + <span class="number">1</span>):</span><br><span class="line">        dp[<span class="number">0</span>][j] = <span class="number">999999</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dp</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    s = <span class="built_in">list</span>(<span class="built_in">input</span>())</span><br><span class="line">    t = <span class="built_in">list</span>(<span class="built_in">input</span>())</span><br><span class="line"></span><br><span class="line">    dp=init(s,t)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(s)):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(t)):</span><br><span class="line">            <span class="keyword">if</span> s[i] == t[j]:</span><br><span class="line">                dp[i + <span class="number">1</span>][j + <span class="number">1</span>] = dp[i][j]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                dp[i + <span class="number">1</span>][j + <span class="number">1</span>] = <span class="built_in">min</span>(dp[i][j] + <span class="number">1</span>, dp[i][j + <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(dp[-<span class="number">1</span>][-<span class="number">1</span>])</span><br></pre></td></tr></table></figure>

<p><strong>Java 解题代码</strong></p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>   <span class="type">int</span> dp[][];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(<span class="type">int</span> n,<span class="type">int</span> m)</span>&#123;</span><br><span class="line"></span><br><span class="line">        dp = <span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">1</span>][m+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= n; i++) dp[i][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= m; j++) dp[<span class="number">0</span>][j] = <span class="number">99999</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> in.nextLine();</span><br><span class="line">        <span class="type">String</span> <span class="variable">t</span> <span class="operator">=</span> in.nextLine();</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> s.length();</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> t.length();</span><br><span class="line"></span><br><span class="line">        init(n,m);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= m; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (s.charAt(i - <span class="number">1</span>) == t.charAt(j - <span class="number">1</span>)) dp[i][j] = dp[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">                <span class="keyword">else</span> dp[i][j] = Math.min(dp[i - <span class="number">1</span>][j - <span class="number">1</span>] + <span class="number">1</span>, dp[i - <span class="number">1</span>][j]);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(dp[n][m]);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="实验总结"><a href="#实验总结" class="headerlink" title="实验总结"></a>实验总结</h2><p>动态规划的学习是痛苦的，也是快乐，而且是非常重要的。</p>
<p>希望大家努力克服，动态规划都学会了还有什么学不会呢。</p>

      
    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%A4%87%E8%B5%9B/" rel="tag"><i class="fas fa-tags"></i>蓝桥杯备赛</a>
        
      </div>
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="https://actz123.github.io/2024/02/22/%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="zdx">
        <meta itemprop="description" content="">
        <meta itemprop="image" content="/images/avatar.png">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="Actz">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2024/02/22/%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/" itemprop="url">贪心算法</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2024-02-22T17:38:20+08:00">2024-02-22 17:38:20</time></span>
        </span>
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-categories">
          
          <i class="far fa-folder-open"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%86%B2%E5%88%BA%E8%90%A5/" itemprop="url" rel="index"><span itemprop="name">蓝桥杯冲刺营</span></a></span><i class="fas fa-angle-right"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%86%B2%E5%88%BA%E8%90%A5/9-%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">9.贪心算法</span></a></span>
        </span>
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <h1 id="贪心算法"><a href="#贪心算法" class="headerlink" title="贪心算法"></a>贪心算法</h1><p>贪心算法（Greedy algorithm），又称贪婪算法。是一种在每一步选择中都采取在当前状态下最好或最优（即最有利）的选择，从而使得问题得到全局最优解。</p>
<p>贪心的算法的设计就是要遵循某种规则，不断地选取当前最优解的算法设计方法。这节实验将会通过多个问题的来讲解贪心算法。</p>
<h4 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h4><ul>
<li>贪心算法的基本概念</li>
<li>贪心算法的适用范围</li>
<li>贪心算法的设计步骤</li>
<li>贪心算法的题目讲解</li>
</ul>
<h2 id="贪心算法基本概念"><a href="#贪心算法基本概念" class="headerlink" title="贪心算法基本概念"></a>贪心算法基本概念</h2><p>贪心算法与枚举法的不同之处在于每个子问题都选择最优的情况，然后向下继续进行，且不能回溯。枚举法是将所有情况都考虑然后选出最优的情况。</p>
<p>贪心算法，在解决问题时，不从整体考虑，而是采用一种一眼看到局部最优解的选择方式。并且，贪心算法没有固定的模板可以遵循，每个题目都有不同的贪心策略，所以算法设计的关键在于贪心策略的选择。</p>
<p>贪心算法有一个必须注意的事情。贪心算法对于问题的要求是，所有的选择必须是无后效性的，<strong>即当前的选择不能影响后续选择对于结果的影响</strong>。</p>
<p>贪心算法主要适用于最优化问题，例如：最小生成树问题。有时候贪心算法并不能得到最优答案，但是能得到精确答案的近似结果。有时可以辅助其他算法得到不那么精确的结果。</p>
<h3 id="适用范围"><a href="#适用范围" class="headerlink" title="适用范围"></a>适用范围</h3><p><strong>符合贪心策略：</strong></p>
<p>所谓贪心选择性质是指所求问题的整体最优解可以通过一系列局部最优的选择，即贪心选择来达到。这是贪心算法可行的第一个基本要素，也是贪心算法与动态规划算法的主要区别。</p>
<p>贪心选择性质就是指，该问题的每一步选择都在选择最优的情况下能够导致最终问题的答案也是最优。</p>
<p>或者说是无后效性，如果该问题的每一步选择都对后续的选择没有影响，就可以应用贪心算法。</p>
<h3 id="贪心算法的设计步骤"><a href="#贪心算法的设计步骤" class="headerlink" title="贪心算法的设计步骤"></a>贪心算法的设计步骤</h3><p>按照定义设计：</p>
<ol>
<li>证明原问题的最优解之一可以由贪心选择得到。</li>
<li>将最优化问题转化为这样一个问题，即先做出选择，再解决剩下的一个子问题。</li>
<li>对每一子问题一一求解，得到子问题的局部最优解；</li>
<li>将子问题的解局部最优解合成原问题的一个解。</li>
</ol>
<p><strong>伪代码：</strong></p>
<p>关于 Question Q：</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(Q.hasNextStep)</span><br><span class="line">&#123;</span><br><span class="line">    Select(Q.nowBestSelect);</span><br><span class="line">    Q.NextStep</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Select(Q.nowBestSelect);</span><br></pre></td></tr></table></figure>

<h3 id="贪心相关题目讲解"><a href="#贪心相关题目讲解" class="headerlink" title="贪心相关题目讲解"></a>贪心相关题目讲解</h3><p>我们在正式将题目前，聊一个大家都懂的常见的知识，也是一个常见的题目。</p>
<h4 id="找零问题"><a href="#找零问题" class="headerlink" title="找零问题"></a>找零问题</h4><p>题目如下：</p>
<p>假设商店老板需要找零 �<em>n</em> 元钱。</p>
<p>钱币的面额有：100100 元、5050 元、2020 元、55 元、11 元、如何找零使得所需钱币的数量最少？</p>
<p>注意：�<em>n</em> 可能为 00，也能为几百元（别问，问就是来着里微信提现来了）</p>
<p><strong>输入:</strong></p>
<p>输入解法:</p>
<p>在第一行给出测试例个数 �<em>N</em>。</p>
<p>代表需要找零的钱数。</p>
<p>输入样例：</p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">365</span><br></pre></td></tr></table></figure>

<p><strong>输出：</strong></p>
<p>输出解法</p>
<p>有 55 行输出数据，每一行输出数据输出找零的金额与数量，详情看样例。</p>
<p>输出样例：</p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">100:3</span><br><span class="line">50:1</span><br><span class="line">20:0</span><br><span class="line">5:3</span><br><span class="line">1:0</span><br></pre></td></tr></table></figure>

<p><strong>运行限制:</strong></p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">最大运行时间：1s</span><br><span class="line">最大运行内存：128M</span><br></pre></td></tr></table></figure>

<p><strong>题目解析：</strong></p>
<p>关于这个题，如果是正常人都知道从大的钱开始找钱。这就是一种贪心的思想，将大问题转化为一个个小的子问题，每次选择最大的钱数使得总量最小。</p>
<p>其实再生活中贪心思想的例子还有很多，像是“自助餐“这种的都是贪心算法的印证。贪心算法其实离我们很近，掌握不会很困难的。</p>
<p>我们先看一下上一道题目的代码题解是什么。</p>
<p><strong>答案解析：</strong></p>
<p>C++ 解法：</p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//面值</span></span><br><span class="line"><span class="type">int</span> t[<span class="number">5</span>]=&#123;<span class="number">100</span>, <span class="number">50</span>, <span class="number">20</span>, <span class="number">5</span>, <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//张数</span></span><br><span class="line"><span class="type">int</span> m[<span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">change</span><span class="params">(<span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        m[i]=n/t[i];</span><br><span class="line"></span><br><span class="line">        n=n%t[i];</span><br><span class="line"></span><br><span class="line">        <span class="comment">//print(&quot;%d&quot;,n);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> N;</span><br><span class="line"></span><br><span class="line">    cin&gt;&gt;N;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">change</span>(N);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d:%d\n&quot;</span>,t[i],m[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Python 解法</strong></p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">t = [<span class="number">100</span>, <span class="number">50</span>, <span class="number">20</span>, <span class="number">5</span>, <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 钱的面值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">change</span>(<span class="params">t, n</span>):</span><br><span class="line">  <span class="comment"># m是张数</span></span><br><span class="line">  m = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(t))]</span><br><span class="line">  <span class="comment"># print(m) #[0, 0, 0, 0]</span></span><br><span class="line">  <span class="keyword">for</span> i, money <span class="keyword">in</span> <span class="built_in">enumerate</span>(t):</span><br><span class="line">      <span class="comment"># print(i) #0 1 2 3</span></span><br><span class="line">      <span class="comment"># print(money)</span></span><br><span class="line">      <span class="comment"># i是当前的编号  举个例子 n是376 money是100</span></span><br><span class="line">      m[i] = n // money  <span class="comment"># 商3</span></span><br><span class="line">      <span class="comment"># n还剩多少取余</span></span><br><span class="line">      n = n % money  <span class="comment"># 取余76 76不够100的</span></span><br><span class="line">      <span class="comment"># print(m)</span></span><br><span class="line">      <span class="comment"># print(n)</span></span><br><span class="line">  <span class="keyword">return</span> m</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">  N = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line"></span><br><span class="line">  m = change(t,N)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(m)):</span><br><span class="line">      <span class="built_in">print</span>(t[i], end=<span class="string">&#x27;:&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      <span class="built_in">print</span>(m[i])</span><br></pre></td></tr></table></figure>

<p><strong>Java 解法</strong></p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.Integer.max;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">//面值</span></span><br><span class="line">  <span class="keyword">static</span>  <span class="type">int</span> t[] = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">100</span>, <span class="number">50</span>, <span class="number">20</span>, <span class="number">5</span>, <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//张数</span></span><br><span class="line">  <span class="keyword">static</span> <span class="type">int</span> m[] = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">5</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">change</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">          m[i] = n / t[i];</span><br><span class="line"></span><br><span class="line">          n = n % t[i];</span><br><span class="line"></span><br><span class="line">          <span class="comment">//print(&quot;%d&quot;,n);</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="type">int</span> N;</span><br><span class="line"></span><br><span class="line">      <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">      N = in.nextInt();</span><br><span class="line"></span><br><span class="line">      change(N);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">          System.out.println(String.format(<span class="string">&quot;%d:%d&quot;</span>, t[i], m[i]));</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="蓝桥大学的小-B-同学宿舍"><a href="#蓝桥大学的小-B-同学宿舍" class="headerlink" title="蓝桥大学的小 B 同学宿舍"></a>蓝桥大学的小 B 同学宿舍</h3><p><strong>题目如下:</strong></p>
<p>小 <code>B</code> 的宿舍楼沿着走廊南北向的两边各有 200200 个房间。</p>
<p>如图所示：</p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[房间1][房间3][房间5][房间7][房间9 ]...[房间399]</span><br><span class="line">----------------------------------------------</span><br><span class="line">                   走廊</span><br><span class="line">----------------------------------------------</span><br><span class="line">[房间2][房间4][房间6][房间8][房间10]...[房间400]</span><br></pre></td></tr></table></figure>

<p>最近，由于转专业和专业分流的原因，宿舍将迎来新的调整，以便组成新的班级后方便管理。</p>
<p>但是由于走廊狭窄，走廊里只能通过一个搬运的物品（可以同向也可以反向），因此必须指定高效的搬运计划。</p>
<p>老师给了每位同学下达了以下要求，让同学们体现收拾好行李，然后给每位同学 1010 分钟的时间搬运。</p>
<p>当房间 �<em>i</em> 搬运行李到 �<em>j</em> 时，�<em>i</em> 与 �<em>j</em> 之间的走廊都会被占用。所以，1010 分钟之内同一段走廊最多11个人同时搬运，不重叠的走廊也可以同时搬运。</p>
<p>小 �<em>B</em> 的老师是个数学老师，经过运筹学一通计算他得到了最优的搬运计划。</p>
<p>虽然计划不唯一，但是最优值唯一，请问这个最短时间是多少？</p>
<p><strong>输入:</strong></p>
<p>输入解法:</p>
<p>输入数据有 �<em>T</em> 组测试例，在第一行给出测试例个数 �<em>T</em>。</p>
<p>每个测试例的第一行是一个整数 �<em>N</em>（1≤�≤2001≤<em>N</em>≤200)，表示要搬运行李的人数。接下来 �<em>N</em> 行，每行两个正整数 �<em>s</em> 和 �<em>t</em>，表示一个人，将行李是从房间号码 �<em>s</em> 移到到房间号码 �<em>t</em>。</p>
<p>输入样例:</p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">4</span><br><span class="line">10 20</span><br><span class="line">30 40</span><br><span class="line">50 60</span><br><span class="line">70 80</span><br><span class="line">2</span><br><span class="line">1 3</span><br><span class="line">2 200</span><br><span class="line">3</span><br><span class="line">10 100</span><br><span class="line">20 80</span><br><span class="line">30 50</span><br></pre></td></tr></table></figure>

<p><strong>输出：</strong></p>
<p>输出解法</p>
<p>每组输入都有一行输出数据，为一整数 �<em>T</em>，表示完成任务所花费的最小时间。</p>
<p>输出样例:</p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">10</span><br><span class="line">20</span><br><span class="line">30</span><br></pre></td></tr></table></figure>

<p><strong>运行限制:</strong></p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">最大运行时间：1s</span><br><span class="line">最大运行内存：128M</span><br></pre></td></tr></table></figure>

<p><strong>题目解析：</strong></p>
<p>不难发现，相对应的两个房间其实是占用一段走廊的，我们可以将将房间号映射为走廊号，然后再考虑上面的解析。</p>
<p>该题属于贪心算法，因为它尽可能使搬运办公桌同时进行，以便使单独安排的搬运次数最少。这样用的时间最少，即所用最少时间为不能同时搬运桌子的次数，即某一段走廊使用次数最多（贪心标准）即为即为最少搬运时间。 <strong>答案解析：</strong></p>
<p>C++ 解法：</p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> move[<span class="number">200</span>];</span><br><span class="line"><span class="comment">//搬运次数</span></span><br><span class="line">    <span class="type">int</span> N;</span><br><span class="line">    <span class="type">int</span> T;</span><br><span class="line">    cin&gt;&gt;T;</span><br><span class="line">    <span class="keyword">while</span>(T--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//每次搬运的起点和终点</span></span><br><span class="line">        <span class="type">int</span> from, to;</span><br><span class="line">        <span class="type">int</span> maxAns=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;N);</span><br><span class="line">        <span class="built_in">memset</span>(move, <span class="number">0</span>, <span class="built_in">sizeof</span>(move));</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;from, &amp;to);</span><br><span class="line"><span class="comment">//将房间号映射为走廊号</span></span><br><span class="line">            from = (from - <span class="number">1</span>)/<span class="number">2</span>;</span><br><span class="line">            to = (to - <span class="number">1</span>)/<span class="number">2</span>;</span><br><span class="line"><span class="comment">//确保from&lt;to，C++使用：swap(from, to)</span></span><br><span class="line">            <span class="keyword">if</span>(from &gt; to)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">int</span> temp = from;</span><br><span class="line">                from = to;</span><br><span class="line">                to = temp;</span><br><span class="line">            &#125;</span><br><span class="line"><span class="comment">//统计占用走廊情况，并统计最大值</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = from; j &lt;= to; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                move[j]++;</span><br><span class="line">                maxAns=<span class="built_in">max</span>(maxAns,move[j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cout&lt;&lt;maxAns*<span class="number">10</span>&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Python 解法</strong></p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">T = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    T = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">    <span class="keyword">while</span> (T &gt; <span class="number">0</span>):</span><br><span class="line">        <span class="comment"># 搬运次数</span></span><br><span class="line">        N = <span class="number">0</span></span><br><span class="line">        <span class="comment"># 起点与终点</span></span><br><span class="line">        From = <span class="number">0</span></span><br><span class="line">        To = <span class="number">0</span></span><br><span class="line">        <span class="comment"># 最大搬运次数</span></span><br><span class="line">        maxAns = <span class="number">0</span></span><br><span class="line">        T -= <span class="number">1</span></span><br><span class="line">        move = [<span class="number">0</span>] * <span class="number">205</span></span><br><span class="line">        N = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(N):</span><br><span class="line"></span><br><span class="line">            From, To = <span class="built_in">input</span>().split()</span><br><span class="line">            From = <span class="built_in">int</span>(From)</span><br><span class="line">            To = <span class="built_in">int</span>(To)</span><br><span class="line">            From = <span class="built_in">int</span>((From - <span class="number">1</span>) / <span class="number">2</span>)</span><br><span class="line">            To = <span class="built_in">int</span>((To - <span class="number">1</span>) / <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> From &gt; To:</span><br><span class="line">                temp = From</span><br><span class="line">                From = To</span><br><span class="line">                To = temp</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(From, To + <span class="number">1</span>):</span><br><span class="line">                move[j] += <span class="number">1</span></span><br><span class="line">                maxAns = <span class="built_in">max</span>(move[j], maxAns)</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(maxAns*<span class="number">10</span>)</span><br></pre></td></tr></table></figure>

<p><strong>Java 解法</strong></p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.Integer.max;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"><span class="comment">//搬运次数</span></span><br><span class="line">      <span class="type">int</span> N;</span><br><span class="line">      <span class="type">int</span> T;</span><br><span class="line">      T = in.nextInt();</span><br><span class="line">      <span class="keyword">while</span> (T &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          T--;</span><br><span class="line"></span><br><span class="line">          <span class="comment">//每次搬运的起点和终点</span></span><br><span class="line">          <span class="type">int</span> from, to;</span><br><span class="line">          <span class="type">int</span> <span class="variable">maxAns</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">          N = in.nextInt();</span><br><span class="line">          <span class="type">int</span>[] move = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">205</span>];</span><br><span class="line"></span><br><span class="line">          <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">              from=in.nextInt();</span><br><span class="line">              to=in.nextInt();</span><br><span class="line"><span class="comment">//将房间号映射为走廊号</span></span><br><span class="line">              from = (from - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">              to = (to - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line"><span class="comment">//确保from&lt;to，C++使用：swap(from, to)</span></span><br><span class="line">              <span class="keyword">if</span> (from &gt; to) &#123;</span><br><span class="line">                  <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> from;</span><br><span class="line">                  from = to;</span><br><span class="line">                  to = temp;</span><br><span class="line">              &#125;</span><br><span class="line"><span class="comment">//统计占用走廊情况，并统计最大值</span></span><br><span class="line">              <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> from; j &lt;= to; j++) &#123;</span><br><span class="line">                  move[j]++;</span><br><span class="line">                  maxAns = max(maxAns, move[j]);</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          System.out.println( maxAns * <span class="number">10</span>);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="可拆分背包问题之贪心的自助餐"><a href="#可拆分背包问题之贪心的自助餐" class="headerlink" title="可拆分背包问题之贪心的自助餐"></a>可拆分背包问题之贪心的自助餐</h3><p><strong>题目如下:</strong></p>
<p>小 �<em>B</em> 同学呢，想去吃自助餐，但是他是那种比较节俭的的人，既不想浪费食物，又想尽可能吃的贵一点，他于是私下里做了调查。</p>
<p>小蓝餐厅的自助餐有 �<em>n</em> 种食材，每种食材都有它的价格。</p>
<p>而且也能估计出每一份的重量，所以他列了一个表格。</p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">红烧牛肉  30元    300g</span><br><span class="line">油闷大虾  8元     5g</span><br><span class="line">四喜丸子  4元     8g</span><br><span class="line">三文鱼    5元     3g</span><br><span class="line">排骨      18元    200g</span><br><span class="line">麻辣兔头  20元    120g</span><br><span class="line">高汤海参  40元    70g</span><br><span class="line">扇贝粉丝  8元     32g</span><br><span class="line">牛排      79元    240g</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>现在小 �<em>B</em> 想知道在他到底最多吃多少钱的菜品。</p>
<p>假设自助餐厅的菜品供应同样的菜品每个人只能取一份。</p>
<p>小B的饭量假设为 �<em>C</em>，单位为 �<em>g</em>。</p>
<p>现在请你设计一个程序帮助小 �<em>B</em> 计算他的最多吃了多少钱。</p>
<p><strong>输入:</strong></p>
<p>输入解法</p>
<p>第一行输入 �,�（0&lt;&#x3D;�&lt;&#x3D;1000）（0&lt;&#x3D;�&lt;&#x3D;10000）<em>n</em>,<em>C</em>（0&lt;&#x3D;<em>n</em>&lt;&#x3D;1000）（0&lt;&#x3D;<em>C</em>&lt;&#x3D;10000）</p>
<p>其中 �<em>n</em> 为菜品数量，�<em>C</em> 为小 �<em>B</em> 的肚子容量。</p>
<p>第二行输入两个数 �，�<em>V</em>，<em>W</em></p>
<p>第一个数 �[�]<em>V</em>[<em>i</em>] 是第 �<em>i</em> 个菜品的价值（0&lt;&#x3D;�[�]&lt;&#x3D;10000）（0&lt;&#x3D;<em>v</em>[<em>i</em>]&lt;&#x3D;10000）</p>
<p>第二个数 �[�]<em>V</em>[<em>i</em>] 是第 �<em>i</em> 个菜品的质量（0&lt;&#x3D;�[�]&lt;&#x3D;10000）（0&lt;&#x3D;<em>w</em>[<em>i</em>]&lt;&#x3D;10000）</p>
<p>输入样例:</p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">20 1000</span><br><span class="line">1 22</span><br><span class="line">2 43</span><br><span class="line">123 214</span><br><span class="line">12 2</span><br><span class="line">123 432</span><br><span class="line">21 223</span><br><span class="line">22 16</span><br><span class="line">77 49</span><br><span class="line">34 78</span><br><span class="line">34 9</span><br><span class="line">43 677</span><br><span class="line">21 34</span><br><span class="line">23 23</span><br><span class="line">12 56</span><br><span class="line">332 56</span><br><span class="line">21 99</span><br><span class="line">123 545</span><br><span class="line">389 33</span><br><span class="line">12 999</span><br><span class="line">23 88</span><br></pre></td></tr></table></figure>

<p><strong>输出：</strong></p>
<p>输出一行数据，表示最大的价值，保留三位小数。</p>
<p>输出样例：</p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1204.114</span><br></pre></td></tr></table></figure>

<p><strong>运行限制:</strong></p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">最大运行时间：1s</span><br><span class="line">最大运行内存：128M</span><br></pre></td></tr></table></figure>

<p><strong>题目解析：</strong></p>
<p>可拆分背包的一般解法为：</p>
<p>这里有 n 种不同值 �[�]<em>v</em>[<em>i</em>] 和权重 �[�]<em>w</em>[<em>i</em>] 的对象（如果选择该对象的 �[�]<em>w</em>[<em>i</em>] 可以获得值 �[�]<em>v</em>[<em>i</em>]）。</p>
<p>你有一个容器来挑选它们。你可以根据自己的需要把它们分成任意大小的碎片。可以拾取的对象的最大重量给定为 �<em>w</em>。请计算您能得到的最大值。</p>
<p>就像是这个题目，要想吃回本就要捡着贵的吃，但是贵只是一方面，人会饱，所以用价格除以质量所获的价格商才是贪心准则，应按照价格商优先进行选取。</p>
<p>于是这个题，就要用的我们之前学的知识了。这里因为要整体排序，所以要先创建一个类，然后自定义 <code>cmp</code> 函数，在使用 <code>sort</code> 排序。</p>
<p><strong>答案解析：</strong></p>
<p>C++ 解法：</p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//需要一个结构体，通过性价比，能够查找到重量和价值。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//做一个排序，需要将性价比由高到底排序，排序的过程中重量和（价值）要对应上</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Food</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">double</span> w;</span><br><span class="line">    <span class="type">double</span> v;</span><br><span class="line">    <span class="type">double</span> aver;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//C++一般用 struct，因为默认都是public的</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmp</span><span class="params">(Food a, Food b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a.aver &gt; b.aver;</span><br><span class="line">    <span class="comment">//助记大于号就是从大到小排序，小于号就是从小到大排序</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Food foods[<span class="number">1009</span>];</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="type">double</span> C;</span><br><span class="line">    <span class="type">double</span> Value = <span class="number">0</span>;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; C;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; foods[i].v&gt;&gt;foods[i].w;</span><br><span class="line">        <span class="comment">//求性价比</span></span><br><span class="line">        foods[i].aver = foods[i].v / foods[i].w;</span><br><span class="line">        <span class="comment">//cout &lt;&lt; foods[i].aver &lt;&lt; endl;</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//性价比排序</span></span><br><span class="line">    <span class="built_in">sort</span>(foods, foods + n, cmp);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//当背包（肚子）能装下所有物品（菜）时，直接输出所有的物品（菜品）价值之和</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        sum += foods[i].w;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (sum &lt;= C)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">            Value += foods[j].v;</span><br><span class="line">        <span class="comment">//V = floor(V * 1000.0) / 1000.0;</span></span><br><span class="line">        cout &lt;&lt; <span class="built_in">setiosflags</span>(ios::fixed) &lt;&lt; <span class="built_in">setprecision</span>(<span class="number">3</span>) &lt;&lt;Value &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//当背包（肚子）不能装下所有物品时应该由性价比的顺序，选择装入的物品</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (foods[i].w &lt;= C)</span><br><span class="line">        &#123;</span><br><span class="line">            Value =Value + foods[i].v;</span><br><span class="line">            C = C - foods[i].w;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//直接将剩余的C加入即可</span></span><br><span class="line">            Value =Value + C * foods[i].aver;</span><br><span class="line">            C = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (C == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//V = floor(V * 1000.0) / 1000.0;</span></span><br><span class="line">    cout &lt;&lt; <span class="built_in">setiosflags</span>(ios::fixed) &lt;&lt; <span class="built_in">setprecision</span>(<span class="number">3</span>) &lt;&lt;Value &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Python 解法</strong></p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Food</span>:</span><br><span class="line"></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, w, v, aver</span>):</span><br><span class="line">       self.w = w</span><br><span class="line">       self.v = v</span><br><span class="line">       self.aver = aver</span><br><span class="line"></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">       <span class="comment"># print(11)</span></span><br><span class="line">       <span class="keyword">return</span> <span class="built_in">repr</span>((self.w, self.v, self.aver))</span><br><span class="line"></span><br><span class="line"><span class="comment"># def cmp(foodA: Food, foodB: Food):</span></span><br><span class="line"><span class="comment">#     if foodA.aver &gt;= foodB.aver:</span></span><br><span class="line"><span class="comment">#         return True</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     else:</span></span><br><span class="line"><span class="comment">#         return False</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 当然 python 的 sort 是不需要写 cmp 函数的，这里我们使用 sorted 就不用 cmp 函数了</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">   foods = []</span><br><span class="line">   C = <span class="number">0.0</span></span><br><span class="line">   Value = <span class="number">0.0</span></span><br><span class="line">   n, C = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())</span><br><span class="line">   <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">       food = Food(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">       food.v, food.w = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())</span><br><span class="line">       food.aver = food.v / food.w</span><br><span class="line">       foods.append(food)</span><br><span class="line">       <span class="comment"># print(food.aver)</span></span><br><span class="line">       <span class="comment"># print(foods)</span></span><br><span class="line">   <span class="comment"># 性价比排序</span></span><br><span class="line">   foods.sort(key=<span class="keyword">lambda</span> f: f.aver, reverse=<span class="literal">True</span>)</span><br><span class="line">   <span class="comment"># for i in range(n):</span></span><br><span class="line">   <span class="comment">#     print(foods[i].aver)</span></span><br><span class="line">   <span class="built_in">sum</span>=<span class="number">0</span></span><br><span class="line">   <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">       <span class="built_in">sum</span>+= foods[i].w</span><br><span class="line">   <span class="comment"># 当背包（肚子）能装下所有物品（菜）时，直接输出所有的物品（菜品）价值之和</span></span><br><span class="line">   <span class="keyword">if</span> <span class="built_in">sum</span>&lt;=C :</span><br><span class="line">       <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">           Value+=foods[i].v;</span><br><span class="line">       <span class="built_in">print</span>(Value)</span><br><span class="line">   <span class="comment"># 当背包（肚子）不能装下所有物品时应该由性价比的顺序，选择装入的物品</span></span><br><span class="line">   <span class="keyword">else</span>:</span><br><span class="line">       <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line"></span><br><span class="line">           <span class="keyword">if</span> foods[i].w&lt;=C:</span><br><span class="line">               Value=Value+foods[i].v</span><br><span class="line">               C=C-foods[i].w</span><br><span class="line">           <span class="comment">#     直接将剩余的C加入即可</span></span><br><span class="line">           <span class="keyword">else</span>:</span><br><span class="line">               Value+=C*foods[i].aver</span><br><span class="line">               C=<span class="number">0</span></span><br><span class="line"></span><br><span class="line">           <span class="keyword">if</span> C==<span class="number">0</span>:</span><br><span class="line">               <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">       <span class="built_in">print</span>(<span class="string">&quot;%.3f&quot;</span> % Value)</span><br></pre></td></tr></table></figure>

<p><strong>Java 解法</strong></p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.Integer.max;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Food</span> &#123;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">public</span> <span class="type">double</span> w;</span><br><span class="line">       <span class="keyword">public</span> <span class="type">double</span> v;</span><br><span class="line">       <span class="keyword">public</span> <span class="type">double</span> aver;</span><br><span class="line"></span><br><span class="line">       Food()&#123;</span><br><span class="line">           w=<span class="number">0</span>;</span><br><span class="line">           v=<span class="number">0</span>;</span><br><span class="line">           aver=<span class="number">0</span>;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyCmp</span> <span class="keyword">implements</span> <span class="title class_">Comparator</span>&lt;Food&gt; &#123;</span><br><span class="line"></span><br><span class="line">       <span class="meta">@Override</span></span><br><span class="line">       <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Food a, Food b)</span> &#123;</span><br><span class="line"></span><br><span class="line">           <span class="keyword">if</span> (a.aver &gt; b.aver)&#123;</span><br><span class="line">               <span class="keyword">return</span>  -<span class="number">1</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">           <span class="comment">//助记大于号就是从大到小排序，小于号就是从小到大排序</span></span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">static</span> Food foods[]=<span class="keyword">new</span> <span class="title class_">Food</span>[ <span class="number">1009</span>];</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">       <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">       <span class="type">int</span> n;</span><br><span class="line">       <span class="type">double</span> C;</span><br><span class="line">       <span class="type">double</span> <span class="variable">Value</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">       n = in.nextInt();</span><br><span class="line">       C = in.nextDouble();</span><br><span class="line">       <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">           foods[i]=<span class="keyword">new</span> <span class="title class_">Food</span>();</span><br><span class="line">           foods[i].v = in.nextDouble();</span><br><span class="line">           foods[i].w = in.nextDouble();</span><br><span class="line"></span><br><span class="line">           <span class="comment">//求性价比</span></span><br><span class="line">           foods[i].aver = foods[i].v / foods[i].w;</span><br><span class="line">           <span class="comment">//cout &lt;&lt; foods[i].aver &lt;&lt; endl;</span></span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//性价比排序</span></span><br><span class="line"></span><br><span class="line">       Comparator cmp=<span class="keyword">new</span> <span class="title class_">MyCmp</span>();</span><br><span class="line">       Arrays.sort(foods,<span class="number">0</span>,n,cmp);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       <span class="comment">//当背包（肚子）能装下所有物品（菜）时，直接输出所有的物品（菜品）价值之和</span></span><br><span class="line">       <span class="comment">//</span></span><br><span class="line">       <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">       <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">           sum += foods[i].w;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">if</span> (sum &lt; C) &#123;</span><br><span class="line">           <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">               Value += foods[j].v;</span><br><span class="line">           <span class="comment">//V = floor(V * 1000.0) / 1000.0;</span></span><br><span class="line">           System.out.print(String.format(<span class="string">&quot;%.3f&quot;</span>,Value));</span><br><span class="line">           <span class="keyword">return</span> ;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//当背包（肚子）不能装下所有物品时应该由性价比的顺序，选择装入的物品</span></span><br><span class="line"></span><br><span class="line">       <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">           <span class="keyword">if</span> (foods[i].w &lt;= C) &#123;</span><br><span class="line">               Value = Value + foods[i].v;</span><br><span class="line">               C = C - foods[i].w;</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               <span class="comment">//直接将剩余的C加入即可</span></span><br><span class="line">               Value = Value + C * foods[i].aver;</span><br><span class="line">               C = <span class="number">0</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">if</span> (C == <span class="number">0</span>)</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//V = floor(V * 1000.0) / 1000.0;</span></span><br><span class="line">       System.out.print(String.format(<span class="string">&quot;%.3f&quot;</span>,Value));</span><br><span class="line">       <span class="keyword">return</span> ;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="实验总结"><a href="#实验总结" class="headerlink" title="实验总结"></a>实验总结</h4><p>贪心算法的最主要的特征就是无后效性，就像是自助餐那个题目，如果说吃了某一样食物，就不能吃另一个食物了，那么这就有了后效性，那就不能使用贪心算法进行解决问题了。</p>
<p>本节课举了三个贪心算法的例子进行讲解，贪心算法是算法竞赛中最入门的算法。没接触过感觉很深奥，接触过了也就那样，简单的贪心伸伸手就可以写出来，其实非常简单，大家也不要过分的担心</p>

      
    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%A4%87%E8%B5%9B/" rel="tag"><i class="fas fa-tags"></i>蓝桥杯备赛</a>
        
      </div>
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="https://actz123.github.io/2024/02/22/%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="zdx">
        <meta itemprop="description" content="">
        <meta itemprop="image" content="/images/avatar.png">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="Actz">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2024/02/22/%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF/" itemprop="url">工具函数模板</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2024-02-22T17:36:51+08:00">2024-02-22 17:36:51</time></span>
        </span>
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-categories">
          
          <i class="far fa-folder-open"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%86%B2%E5%88%BA%E8%90%A5/" itemprop="url" rel="index"><span itemprop="name">蓝桥杯冲刺营</span></a></span><i class="fas fa-angle-right"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%86%B2%E5%88%BA%E8%90%A5/8-%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF/" itemprop="url" rel="index"><span itemprop="name">8.工具函数模板</span></a></span>
        </span>
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <h1 id="内置模板"><a href="#内置模板" class="headerlink" title="内置模板"></a>内置模板</h1><p>我们前面讲了很多数据结构相关的知识，本节课程，我们主要讲解怎么不自己定义，而是使用我们所使用的编程语言中，已经定义好的数据结构。</p>
<p>之前我们在栈那一节已经讲过栈的内置数据结构的使用，我们本章就不再进行讲解，我们这节课仍然采用那种方式进行讲解。</p>
<h4 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h4><ul>
<li>迭代器讲解</li>
<li>线性表的使用</li>
<li>队列的使用</li>
<li>集合（set）的使用</li>
<li>映射（map）的使用</li>
</ul>
<h3 id="迭代器（Iterator）"><a href="#迭代器（Iterator）" class="headerlink" title="迭代器（Iterator）"></a>迭代器（Iterator）</h3><p>首先，明确一点迭代器是 <code>C++</code> 的知识，并不适用于 <code>Java</code> 和 <code>Python</code> 这两种语言，但是下面讲容器就要用到这一点，所以我们必须要提前讲一下。迭代器的知识点很复杂，了解即可，当然有余力可以深究，了解就能做题，实现方式看容器讲解。</p>
<p>对于数组我们可以采用指针进行访问，但是对于其他的存储空间连续的数据结构或者说是存储单元我们就需要找到另一种方式来替代指针的行为作用，从而达到对于非数组的数据结构的访问和遍历，于是我们定义了一种新的变量叫做迭代器。</p>
<p><strong>定义：</strong></p>
<p>迭代器是一种检查容器内元素并遍历元素的数据类型。</p>
<p>迭代器提供对一个容器中的对象的访问方法，并且定义了容器中对象的范围。</p>
<p><strong>迭代器和指针的区别：</strong></p>
<p>容器和<code>string</code>有迭代器类型同时拥有返回迭代器的成员。</p>
<p>如：容器有成员 <code>.begin()</code> 和 <code>.end()</code>，其中 <code>.begin()</code> 成员复制返回指向第一个元素的迭代器，即指向第一个元素的“地址”，而 <code>.end()</code> 成员返回指向容器尾元素的下一个位置的迭代器。</p>
<p>即 <code>.begin()</code> 指向的是第一个合法元素的位置，<code>.end()</code> 指向是容器后第一个不合法元素的地址。</p>
<p>相应的还有容器反向迭代器成员 <code>.rbegin()</code> <code>.rend()</code>，<code>.rbegin()</code> 返回容器的元素前最后一个不合法的地址，<code>rend()</code> 返回容器的最后一个合法地址。</p>
<h4 id="容器迭代器的使用"><a href="#容器迭代器的使用" class="headerlink" title="容器迭代器的使用"></a>容器迭代器的使用</h4><p>每种容器类型都定义了自己的迭代器类型：</p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如 vector：vector&lt;int&gt;::iterator iter;//定义一个名为iter的变量</span><br></pre></td></tr></table></figure>

<p>数据类型是由 <code>vector&lt;int&gt;</code> 定义的 <code>iterator</code> 类型。简单说就是容器类定义了自己的 <code>iterator</code> 类型，用于访问容器内的元素。每个容器定义了一种名为 <code>iterator</code> 的类型，这种类型支持迭代器的各种行为。</p>
<p>我么们先讲一下各种迭代器的类型，在讲容器所用的迭代器类型，就可以明白怎么操作。</p>
<h2 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h2><p>写在前面，由于 <code>Python</code> 的语言的特点，所有的数据结构大部分都需要自己实现，但是其 <code>List</code> 功能较强，用起来比较简单，当然我们也会再说一遍怎么实现。</p>
<p>在 <code>Java</code> 中各种数据结构都是继承于 <code>list</code>，所以 <code>Java</code> 的 <code>list</code> 功能也很强，它的功能有很多，由于篇幅原因我们会挑比较重要的讲解，其他的还需要同学们多去使用。</p>
<h3 id="Vector-容器（类）"><a href="#Vector-容器（类）" class="headerlink" title="Vector 容器（类）"></a>Vector 容器（类）</h3><p>线性表中有 <code>Vector</code> 和 <code>list</code>，两者作用比较相似。</p>
<p><code>Vector</code> 的主要作用就是可变长度的数组，就把他当成数组使用即可。</p>
<p>至于为什么我们选择讲 <code>Vector</code> 而不是 <code>List</code>，因为 <code>Vector</code> 可以当作数组使用，用起来非常简单，也非常方便。</p>
<p>我们先讲解一下 C++ 的 <code>Vector</code> 使用：</p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span>   <span class="comment">//头文件</span></span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; a;      <span class="comment">//定义了一个int类型的vector容器a</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; b[<span class="number">100</span>]; <span class="comment">//定义了一个int类型的vector容器b组</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">rec</span></span><br><span class="line">&#123;</span><br><span class="line">    ···</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;rec&gt; c;            <span class="comment">//定义了一个rec类型的vector容器c</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator it; <span class="comment">//vector的迭代器，与指针类似</span></span><br></pre></td></tr></table></figure>

<p>具体操作如下：</p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a.<span class="built_in">size</span>()           <span class="comment">//返回实际长度（元素个数），O(1)复杂度</span></span><br><span class="line">a.<span class="built_in">empty</span>()      <span class="comment">//容器为空返回1，否则返回0，O(1)复杂度</span></span><br><span class="line">a.<span class="built_in">clear</span>()      <span class="comment">//把vector清空</span></span><br><span class="line">a.<span class="built_in">begin</span>()      <span class="comment">//返回指向第一个元素的迭代器，*a.begin()与a[0]作用相同</span></span><br><span class="line">a.<span class="built_in">end</span>()        <span class="comment">//越界访问，指向vector尾部，指向第n个元素再往后的边界</span></span><br><span class="line">a.<span class="built_in">front</span>()      <span class="comment">//返回第一个元素的值，等价于*a.begin和a[0]</span></span><br><span class="line">a.<span class="built_in">back</span>()       <span class="comment">//返回最后一个元素的值，等价于*--a.end()和a[size()-1]</span></span><br><span class="line">a.<span class="built_in">push_back</span>(x) <span class="comment">//把元素x插入vector尾部</span></span><br><span class="line">a.<span class="built_in">pop_back</span>()   <span class="comment">//删除vector中最后一个元素</span></span><br></pre></td></tr></table></figure>

<p>遍历的方式有两种：</p>
<ol>
<li>迭代器使用与指针类似，可如下遍历整个容器。</li>
</ol>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ( vector&lt;<span class="type">int</span>&gt;::iterator it=a.<span class="built_in">begin</span>() ; it!=a.<span class="built_in">end</span>() ; it++ )</span><br><span class="line">cout&lt;&lt;*iterator&lt;&lt;endl;</span><br></pre></td></tr></table></figure>

<ol>
<li>当成数组使用。</li>
</ol>
<figure class="hljs highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>( <span class="type">int</span> i=<span class="number">0</span>;i&lt;a.size();i++) <span class="built_in">cout</span>&lt;&lt;a[i]&lt;&lt;<span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>

<p>Java 中我们一般使用 List，相信大家已经非常熟悉了，我们这里给大家补充一下 Vector 的用法，与 List 的使用方式非常的类似。</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一种构造方法创建一个默认的向量，默认大小为 10：</span></span><br><span class="line">Vector()</span><br><span class="line"><span class="comment">//第二种构造方法创建指定大小的向量。</span></span><br><span class="line">Vector(<span class="type">int</span> size)</span><br><span class="line"><span class="comment">//第三种构造方法创建指定大小的向量，并且增量用 incr 指定。增量表示向量每次增加的元素数目。</span></span><br><span class="line">Vector(<span class="type">int</span> size,<span class="type">int</span> incr)</span><br><span class="line"><span class="comment">//第四种构造方法创建一个包含集合 c 元素的向量：</span></span><br><span class="line">Vector(Collection c)</span><br></pre></td></tr></table></figure>

<p>以下为 <code>Java Vector</code> 的 <code>Api</code>。</p>
<table>
<thead>
<tr>
<th><strong>修饰符和类型</strong></th>
<th><strong>方法和说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td>boolean</td>
<td>add(E e)将指定的元素附加到此 Vector 的末尾。</td>
</tr>
<tr>
<td>void</td>
<td>add(int index, E element)在此 Vector 的指定位置插入指定元素。</td>
</tr>
<tr>
<td>boolean</td>
<td>addAll(Collection&lt;? extends E&gt; c)将指定集合中的所有元素追加到末尾 这个向量，按照它们由指定的返回的顺序 集合的迭代器。</td>
</tr>
<tr>
<td>boolean</td>
<td>addAll(int index, Collection&lt;? extends E&gt; c)将指定 Collection 中的所有元素插入到此 指定位置的向量。</td>
</tr>
<tr>
<td>void</td>
<td>addElement(E obj)将指定的组件添加到此向量的末尾， 将其大小增加一。</td>
</tr>
<tr>
<td>int</td>
<td>capacity()返回此向量的当前容量。</td>
</tr>
<tr>
<td>void</td>
<td>clear()从此 Vector 中删除所有元素。</td>
</tr>
<tr>
<td>Object</td>
<td>clone()返回此向量的克隆。</td>
</tr>
<tr>
<td>boolean</td>
<td>contains(Object o)退货 true 如果此向量包含指定的元素。</td>
</tr>
<tr>
<td>boolean</td>
<td>containsAll(Collection&lt;?&gt; c)如果此 Vector 包含所有元素，则返回 true 指定的集合。</td>
</tr>
<tr>
<td>void</td>
<td>copyInto ������<em>O<strong>b</strong>j<strong>e</strong>c**t</em> [ ] �������<em>a<strong>n</strong>A<strong>r</strong>r<strong>a</strong>y</em>将此向量的分量复制到指定的数组中。</td>
</tr>
<tr>
<td>E</td>
<td>elementAt(int index)返回指定索引处的组件。</td>
</tr>
<tr>
<td>Enumeration</td>
<td>elements()返回此向量的组件的枚举。</td>
</tr>
<tr>
<td>void</td>
<td>ensureCapacity(int minCapacity)如有必要，增加此向量的容量，以确保它至少可以容纳由指定的组件数量最小容量参数。</td>
</tr>
<tr>
<td>boolean</td>
<td>equals(Object o)比较指定的 Object 与此 Vector 是否相等。</td>
</tr>
<tr>
<td>E</td>
<td>firstElement()返回第一个组件（索引处的项目 0） 的这个向量。</td>
</tr>
<tr>
<td>E</td>
<td>get(int index)返回此 Vector 中指定位置的元素。</td>
</tr>
<tr>
<td>int</td>
<td>hashCode()返回此 Vector 的哈希码值。</td>
</tr>
<tr>
<td>int</td>
<td>indexOf(Object o)返回指定元素第一次出现的索引 在此向量中，如果此向量不包含该元素，则为 -1。</td>
</tr>
<tr>
<td>int</td>
<td>indexOf(Object o,int index)返回指定元素第一次出现的索引这个向量，从 index, 或返回 -1 如果 未找到该元素。</td>
</tr>
<tr>
<td>void</td>
<td>insertElementAt(E obj, int index)将指定对象作为组件插入此向量中的 指定的 index.</td>
</tr>
<tr>
<td>boolean</td>
<td>isEmpty()测试此向量是否没有组件。</td>
</tr>
<tr>
<td>Iterator</td>
<td>iterator()以适当的顺序返回此列表中元素的迭代器</td>
</tr>
<tr>
<td>E</td>
<td>lastElement()返回向量的最后一个组件。</td>
</tr>
<tr>
<td>int</td>
<td>lastIndexOf(Object o)返回指定元素最后一次出现的索引在此向量中，如果此向量不包含该元素，则为 -1。</td>
</tr>
<tr>
<td>int</td>
<td>lastIndexOf(Object o, int index)返回指定元素最后一次出现的索引这个向量，从 index, 或返回 -1 如果 未找到该元素。</td>
</tr>
<tr>
<td>ListIterator</td>
<td>listIterator()返回此列表中元素的列表迭代器（在适当的顺序）。</td>
</tr>
<tr>
<td>ListIterator</td>
<td>listIterator(int index)返回此列表中元素的列表迭代器（在适当的序列），从列表中的指定位置开始。</td>
</tr>
<tr>
<td>E</td>
<td>remove(int index)移除此 Vector 中指定位置的元素。</td>
</tr>
<tr>
<td>boolean</td>
<td>remove(Object o)移除此 Vector 中第一次出现的指定元素如果 Vector 不包含该元素，则它保持不变。</td>
</tr>
<tr>
<td>boolean</td>
<td>removeAll(Collection&lt;?&gt; c)从此 Vector 中删除其包含在指定的集合。</td>
</tr>
<tr>
<td>void</td>
<td>removeAllElements()从此向量中删除所有组件并将其大小设置为零。</td>
</tr>
<tr>
<td>boolean</td>
<td>removeElement(Object obj)删除参数的第一个（最低索引）出现从这个向量。</td>
</tr>
<tr>
<td>void</td>
<td>removeElementAt(int index)删除指定索引处的组件。</td>
</tr>
<tr>
<td>protected void</td>
<td>removeRange(int fromIndex, int toIndex)从此列表中删除索引介于两者之间的所有元素 fromIndex，包括在内，和 toIndex， 独家的。</td>
</tr>
<tr>
<td>boolean</td>
<td>retainAll(Collection&lt;?&gt; c)仅保留此 Vector 中包含在指定的集合。</td>
</tr>
<tr>
<td>E</td>
<td>set(int index, E element)将此 Vector 中指定位置的元素替换为指定的元素。</td>
</tr>
<tr>
<td>void</td>
<td>setElementAt(E obj,int index)将组件设置在指定的位置 index 这个的向量是指定的对象。</td>
</tr>
<tr>
<td>void</td>
<td>setSize(int newSize)设置此向量的大小。</td>
</tr>
<tr>
<td>int</td>
<td>size()返回此向量中的组件数。</td>
</tr>
<tr>
<td>List</td>
<td>subList(int fromIndex,int toIndex)返回此列表中 fromIndex 之间的部分的视图</td>
</tr>
<tr>
<td>Object[]</td>
<td>toArray()返回一个包含此 Vector 中所有元素的数组以正确的顺序。</td>
</tr>
<tr>
<td>T[]</td>
<td>������� �<em>t<strong>o</strong>A<strong>r</strong>r<strong>a</strong>y</em> <em>T</em>[] 返回一个包含此 Vector 中所有元素的数组正确的顺序; 返回数组的运行时类型指定数组。</td>
</tr>
<tr>
<td>String</td>
<td>toString()返回此 Vector 的字符串表示形式，包含 每个元素的字符串表示。</td>
</tr>
<tr>
<td>void</td>
<td>trimToSize()将此向量的容量修剪为向量的电流 尺寸。</td>
</tr>
</tbody></table>
<p>遍历 Vector</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Enumeration</span> <span class="variable">vEnum</span> <span class="operator">=</span> v.elements();</span><br><span class="line"><span class="keyword">while</span> (vEnum.hasMoreElements())</span><br><span class="line">    System.out.print(vEnum.nextElement() + <span class="string">&quot; &quot;</span>);</span><br></pre></td></tr></table></figure>

<p><strong>Python 中，我们直接使用 list 即可来实现。</strong></p>
<h2 id="题目解析"><a href="#题目解析" class="headerlink" title="题目解析"></a>题目解析</h2><p>快递员需要对快递进行分拣，现在小李是一名快递员，他想要你帮他设计一个程序用于快递的分拣，按城市分开。</p>
<p>现在有以下输入：</p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">单号 省份</span><br><span class="line"></span><br><span class="line">请你将单号按照城市分开，并输出。</span><br><span class="line"></span><br><span class="line">城市按照输入顺序排序</span><br><span class="line"></span><br><span class="line">单号按照输入顺序排序</span><br></pre></td></tr></table></figure>

<p>样例如下：</p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">输入</span><br><span class="line"></span><br><span class="line">10</span><br><span class="line"></span><br><span class="line">10124214 北京</span><br><span class="line">12421565  上海</span><br><span class="line">sdafasdg213 天津</span><br><span class="line">fasdfga124 北京</span><br><span class="line">145252  上海</span><br><span class="line">235wtdfsg 济南</span><br><span class="line">3242356fgdfsg 成都</span><br><span class="line">23423 武汉</span><br><span class="line">23423565f 沈阳</span><br><span class="line">1245dfwfs 成都</span><br><span class="line"></span><br><span class="line">输出</span><br><span class="line"></span><br><span class="line">北京 2</span><br><span class="line">10124214</span><br><span class="line">fasdfga124</span><br><span class="line">上海 2</span><br><span class="line">12421565</span><br><span class="line">145252</span><br><span class="line">天津 1</span><br><span class="line">sdafasdg213</span><br><span class="line">济南 1</span><br><span class="line">235wtdfsg</span><br><span class="line">成都 2</span><br><span class="line">3242356fgdfsg</span><br><span class="line">1245dfwfs</span><br><span class="line">武汉 1</span><br><span class="line">23423</span><br><span class="line">沈阳 1</span><br><span class="line">23423565f</span><br></pre></td></tr></table></figure>

<p>下面我们来分析一下解题思路。</p>
<p>首先我们要知道中国城市肯定在 10001000 个以内，但是单号我们不确定，我们不可能每个数组开 1000010000 个，那样内存不够，所以这时候我们就用到了我们的 ������<em>v<strong>e</strong>c<strong>t</strong>o**r</em>，他的容量是动态申请的，在比赛中我们可以理解为无限制。</p>
<ul>
<li>第一步：我们创建一个 ������<em>v<strong>e</strong>c<strong>t</strong>o**r</em> 用于保存地址</li>
</ul>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;string&gt; city;</span><br></pre></td></tr></table></figure>

<ul>
<li>第二步：我们创建一个 ������<em>v<strong>e</strong>c<strong>t</strong>o**r</em> 组用于存放单号</li>
</ul>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;string&gt; dig[<span class="number">1000</span>];</span><br></pre></td></tr></table></figure>

<ul>
<li>第三步：我们定义一个映射函数，因为你的城市可能会再次出现，你需要知道之前有没有。</li>
<li>第四步：我们开始读入操作并按照顺序进行存放</li>
</ul>
<h4 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h4><p>C++ 解题代码：</p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">vector&lt;string&gt; city;</span><br><span class="line">vector&lt;string&gt; dig[<span class="number">1000</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Myfind</span><span class="params">(string s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;city.<span class="built_in">size</span>();i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(city[i]==s) <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        string d,c;</span><br><span class="line">        cin&gt;&gt;d&gt;&gt;c;</span><br><span class="line">        <span class="type">int</span> flag=<span class="built_in">Myfind</span>(c);</span><br><span class="line">        <span class="keyword">if</span>(flag==<span class="number">-1</span>)&#123;</span><br><span class="line">            city.<span class="built_in">push_back</span>(c);</span><br><span class="line">            dig[city.<span class="built_in">size</span>()<span class="number">-1</span>].<span class="built_in">push_back</span>(d);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>  dig[flag].<span class="built_in">push_back</span>(d);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;city.<span class="built_in">size</span>();i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt;city[i]&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;dig[i].<span class="built_in">size</span>()&lt;&lt;endl;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;dig[i].<span class="built_in">size</span>();j++)</span><br><span class="line">            cout&lt;&lt;dig[i][j]&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Java 解题代码</strong></p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">import</span> java.util.Vector;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> Vector city=<span class="keyword">new</span> <span class="title class_">Vector</span>&lt;String&gt;();</span><br><span class="line">  <span class="keyword">static</span> Vector &lt;Vector&lt;String&gt;&gt; dig= <span class="keyword">new</span> <span class="title class_">Vector</span> &lt;Vector&lt;String&gt;&gt;();</span><br><span class="line">  <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">Myfind</span><span class="params">(String s)</span></span><br><span class="line">  &#123;</span><br><span class="line">      <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;city.size();i++)</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="keyword">if</span>(city.get(i).equals(s)) &#123;</span><br><span class="line">              <span class="keyword">return</span> i;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      <span class="type">int</span> n;</span><br><span class="line">      Scanner in=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">      n=in.nextInt();</span><br><span class="line">      <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">      &#123;</span><br><span class="line">          String d,c;</span><br><span class="line">          d=in.next();</span><br><span class="line">          c=in.next();</span><br><span class="line">          <span class="type">int</span> flag=Myfind(c);</span><br><span class="line">          <span class="keyword">if</span>(flag==-<span class="number">1</span>)&#123;</span><br><span class="line">              city.addElement(c);</span><br><span class="line">              dig.addElement(<span class="keyword">new</span> <span class="title class_">Vector</span>&lt;String&gt;());</span><br><span class="line">              dig.get(city.size()-<span class="number">1</span>).addElement(d);</span><br><span class="line"></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">else</span>   dig.get(flag).addElement(d);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;city.size();i++)</span><br><span class="line">      &#123;</span><br><span class="line">          System.out.println(city.get(i)+<span class="string">&quot; &quot;</span>+dig.get(i).size());</span><br><span class="line">          <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j&lt; dig.get(i).size(); j++)</span><br><span class="line">              System.out.println(dig.get(i).get(j));</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Python 实现方式:</strong></p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">city=[]</span><br><span class="line">dig = [[] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000</span>)]</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find</span>(<span class="params">s</span>):</span><br><span class="line">   <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="built_in">len</span>(city)):</span><br><span class="line">       <span class="keyword">if</span> (city[i]==s):</span><br><span class="line">           <span class="keyword">return</span> i</span><br><span class="line">   <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">   n=<span class="built_in">int</span> (<span class="built_in">input</span>())</span><br><span class="line">   <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,n):</span><br><span class="line">       d=<span class="built_in">input</span>().split()</span><br><span class="line">       <span class="comment">#print(d[1]        )</span></span><br><span class="line">       flag=find(d[<span class="number">1</span>])</span><br><span class="line">       <span class="keyword">if</span>(flag==-<span class="number">1</span>):</span><br><span class="line">           city.append(d[<span class="number">1</span>])</span><br><span class="line">           dig[<span class="built_in">len</span>(city)-<span class="number">1</span>].append(d[<span class="number">0</span>])</span><br><span class="line">       <span class="keyword">else</span>:</span><br><span class="line">           dig[flag].append(d[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">   <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="built_in">len</span>(city)):</span><br><span class="line">       <span class="built_in">print</span>(city[i],<span class="built_in">len</span>(dig[i]))</span><br><span class="line">       <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="built_in">len</span>(dig[i])):</span><br><span class="line">           <span class="built_in">print</span>(dig[i][j])</span><br></pre></td></tr></table></figure>

<h3 id="队列-Queue"><a href="#队列-Queue" class="headerlink" title="队列 Queue"></a>队列 Queue</h3><p>队列的讲解在之前的课程中已经讲过了，忘记的快回去复习。</p>
<p>我们直接开始看操作吧。</p>
<h4 id="C-中的队列"><a href="#C-中的队列" class="headerlink" title="C++ 中的队列"></a>C++ 中的队列</h4><p>定义方式：在 C++ 里所有容器的定义方式基本一致。</p>
<figure class="hljs highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">queue&lt;string&gt; myqueue;</span><br><span class="line">queue&lt;<span class="type">int</span>&gt; myqueue_int;</span><br></pre></td></tr></table></figure>

<p>成员函数:</p>
<ul>
<li><code>front()</code>：返回 <code>queue</code> 中第一个元素的引用。</li>
<li><code>back()</code>：返回 <code>queue </code>中最后一个元素的引用。</li>
<li><code>push(const T&amp; obj)</code>：在 <code>queue</code> 的尾部添加一个元素的副本。</li>
<li><code>pop()</code>：删除 <code>queue</code> 中的第一个元素。</li>
<li><code>size()</code>：返回 <code>queue</code> 中元素的个数。</li>
<li><code>empty()</code>：如果 <code>queue</code> 中没有元素的话，返回 true。</li>
</ul>
<p><strong>Java 中的队列:</strong></p>
<p>定义方式：</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Queue&lt;String&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;String&gt;();</span><br></pre></td></tr></table></figure>

<p>部分成员函数（包括继承的）：</p>
<ul>
<li><code>add()</code>: 增加一个元索,如果队列已满，则抛出一个异常</li>
<li><code>remove()</code>:移除并返回队列头部的元素，如果队列为空，则抛出一个异常</li>
<li><code>element()</code>:返回队列头部的元素，如果队列为空，则抛出一个异常</li>
<li><code>offer()</code>:添加一个元素并返回 <code>true</code>，如果队列已满，则返回 <code>false</code></li>
<li><code>poll()</code>: 移除并返问队列头部的元素，如果队列为空，则返回 <code>null</code></li>
<li><code>peek()</code>: 返回队列头部的元素，如果队列为空，则返回 <code>null</code></li>
<li><code>put()</code>: 添加一个元素， 如果队列满，则阻塞</li>
<li><code>take()</code>: 移除并返回队列头部的元素，如果队列为空，则阻塞</li>
<li><code>size()</code>: 返回队列长度。</li>
</ul>
<p><strong>Python 中的队列</strong></p>
<p>定义方式：</p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> queue <span class="keyword">import</span> Queue</span><br><span class="line"></span><br><span class="line"><span class="comment">## maxsize设置队列中，数据上限，小于或等于0则不限制，容器中大于这个数则阻塞，直到队列中的数据被消掉</span></span><br><span class="line">q = Queue(maxsize=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p>成员函数：</p>
<ul>
<li><code>Queue.qsize()</code> 返回队列的大致大小。</li>
<li><code>Queue.empty()</code> 如果队列为空，返回 <code>True</code> 否则返回 <code>False</code></li>
<li><code>Queue.full()</code> 如果队列是满的返回 <code>True</code> ，否则返回 <code>False</code></li>
<li><code>Queue.put(item, block=True, timeout=None)</code><ul>
<li>常用时忽略默认参数，即使用 <code>Queue.put(item)</code>。</li>
<li>将 <code>item</code> 放入队列，如果可选参数 <code>block</code> 是 <code>true</code> 并且 <code>timeout</code> 是 <code>None</code> (默认)，则在必要时阻塞至有空闲插槽可用。</li>
<li>如果 <code>timeout</code> 是个正数，将最多阻塞 <code>timeout</code> 秒，如果在这段时间没有可用的空闲插槽，将引发 <code>Full</code> 异常。</li>
<li>反之 (<code>block</code> 是 <code>false</code>)，如果空闲插槽立即可用，则把 <code>item</code> 放入队列，否则引发 <code>Full</code> 异常 ( 在这种情况下，<code>timeout</code> 将被忽略)。</li>
</ul>
</li>
<li><code>Queue.get(block=True, timeout=None)</code><ul>
<li>常用时忽略默认参数，即使用 <code>Queue.get()</code>。</li>
<li>从队列中移除并返回一个项目。如果可选参数 <code>block</code> 是 <code>true</code> 并且 <code>timeout</code> 是 <code>None</code> (默认值)，则在必要时阻塞至项目可得到。</li>
<li>如果 <code>timeout</code> 是个正数，将最多阻塞 <code>timeout</code> 秒，如果在这段时间内项目不能得到，将引发 <code>Empty</code> 异常。反之 (<code>block</code> 是 <code>false</code>)，如果一个项目立即可得到，则返回一个项目，否则引发 <code>Empty</code> 异常 (这种情况下，<code>timeout</code> 将被忽略)。</li>
</ul>
</li>
</ul>
<h4 id="题目回顾"><a href="#题目回顾" class="headerlink" title="题目回顾"></a>题目回顾</h4><blockquote>
<p>CLZ 的银行。</p>
</blockquote>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">第一行 M 次操作（M&lt;1000）</span><br><span class="line"></span><br><span class="line">第二行 到 第M+1行 输入操作</span><br><span class="line"></span><br><span class="line">格式：   IN name V</span><br><span class="line">        OUT V</span><br><span class="line">        IN name2 N</span><br><span class="line">        OUT N</span><br><span class="line">        即 第一个字符串为操作 是IN进入排队和OUT 出队</span><br><span class="line">            IN 排队 跟着两个字符串为姓名和权限V或N</span><br><span class="line">            OUT 为出队即完成操作，V和N代表那个窗口完成了操作</span><br><span class="line"></span><br><span class="line">输出：M次操作后V队列和N队列中姓名，先输出V队列后输出N队列。</span><br><span class="line"></span><br><span class="line">样例：</span><br><span class="line"></span><br><span class="line">输入：</span><br><span class="line"></span><br><span class="line">5</span><br><span class="line">IN xiaoming N</span><br><span class="line">IN Adel V</span><br><span class="line">IN laozhao N</span><br><span class="line">OUT N</span><br><span class="line">IN CLZ V</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line"></span><br><span class="line">Adel</span><br><span class="line">CLZ</span><br><span class="line">laozhao</span><br></pre></td></tr></table></figure>

<p>具体的题目讲解，我们之前就已经讲解过了，这里我们主要是来看一下预置代码的方便性。</p>
<h4 id="完整代码-1"><a href="#完整代码-1" class="headerlink" title="完整代码"></a>完整代码</h4><p>C++实现：</p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">queue&lt;string&gt; V;</span><br><span class="line">queue&lt;string&gt; N;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> M;</span><br><span class="line">    cin&gt;&gt;M;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(M--) <span class="comment">//</span></span><br><span class="line">    &#123;</span><br><span class="line">        string op,name,type;</span><br><span class="line">        cin&gt;&gt;op;</span><br><span class="line">        <span class="keyword">if</span>(op==<span class="string">&quot;IN&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cin&gt;&gt;name&gt;&gt;type;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(type==<span class="string">&quot;V&quot;</span>)</span><br><span class="line">                V.<span class="built_in">push</span>(name);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                N.<span class="built_in">push</span>(name);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            cin&gt;&gt;type;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(type==<span class="string">&quot;V&quot;</span>)</span><br><span class="line">                V.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                N.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(V.<span class="built_in">size</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt;V.<span class="built_in">front</span>()&lt;&lt;endl;</span><br><span class="line">        V.<span class="built_in">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(N.<span class="built_in">size</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt;N.<span class="built_in">front</span>()&lt;&lt;endl;</span><br><span class="line">        N.<span class="built_in">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Java 实现</strong></p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.Queue;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> Queue&lt;String&gt; V=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> Queue&lt;String&gt; N=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> M;</span><br><span class="line">        Scanner in=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        M=in.nextInt();</span><br><span class="line">        <span class="keyword">while</span>(M&gt;<span class="number">0</span>) <span class="comment">//</span></span><br><span class="line">        &#123;</span><br><span class="line">            M--;</span><br><span class="line">            String op,name,type;</span><br><span class="line">            op=in.next();</span><br><span class="line">            <span class="comment">// System.out.println(&quot;op&quot;+op);</span></span><br><span class="line">            <span class="keyword">if</span>(op.contains(<span class="string">&quot;IN&quot;</span>))</span><br><span class="line">            &#123;</span><br><span class="line">                name=in.next();</span><br><span class="line">                type=in.next();</span><br><span class="line">                <span class="keyword">if</span>(type.contains(<span class="string">&quot;V&quot;</span>)) &#123;</span><br><span class="line">                    V.offer(name);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    N.offer(name);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// System.out.println(&quot;name:&quot;+name+&quot;type:&quot;+type);</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">// System.out.println(Vqueue);</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                type=in.next();</span><br><span class="line">                <span class="keyword">if</span>(type.contains(<span class="string">&quot;V&quot;</span>))&#123;</span><br><span class="line">                    V.poll();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    N.poll();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// System.out.println(&quot;type&quot;+type);</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(V.size()!=<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(V.poll());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(N.size()!=<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(N.poll());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Python 实现</strong></p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> queue</span><br><span class="line"></span><br><span class="line">V = queue.Queue()</span><br><span class="line">N = queue.Queue()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">  M = <span class="number">0</span></span><br><span class="line">  M = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">  <span class="keyword">while</span> M &gt; <span class="number">0</span>:</span><br><span class="line">      M -= <span class="number">1</span></span><br><span class="line">      op = <span class="built_in">input</span>().split()</span><br><span class="line"></span><br><span class="line">      <span class="comment"># print(op[0])</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> op[<span class="number">0</span>] == <span class="string">&#x27;IN&#x27;</span>:</span><br><span class="line">          <span class="keyword">if</span> op[<span class="number">2</span>] == <span class="string">&quot;V&quot;</span>:</span><br><span class="line">              V.put(op[<span class="number">1</span>])</span><br><span class="line">          <span class="keyword">else</span>:</span><br><span class="line">              N.put(op[<span class="number">1</span>])</span><br><span class="line">      <span class="keyword">else</span>:</span><br><span class="line">          <span class="keyword">if</span> op[<span class="number">1</span>] == <span class="string">&quot;V&quot;</span>:</span><br><span class="line">              V.get()</span><br><span class="line">          <span class="keyword">else</span>:</span><br><span class="line">              N.get()</span><br><span class="line">          <span class="comment"># print(&#x27;out&#x27;)</span></span><br><span class="line">      <span class="comment"># print(&quot;VVVVV&quot;,Vqueue)</span></span><br><span class="line">      <span class="comment"># print(&quot;NNNN&quot;,Nqueue)</span></span><br><span class="line">      <span class="comment"># print(M)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> <span class="keyword">not</span> (V.empty()):</span><br><span class="line">      <span class="built_in">print</span>(V.get())</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> <span class="keyword">not</span> (N.empty()):</span><br><span class="line">      <span class="built_in">print</span>(N.get())</span><br></pre></td></tr></table></figure>

<h3 id="Map-映射"><a href="#Map-映射" class="headerlink" title="Map 映射"></a>Map 映射</h3><p>在之前我们学习散列表的时候我们就接触过了映射，这里我们要讲的是一种类似的数据结构。</p>
<p><code>map</code> 是一个关联容器，它提供一对一的 <code>hash</code>。</p>
<ul>
<li>第一个可以称为关键字(<code>key</code>)，每个关键字只能在 <code>map</code> 中出现一次</li>
<li>第二个可能称为该关键字的值(<code>value</code>)</li>
</ul>
<p><code>map</code> 以模板（泛型）方式实现，可以存储任意类型的数据，包括使用者自定义的数据类型。<code>Map</code> 主要用于资料一对一映射（<code>one-to-one</code>）的情況，<code>map</code> 在 <code>C++</code> 的內部的实现自建一颗红黑树，这颗树具有对数据自动排序的功能。在 <code>map</code> 内部所有的数据都是有序的。</p>
<p>比如，像是管理班级内的学生，<code>Key</code> 值为学号，<code>Value</code> 放其他信息的结构体或者类。</p>
<h4 id="C-中的-map"><a href="#C-中的-map" class="headerlink" title="C++ 中的 map"></a>C++ 中的 map</h4><p>定义方式：</p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">map&lt;<span class="type">char</span>, <span class="type">int</span>&gt; mymap1;</span><br><span class="line">map&lt;string, <span class="type">int</span>&gt; mymap2;</span><br></pre></td></tr></table></figure>

<p>一般用法：</p>
<ol>
<li>看容量。</li>
</ol>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> map.<span class="built_in">size</span>();<span class="comment">//查询map中有多少对元素</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">empty</span><span class="params">()</span></span>;<span class="comment">// 查询map是否为空</span></span><br></pre></td></tr></table></figure>

<ol>
<li>插入。</li>
</ol>
<figure class="hljs highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">map</span>.insert(<span class="built_in">make_pair</span>(key,value));</span><br><span class="line"><span class="comment">//或者</span></span><br><span class="line"><span class="built_in">map</span>.insert(<span class="built_in">pair</span>&lt;<span class="type">char</span>, <span class="type">int</span>&gt;(key, value))</span><br><span class="line"><span class="comment">//或者</span></span><br><span class="line"><span class="built_in">map</span>[key]=value</span><br></pre></td></tr></table></figure>

<ol>
<li>取值。</li>
</ol>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">map&lt;<span class="type">int</span>, string&gt; map;</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果map中没有关键字2233，使用[]取值会导致插入</span></span><br><span class="line"><span class="comment">//因此，下面语句不会报错，但会使得输出结果结果为空</span></span><br><span class="line">cout&lt;&lt;map[<span class="number">2233</span>]&lt;&lt;endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//但是使用使用at会进行关键字检查，因此下面语句会报错</span></span><br><span class="line">map.<span class="built_in">at</span>(<span class="number">2016</span>) = <span class="string">&quot;Bob&quot;</span>;</span><br></pre></td></tr></table></figure>

<ol>
<li>遍历操作</li>
</ol>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">map&lt;string, string&gt;::iterator it;</span><br><span class="line"><span class="keyword">for</span> (it = mapSet.<span class="built_in">begin</span>(); it != mapSet.<span class="built_in">end</span>(); ++it)</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;key&quot;</span> &lt;&lt; it-&gt;first &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;value&quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>查找操作</li>
</ol>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">m.<span class="built_in">count</span>(key)：<span class="comment">//由于map不包含重复的key，因此m.count(key)取值为0，或者1，表示是否包含。</span></span><br><span class="line">m.<span class="built_in">find</span>(key)：<span class="comment">//返回迭代器，判断是否存在。</span></span><br></pre></td></tr></table></figure>

<p><strong>Java 中的 map</strong></p>
<p>定义方法：</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Map</span> <span class="variable">m1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeMap</span>();</span><br></pre></td></tr></table></figure>

<p>这里我们讲的是排序的 <code>map</code> 还有不排序的 <code>map</code>，<code>java</code> 里面叫 <code>hashmap</code>，<code>C++</code> 里叫 <code>unordered_map</code>，除了不排序，用法和功能都一样。</p>
<p>二者相差无几，大家如果不需要排序可以直接使用。</p>
<p>成员方法</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>方法描述</th>
</tr>
</thead>
<tbody><tr>
<td>void clear( )</td>
<td>从此映射中移除所有映射关系（可选操作）。</td>
</tr>
<tr>
<td>boolean containsKey(Object k)</td>
<td>如果此映射包含指定键的映射关系，则返回 true。</td>
</tr>
<tr>
<td>boolean containsValue(Object v)</td>
<td>如果此映射将一个或多个键映射到指定值，则返回 true。</td>
</tr>
<tr>
<td>boolean equals(Object obj)</td>
<td>比较指定的对象与此映射是否相等。</td>
</tr>
<tr>
<td>Object get(Object k)</td>
<td>返回指定键所映射的值；如果此映射不包含该键的映射关系，则返回 null。</td>
</tr>
<tr>
<td>int hashCode( )</td>
<td>返回此映射的哈希码值。</td>
</tr>
<tr>
<td>boolean isEmpty( )</td>
<td>如果此映射未包含键-值映射关系，则返回 true。</td>
</tr>
<tr>
<td>Set keySet( )</td>
<td>返回此映射中包含的键的 Set 视图。</td>
</tr>
<tr>
<td>Object put(Object k, Object v)</td>
<td>将指定的值与此映射中的指定键关联</td>
</tr>
<tr>
<td>Object remove(Object k)</td>
<td>如果存在一个键的映射关系，则将其从此映射中移除（可选操作）。</td>
</tr>
<tr>
<td>int size( )</td>
<td>返回此映射中的键-值映射关系数。</td>
</tr>
<tr>
<td>Collection values( )</td>
<td>返回此映射中包含的值的 Collection 视图。</td>
</tr>
</tbody></table>
<p><strong>Python 字典</strong></p>
<p>在 <code>Python</code> 中我们不叫映射，也不叫 <code>map</code>，我们称作字典。用法跟 <code>Java</code> 和 <code>c++</code> 都是有一定区别的。</p>
<ol>
<li>字典的创建。</li>
</ol>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">massege=&#123;<span class="string">&#x27;小李&#x27;</span>:<span class="string">&#x27;123124543643&#x27;</span>,<span class="string">&#x27;xiaohua&#x27;</span>:<span class="string">&#x27;17855666&#x27;</span>,<span class="string">&#x27;LiMing&#x27;</span>:<span class="string">&#x27;1249699859456&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#或者创建空的字典</span></span><br><span class="line">empty_dict = &#123;&#125;</span><br><span class="line"><span class="comment">#或者使用元组作为key</span></span><br><span class="line">group_dict = &#123;(<span class="number">60</span>, <span class="number">99</span>):<span class="string">&#x27;good&#x27;</span>, <span class="number">100</span>:<span class="string">&#x27;nice&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>字典的添加。</li>
</ol>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果字典内不含有相应的Key值，则会执行添加操作</span></span><br><span class="line"><span class="built_in">dict</span>[key]=value</span><br></pre></td></tr></table></figure>

<ol>
<li>字典的修改。</li>
</ol>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果字典内含有相应的Key值，则会执行更新操作</span></span><br><span class="line"><span class="built_in">dict</span>[key]=new_value</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用update()修改</span></span><br><span class="line"><span class="comment"># update() 方法可使用一个字典所包含的 key-value 对来更新己有的字典。如果有就修改，没有就添加。</span></span><br><span class="line"><span class="built_in">dict</span>.update(&#123;<span class="string">&#x27;key&#x27;</span>:<span class="number">123</span>,<span class="string">&#x27;key2&#x27;</span>:<span class="number">234</span>&#125;)</span><br></pre></td></tr></table></figure>

<ol>
<li>字典的删除。</li>
</ol>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">del</span> <span class="built_in">dict</span>[<span class="string">&#x27;key&#x27;</span>]  <span class="comment"># 删除键是&#x27;key&#x27;的条目</span></span><br><span class="line"><span class="built_in">dict</span>.clear()      <span class="comment"># 清空字典所有条目</span></span><br><span class="line"><span class="keyword">del</span> <span class="built_in">dict</span>          <span class="comment"># 删除字典</span></span><br></pre></td></tr></table></figure>

<ol>
<li>字典的访问。</li>
</ol>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dict</span> = &#123;<span class="string">&#x27;Name&#x27;</span>: <span class="string">&#x27;Zara&#x27;</span>, <span class="string">&#x27;Age&#x27;</span>: <span class="string">&#x27;7&#x27;</span>&#125;</span><br><span class="line"><span class="built_in">print</span> (<span class="built_in">dict</span>[<span class="string">&#x27;Name&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#当然如果key值不存在，将会抛出异常</span></span><br><span class="line"><span class="comment">#也可以是用get()方法,不存在会返回None，但不会抛出异常</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dict</span>.get(<span class="string">&#x27;Name&#x27;</span>))</span><br></pre></td></tr></table></figure>

<h3 id="题目演练"><a href="#题目演练" class="headerlink" title="题目演练"></a>题目演练</h3><blockquote>
<p>《弗里石的的语言》</p>
<p>小发明家弗里想创造一种新的语言，众所周知，发明一门语言是非常困难的，首先你就要克服一个困难就是，有大量的单词需要处理，现在弗里求助你帮他写一款程序，判断是否出现重复的两个单词。</p>
<p>有重复就输出重复单词，重复就输出 <code>NO</code>，多个重复输出最先出现的哪一个。</p>
</blockquote>
<p>输入：</p>
<p>第 11 行，输入 �<em>N</em>，代表共计创造了多少个单词 第 22 行至第 �+1<em>N</em>+1 行，输入 �<em>N</em> 个单词</p>
<p>格式：</p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fjsdfgdfsg</span><br><span class="line">fdfsgsdfg</span><br><span class="line">bcvxbxfyres</span><br></pre></td></tr></table></figure>

<p>现在有以下样例输入：</p>
<p>样例 1</p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">输入：</span><br><span class="line"></span><br><span class="line">6</span><br><span class="line">1fagas</span><br><span class="line">dsafa32j</span><br><span class="line">lkiuopybncv</span><br><span class="line">hfgdjytr</span><br><span class="line">cncxfg</span><br><span class="line">sdhrest</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line"></span><br><span class="line">NO</span><br></pre></td></tr></table></figure>

<p>样例 2</p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">输入：</span><br><span class="line"></span><br><span class="line">5</span><br><span class="line">sdfggfds</span><br><span class="line">fgsdhsdf</span><br><span class="line">dsfhsdhr</span><br><span class="line">sdfhdfh</span><br><span class="line">sdfggfds</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line"></span><br><span class="line">sdfggfds</span><br></pre></td></tr></table></figure>

<p>这个题的思路在前面我们已经讲过了，这里我们换一种方式解题。</p>
<p>使用映射和字典解题，是的原来的代码减少了超过一半，但是思路还是一样，可以说是非常的巧妙且省力。</p>
<h4 id="C-解法"><a href="#C-解法" class="headerlink" title="C++ 解法"></a>C++ 解法</h4><figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"> <span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"> <span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">map&lt;string,<span class="type">bool</span>&gt; mp;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    string ans=<span class="string">&quot;NO&quot;</span>;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        string word;</span><br><span class="line">        cin&gt;&gt;word;</span><br><span class="line">        <span class="keyword">if</span>(mp.<span class="built_in">count</span>(word))&#123;</span><br><span class="line">            ans=word;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span> mp[word]=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;ans&lt;&lt;endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Java 解法</strong></p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">import</span> java.util.TreeMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> Map mp=<span class="keyword">new</span> <span class="title class_">TreeMap</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">  &#123;</span><br><span class="line"></span><br><span class="line">      <span class="type">int</span> n;</span><br><span class="line">      <span class="type">boolean</span> flag=<span class="literal">false</span>;</span><br><span class="line">      Scanner in=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">      String ans=<span class="string">&quot;NO&quot;</span>;</span><br><span class="line">      n=in.nextInt();</span><br><span class="line">      <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">      &#123;</span><br><span class="line">          String word;</span><br><span class="line">          word=in.next();</span><br><span class="line">          <span class="comment">// System.out.println(Hx(word));</span></span><br><span class="line">          <span class="keyword">if</span>(flag) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span>(mp.containsKey(word))&#123;</span><br><span class="line">              flag=<span class="literal">true</span>;</span><br><span class="line">              ans=word;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">else</span> &#123;</span><br><span class="line">              mp.put(word,<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      System.out.println(ans);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Python 解法</strong></p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dict</span>=&#123;&#125;</span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  N=<span class="built_in">int</span> (<span class="built_in">input</span>())</span><br><span class="line">  ans = <span class="string">&#x27;NO&#x27;</span></span><br><span class="line">  flag = <span class="literal">False</span></span><br><span class="line">  <span class="keyword">while</span> N&gt;<span class="number">0</span>:</span><br><span class="line">      N-=<span class="number">1</span></span><br><span class="line">      word=<span class="built_in">input</span>()</span><br><span class="line">      <span class="keyword">if</span>(<span class="keyword">not</span>(flag)) :</span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span>(<span class="built_in">dict</span>.get(word)!=<span class="literal">None</span>):</span><br><span class="line">              flag=<span class="literal">True</span></span><br><span class="line">              ans=word</span><br><span class="line">          <span class="keyword">else</span>:</span><br><span class="line">              <span class="built_in">dict</span>[word]=<span class="literal">True</span></span><br><span class="line">  <span class="built_in">print</span>(ans)</span><br></pre></td></tr></table></figure>


      
    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%A4%87%E8%B5%9B/" rel="tag"><i class="fas fa-tags"></i>蓝桥杯备赛</a>
        
      </div>
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="https://actz123.github.io/2024/02/22/%E4%BA%8C%E5%88%86%E7%AE%97%E6%B3%95/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="zdx">
        <meta itemprop="description" content="">
        <meta itemprop="image" content="/images/avatar.png">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="Actz">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2024/02/22/%E4%BA%8C%E5%88%86%E7%AE%97%E6%B3%95/" itemprop="url">二分算法</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2024-02-22T17:35:12+08:00">2024-02-22 17:35:12</time></span>
        </span>
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-categories">
          
          <i class="far fa-folder-open"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%86%B2%E5%88%BA%E8%90%A5/" itemprop="url" rel="index"><span itemprop="name">蓝桥杯冲刺营</span></a></span><i class="fas fa-angle-right"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%86%B2%E5%88%BA%E8%90%A5/7-%E4%BA%8C%E5%88%86%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">7.二分算法</span></a></span>
        </span>
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <h1 id="二分查找算法"><a href="#二分查找算法" class="headerlink" title="二分查找算法"></a>二分查找算法</h1><h4 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h4><ul>
<li>二分查找原理讲解</li>
<li>在单调递增序列 <code>a</code> 中查找 <code>x</code> 或 <code>x</code> 的后继</li>
<li>在单调递增序列 <code>a</code> 中查找 <code>x</code> 或 <code>x</code> 的前驱</li>
</ul>
<h2 id="二分查找算法讲解"><a href="#二分查找算法讲解" class="headerlink" title="二分查找算法讲解"></a>二分查找算法讲解</h2><p>枚举查找即顺序查找，实现原理是逐个比较数组 <code>a[0:n-1]</code> 中的元素，直到找到元素 <code>x</code> 或搜索整个数组后确定 <code>x</code> 不在其中。最坏情况下需要比较 <code>N</code> 次，时间复杂度是 <code>O(n)</code>，属于线性阶算法。</p>
<p>而二分查找是一种折半查找方法。该方法将 <code>N</code> 个元素分成大致相等的两部分，选取中间元素与查找的元素进行比较。如果相等，则查找成功；如果查找元素小于中间元素，则在左半区继续查找；如果查找元素大于中间元素，则在右半区继续查找。每次都将范围缩小至原来的一半，因此时间复杂度是 <code>O(log2n)</code>。需要注意的是，二分查找的前提是数组有序，一般是从小到大排列。</p>
<p><strong>折半查找的基本思想：</strong></p>
<p>在有序表中（<code>low, high, low&lt;=high</code>），取中间记录即 <code>a[(high+low)/2]</code> 作为比较对象。</p>
<ul>
<li>若给定值与中间记录的关键码相等，则查找成功。</li>
<li>若给定值小于中间记录的关键码，则在中间记录的左半区继续查找。</li>
<li>若给定值大于中间记录的关键码，则在中间记录的右半区继续查找。</li>
</ul>
<p>不断重复上述过程，直到查找成功或所查找的区域无记录，查找失败。</p>
<p><strong>二分查找的特征：</strong></p>
<ol>
<li>答案具有单调性。</li>
<li>二分答案的问题往往有固定的问法，例如：令最大值最小（最小值最大），求满足条件的最大（小）值等。</li>
</ol>
<p><strong>折半查找一般过程：</strong></p>
<p><img src="/./../imgs/%E4%BA%8C%E5%88%86%E7%AE%97%E6%B3%95/83f052e54f7e7907738ba7730a9b3297-0.png" alt="图片描述"></p>
<p>下面是对文本的润色：</p>
<figure class="hljs highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">Step 1:</span><br><span class="line"></span><br><span class="line">假设存在一个有序数组：</span><br><span class="line">下标[ 0   1   2   3   4   5   6   7   8    9    10   11   12 ]</span><br><span class="line">数据[ 7   14  18  21  23  29  31  35   38   42   46   49  52 ]</span><br><span class="line">      ↑                                                   ↑</span><br><span class="line">    low=0                                              high=12</span><br><span class="line"></span><br><span class="line">                            mid=(low+high)/2</span><br><span class="line">                            mid=(0+12)/2</span><br><span class="line">                            mid=6</span><br><span class="line">                            [mid]=31 &gt; 14，所以选择左半部分</span><br><span class="line"></span><br><span class="line">操作：</span><br><span class="line">    此时令low不变，high=mid-1=5</span><br><span class="line"></span><br><span class="line">Step 2:</span><br><span class="line"></span><br><span class="line">下标[ 0   1   2   3   4   5   6   7   8    9    10   11   12 ]</span><br><span class="line">数据[ 7   14  18  21  23  29  31  35   38   42   46   49  52 ]</span><br><span class="line">      ↑                   ↑</span><br><span class="line">   low=0                 high=5</span><br><span class="line"></span><br><span class="line">            mid=(low+high)/2</span><br><span class="line">            mid=(0+6)/2</span><br><span class="line">            mid=3</span><br><span class="line">            [mid]=21 &gt; 14，所以选择左半部分</span><br><span class="line"></span><br><span class="line">操作：</span><br><span class="line">    此时令low不变，high=mid-1=2</span><br><span class="line"></span><br><span class="line">Step 3:</span><br><span class="line"></span><br><span class="line">下标[ 0   1   2   3   4   5   6   7   8    9    10   11   12 ]</span><br><span class="line">数据[ 7   14  18  21  23  29  31  35   38   42   46   49  52 ]</span><br><span class="line">      ↑       ↑</span><br><span class="line">   low=0    high=2</span><br><span class="line"></span><br><span class="line">            mid=(low+high)/2</span><br><span class="line">            mid=(0+2)/2</span><br><span class="line">            mid=1</span><br><span class="line">            [mid]=14 = 14  找到答案</span><br><span class="line"></span><br><span class="line">操作：</span><br><span class="line">    返回下标</span><br></pre></td></tr></table></figure>

<p>这个文本看起来更加清晰，修正了一些不规范的表达。</p>
<h3 id="整数二分法常用算法模板"><a href="#整数二分法常用算法模板" class="headerlink" title="整数二分法常用算法模板"></a>整数二分法常用算法模板</h3><h4 id="C-语言描述"><a href="#C-语言描述" class="headerlink" title="C++ 语言描述"></a>C++ 语言描述</h4><figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在单调递增序列a中查找&gt;=x的数中最小的一个（即x或x的后继）</span></span><br><span class="line"><span class="keyword">while</span> (low &lt; high)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> mid = (low + high) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (a[mid] &gt;= x)</span><br><span class="line">        high = mid;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        low = mid + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在单调递增序列a中查找&lt;=x的数中最大的一个（即x或x的前驱）</span></span><br><span class="line"><span class="keyword">while</span> (low &lt; high)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> mid = (low + high + <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (a[mid] &lt;= x)</span><br><span class="line">        low = mid;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        high = mid - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Python 语言描述</strong></p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在单调递增序列a中查找&gt;=x的数中最小的一个（即x或x的后继）</span></span><br><span class="line"><span class="keyword">while</span> low&lt;high:</span><br><span class="line"></span><br><span class="line">  mid=(low+high)/<span class="number">2</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(a[mid]&gt;=x):</span><br><span class="line">      high=mid</span><br><span class="line"></span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">      low=mid+<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#在单调递增序列a中查找&lt;=x的数中最大的一个（即x或x的前驱）</span></span><br><span class="line"><span class="keyword">while</span> low&lt;high:</span><br><span class="line"></span><br><span class="line">  mid=(low+high+<span class="number">1</span>)/<span class="number">2</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(a[mid]&lt;=x):</span><br><span class="line">      low=mid</span><br><span class="line"></span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">      high = mid-<span class="number">1</span></span><br></pre></td></tr></table></figure>

<p><strong>Java 语言描述</strong></p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在单调递增序列a中查找&gt;=x的数中最小的一个（即x或x的后继）</span></span><br><span class="line"><span class="keyword">while</span> (low &lt; high) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (low + high) / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (a[mid] &gt;= x)</span><br><span class="line">      high= mid;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">      low = mid + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在单调递增序列a中查找&lt;=x的数中最大的一个（即x或x的前驱）</span></span><br><span class="line"><span class="keyword">while</span> (low &lt; high) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (low + high + <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (a[mid] &lt;= x)</span><br><span class="line">      low = mid;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">      high = mid - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此处我们先分整数的二分查找法的常用模版，关于实数的部分，我们后面再讲。</p>
<blockquote>
<p>下面可能会有同学会疑问道：为什么采用这一套代码的而不是采用查找等于的 X？</p>
<p>是因为这样的适用范围更广，当有 X 时这套代码就返回 X 的位置。如果没有 X，就返回 &lt;&#x3D;x 的数中最大的一个或者 &gt;&#x3D;x 的数中最小的一个。</p>
</blockquote>
<h3 id="分巧克力"><a href="#分巧克力" class="headerlink" title="分巧克力"></a>分巧克力</h3><p><a target="_blank" rel="noopener" href="https://www.lanqiao.cn/problems/99/learning/">2017 年省赛真题链接</a>。</p>
<p><strong>题目描述:</strong> 儿童节那天有 K 位小朋友到小明家做客。小明拿出了珍藏的巧克力招待小朋友们。</p>
<p>小明一共有 <em>N</em> 块巧克力，其中第 <em>i</em> 块是 ×<em>H**i</em>×<em>W**i</em> 的方格组成的长方形。为了公平起见，</p>
<p>小明需要从这 <em>N</em> 块巧克力中切出 K 块巧克力分给小朋友们。切出的巧克力需要满足：</p>
<ol>
<li>形状是正方形，边长是整数;</li>
<li>大小相同;</li>
</ol>
<p>例如一块 6x5 的巧克力可以切出 6 块 2x2 的巧克力或者 2 块 3x3 的巧克力。</p>
<p>当然小朋友们都希望得到的巧克力尽可能大，你能帮小明计算出最大的边长是多少么？</p>
<p><strong>输入描述:</strong></p>
<p>第一行包含两个整数 ,<em>N</em>,<em>K</em> (1≤,≤1051≤<em>N</em>,<em>K</em>≤105)。</p>
<p>以下 N 行每行包含两个整数 ,<em>H**i</em>,<em>W**i</em> (1≤,≤1051≤<em>H**i</em>,<em>W**i</em>≤105)。</p>
<p>输入保证每位小朋友至少能获得一块 1x1 的巧克力。</p>
<p><strong>输出描述:</strong></p>
<p>输出切出的正方形巧克力最大可能的边长。</p>
<p><strong>输入输出样例:</strong></p>
<p><strong>示例:</strong></p>
<blockquote>
<p>输入</p>
</blockquote>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2 10 6 5 5 6</span><br></pre></td></tr></table></figure>

<blockquote>
<p>输出</p>
</blockquote>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure>

<p><strong>运行限制:</strong></p>
<ul>
<li>最大运行时间：2s</li>
<li>最大运行内存: 256M</li>
</ul>
<p>注意：</p>
<ol>
<li>请严格按要求输出，不要画蛇添足地打印类似：“请您输入…”的多余内容。</li>
<li>不要调用依赖于编译环境或操作系统的特殊函数。</li>
<li>所有依赖的函数必须明确地在源文件中</li>
<li>不能通过工程设置而省略常用头文件。</li>
</ol>
<h4 id="题目分析"><a href="#题目分析" class="headerlink" title="题目分析"></a>题目分析</h4><p>简单思路，边长的最大规模为 100000100000；我们可以枚举出所有的情况。按从大到小的顺序进行切割，直到找到满足要求的巧克力边长。</p>
<p>在判断边长是否满足条件时：求一块长方形（ℎ∗）（<em>h</em>∗<em>w</em>）最多被分成的正方形（∗）（<em>l<strong>e</strong>n</em>∗<em>l<strong>e</strong>n</em>）巧克力个数为：</p>
<p>&#x3D;(ℎ&#x2F;)∗(&#x2F;)<em>c<strong>n</strong>t</em>&#x3D;(<em>h</em>&#x2F;<em>l<strong>e</strong>n</em>)∗(<em>w</em>&#x2F;<em>l<strong>e</strong>n</em>)</p>
<p>但是使用朴素算法枚举时间复杂度()∗()&#x3D;(2)<em>O</em>(<em>n</em>)∗<em>O</em>(<em>n</em>)&#x3D;<em>O</em>(<em>n</em>2) 会超时，所以改用 22 分查找法，这找到符合要求的最大的一个。</p>
<p>即用在单调递增序列 <em>a</em> 中查找 &lt;&#x3D;&lt;&#x3D;<em>x</em> 的数中最大的一个（即 <em>x</em> 或 <em>x</em> 的前驱）即可，原本这里的条件是 &lt;&#x3D;&lt;&#x3D;<em>x</em> ，我们将其换成验证即可。</p>
<h4 id="代码解答"><a href="#代码解答" class="headerlink" title="代码解答"></a>代码解答</h4><p>C++ 实现：</p>
<figure class="hljs highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MAXN=<span class="number">100010</span>;</span><br><span class="line"><span class="type">int</span> n,k;</span><br><span class="line"><span class="type">int</span> h[MAXN],w[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">pd</span><span class="params">(<span class="type">int</span> l)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        sum+=(h[i]/l)*(w[i]/l);</span><br><span class="line">        <span class="keyword">if</span>(sum&gt;=k)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;k;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;n; i++)</span><br><span class="line">        cin&gt;&gt;h[i]&gt;&gt;w[i];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//找到二分查找的上界</span></span><br><span class="line">    <span class="type">int</span> high=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        high=<span class="built_in">max</span>(high,h[i]);</span><br><span class="line">        high=<span class="built_in">max</span>(high,w[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 二分下届由题意可得至少为1</span></span><br><span class="line">    <span class="type">int</span> low=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 由于本题目就是求符合要求的Mid 值所以要将mid定义在二分查找外边</span></span><br><span class="line">    <span class="type">int</span> mid=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(low&lt;high)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        mid = (low + high+<span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">pd</span>(mid))</span><br><span class="line">            low=mid;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            high = mid - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        cout&lt;&lt;low&lt;&lt;&quot; &quot;&lt;&lt;high&lt;&lt;endl;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//因为low=high所以输出哪一个都一样</span></span><br><span class="line">    cout&lt;&lt;low;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>查找上界这里可以直接输入的时候查询，这道题实际上是可以少次操作的，代码如下。</p>
<p><strong>Python 实现</strong></p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">N=K=<span class="number">0</span></span><br><span class="line">h=[]</span><br><span class="line">w=[]</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pd</span>(<span class="params">l</span>):</span><br><span class="line"></span><br><span class="line"> sum1=<span class="number">0</span></span><br><span class="line"> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(N):</span><br><span class="line"></span><br><span class="line">   sum1+= (h[i]//l)* (w[i]//l)</span><br><span class="line">   <span class="comment"># Java C++ 的除法都是自己取整，Python会换成小数，Python的取整除法是//</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span> sum1&gt;=K :</span><br><span class="line">       <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">   inFor = <span class="built_in">input</span>().split()</span><br><span class="line"></span><br><span class="line">   N=<span class="built_in">int</span>(inFor[<span class="number">0</span>])</span><br><span class="line">   K=<span class="built_in">int</span>(inFor[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">   <span class="comment">#找到二分查找的上界</span></span><br><span class="line">   high=<span class="number">0</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(N):</span><br><span class="line">       wi, hi = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())</span><br><span class="line">       w.append(wi)</span><br><span class="line">       h.append(hi)</span><br><span class="line">       high=<span class="built_in">max</span>(high,<span class="built_in">max</span>((hi,wi)))</span><br><span class="line"></span><br><span class="line">   <span class="comment"># 二分下届由题意可得至少为1</span></span><br><span class="line">   low=<span class="number">1</span></span><br><span class="line">   <span class="comment">#由于本题目就是求符合要求的Mid 值所以要将mid定义在二分查找外边</span></span><br><span class="line">   mid=<span class="number">0</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">while</span> low&lt;high :</span><br><span class="line"></span><br><span class="line">       mid= <span class="built_in">int</span> ( (low+high+<span class="number">1</span>)//<span class="number">2</span>)</span><br><span class="line">       <span class="keyword">if</span> pd(mid):</span><br><span class="line">           low=mid</span><br><span class="line">       <span class="keyword">else</span>:</span><br><span class="line">           high=mid-<span class="number">1</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">#因为low=high所以输出哪一个都一样</span></span><br><span class="line">   <span class="built_in">print</span>(low)</span><br></pre></td></tr></table></figure>

<p><strong>Java 实现</strong></p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.Integer.max;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="type">int</span> n, k;</span><br><span class="line">  <span class="keyword">static</span> <span class="type">int</span> h[] = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">100005</span>];</span><br><span class="line">  <span class="keyword">static</span> <span class="type">int</span> w[] = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">100005</span>];</span><br><span class="line">  <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">pd</span><span class="params">(<span class="type">int</span> l)</span> &#123;</span><br><span class="line">      <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">          sum += (h[i] / l) * (w[i] / l);</span><br><span class="line">          <span class="keyword">if</span> (sum &gt;= k) &#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">      n = in.nextInt();</span><br><span class="line">      k = in.nextInt();</span><br><span class="line">      <span class="comment">//找到二分查找的上界</span></span><br><span class="line">      <span class="type">int</span> <span class="variable">high</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">          h[i] = in.nextInt();</span><br><span class="line">          w[i] = in.nextInt();</span><br><span class="line">          high = max(high, h[i]);</span><br><span class="line">          high = max(high, w[i]);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 二分下届由题意可得至少为1</span></span><br><span class="line">      <span class="type">int</span> <span class="variable">low</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">      <span class="comment">// 由于本题目就是求符合要求的Mid 值所以要将mid定义在二分查找外边</span></span><br><span class="line">      <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">while</span> (low &lt; high) &#123;</span><br><span class="line">          mid = (low + high + <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">          <span class="keyword">if</span> (pd(mid))</span><br><span class="line">              low = mid;</span><br><span class="line">          <span class="keyword">else</span></span><br><span class="line">              high = mid - <span class="number">1</span>;</span><br><span class="line">          <span class="comment">//        cout&lt;&lt;low&lt;&lt;&quot; &quot;&lt;&lt;high&lt;&lt;endl</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//因为low=high所以输出哪一个都一样</span></span><br><span class="line">      System.out.println(low);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>模板中的 &lt;&#x3D; 和 &#x3D;&gt; 都可以换成其他判定条件，像上面根据题目分析即可。</strong></p>
<h2 id="M-次方根"><a href="#M-次方根" class="headerlink" title="M 次方根"></a>M 次方根</h2><p><strong>题目描述:</strong></p>
<p>小 A 最近在学高等数学，他发现了一道题，求273327。现在已知，小 A 开始计算，11 的三次方得11，22 的三次方得88，33 的三次方得2727，然后他很高兴的填上了33。</p>
<p>接着他要求16455164。然后他开始11 的三次方得11，22 的三次方得88，33 的三次方得2727…</p>
<p>直到他算到了秃头，也没有找到答案。</p>
<p>这时一旁的小 B 看不下去了，说这题答案又不是个整数。小 A 震惊，原来如此。作为程序高手的小 A，打算设计一个程序用于求解 <em>M</em> 次根下<em>N</em>的值。</p>
<p>但是由于要考虑精度范围，答案必须要保留 77 位小数，连三次根号下2727都要掰手指的小 A 又怎么会设计呢。请你帮小 A 设计一个程序用于求解 <em>M</em> 次根号<em>N</em>。</p>
<p>数据范围：</p>
<p>1≤≤151≤<em>N</em>≤1<em>e</em>5 1≤≤1001≤<em>M</em>≤100 且 &lt;<em>M</em>&lt;<em>N</em></p>
<p><strong>要求输入:</strong></p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入描述:</span><br><span class="line"></span><br><span class="line">第一行输入整数 N 和 M，数据间用空格隔开。</span><br></pre></td></tr></table></figure>

<p><strong>要求输出：</strong></p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输出描述:</span><br><span class="line"></span><br><span class="line">输出一个整数，并保留 7 位小数。</span><br></pre></td></tr></table></figure>

<p><strong>样例:</strong></p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">输入样例：</span><br><span class="line"></span><br><span class="line">27 3</span><br><span class="line"></span><br><span class="line">输出样例：</span><br><span class="line"></span><br><span class="line">3.000000</span><br></pre></td></tr></table></figure>

<p><strong>运行限制:</strong></p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">最大运行时间：1s</span><br><span class="line">最大运行内存: 256M</span><br><span class="line"></span><br><span class="line">注意：</span><br><span class="line">1. 请严格按要求输出，不要画蛇添足地打印类似：“请您输入…” 的多余内容。</span><br><span class="line">2. 不要调用依赖于编译环境或操作系统的特殊函数。</span><br><span class="line">3. 所有依赖的函数必须明确地在源文件中。</span><br><span class="line">4. 不能通过工程设置而省略常用头文件。</span><br></pre></td></tr></table></figure>

<h4 id="题目分析-1"><a href="#题目分析-1" class="headerlink" title="题目分析"></a>题目分析</h4><p>前面讲的都是整数二分，其实二分法还是可以用于实数。这个题目比较难，很多同学可能想不明白，想不明白就多读题，写写画画理解一下。这个题还有很多解法，现在告诉你了这道理用二分可以解答，请设计一个二分程序。</p>
<p>首先是这道题我们怎么下手：</p>
<p>根据前面的知识，我们要找到一个具有单调性的数列，去二分。这个题的关键是我们要去二分什么，这里可以二分的是 <em>a**M</em> 中的 <em>a</em>，所以我们要先想办法设计出用于处理实数二分的代码。</p>
<p>这里给大家两个模板，都可以大家选择一个使用即可：</p>
<p>C++ 模版：</p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//模版一：实数域二分，设置eps法</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//令 eps 为小于题目精度一个数即可。比如题目说保留4位小数，0.0001 这种的。那么 eps 就可以设置为五位小数的任意一个数 0.00001- 0.00009 等等都可以。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//一般为了保证精度我们选取精度/100 的那个小数，即设置 eps= 0.0001/100 =1e-6</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (l + eps &lt; r)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">double</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">pd</span>(mid))</span><br><span class="line">        r = mid;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        l = mid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//模版二：实数域二分，规定循环次数法</span></span><br><span class="line"><span class="comment">//通过循环一定次数达到精度要求，这个一般 log2N &lt; 精度即可。N 为循环次数，在不超过时间复杂度的情况下，可以选择给 N 乘一个系数使得精度更高。</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">double</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">pd</span>(mid))</span><br><span class="line">        r = mid;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        l = mid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Python 模版:</strong></p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 实数域二分，设置eps法</span></span><br><span class="line"><span class="comment"># 令eps 为小于题目精度一个数即可，比如题目说保留4位小数，0.0001 这种的。那么eps 就可以设置为五位小数的任意一个数 0.00001- 0.00009 等等都可以。一般为了保证精度我们选取精度/100 的那个小数</span></span><br><span class="line"></span><br><span class="line">eps = <span class="number">1e-6</span></span><br><span class="line"><span class="keyword">while</span> l + eps &lt; r:</span><br><span class="line">  mid = (l + r) / <span class="number">2</span></span><br><span class="line">  <span class="keyword">if</span> (pd(mid)):</span><br><span class="line">      r = mid</span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">      l = mid</span><br><span class="line"></span><br><span class="line"><span class="comment"># 实数域二分，规定循环次数法</span></span><br><span class="line"><span class="comment"># 通过循环一定次数达到精度要求，这个一般 log2N&lt; 精度即可。N 为循环次数，在不超过时间复杂度的情况下，可以选择给N乘一个系数使得精度更高。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">  mid = (l + r) / <span class="number">2</span></span><br><span class="line">  <span class="keyword">if</span> (pd(mid)):</span><br><span class="line">      r = mid</span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">      l = mid</span><br></pre></td></tr></table></figure>

<p><strong>Java 模版:</strong></p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//令eps 为小于题目精度一个数即可。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//比如题目说保留4位小数，0.0001 这种的。那么eps 就可以设置为五位小数的任意一个数 0.00001- 0.00009 等等都可以。一般为了保证精度我们选取精度 /100 的那个小数，即设置  eps= 0.0001/100 =1e-6。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (l + eps &lt; r) &#123;</span><br><span class="line">    <span class="type">double</span> <span class="variable">mid</span> <span class="operator">=</span> (l + r) / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (pd(mid))</span><br><span class="line">      r = mid;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">      l = mid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实数域二分，规定循环次数法</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//通过循环一定次数达到精度要求，这个一般log2N&lt; 精度即可。N为循环次数，在不超过时间复杂度的情况下，可以选择给N乘一个系数使得精度更高。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">double</span> <span class="variable">mid</span> <span class="operator">=</span> (l + r) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (pd(mid))</span><br><span class="line">      r = mid;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">      l = mid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>模板讲完了，然后我们就要考虑判定条件了，怎样判定是否存在满足大于平均值的区间。当然这个题你可以使用语言中自带开方软件，但是我们还是联系一下实数的二分代码。</p>
<p>关于判定条件，我们应该设计一个代码用于比较 <em>a**m</em> 和 <em>N</em> 的大小关系。</p>
<p>在我们代码中：</p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">pd</span>(mid))</span><br><span class="line">    r = mid;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    l = mid;</span><br></pre></td></tr></table></figure>

<p><em>p**d</em> 成功的情况，一定是 <em>p**d</em> 的 <em>m<strong>i</strong>d</em> 符合条件，且小于 <em>m<strong>i</strong>d</em> 的一定符合条件。因此我们要在大于 <em>m<strong>i</strong>d</em> 中继续查找，找到更大的 <em>m<strong>i</strong>d</em>。</p>
<p>所以我们可以设计出如下判定条件:</p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">double</span> <span class="title">pd</span><span class="params">(<span class="type">double</span> a,<span class="type">int</span> m)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">double</span> c=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(m&gt;<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        c=c*a;</span><br><span class="line">        m--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(c&gt;=n)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="代码解答-1"><a href="#代码解答-1" class="headerlink" title="代码解答"></a>代码解答</h4><p>C++ 实现：</p>
<figure class="hljs highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iomanip&gt;</span> <span class="comment">//用于浮点数输出</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">double</span> n,l,r,mid;</span><br><span class="line"><span class="type">double</span> eps=<span class="number">1e-8</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">pd</span><span class="params">(<span class="type">double</span> a,<span class="type">int</span> m)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">double</span> c=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(m&gt;<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        c=c*a;</span><br><span class="line">        m--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(c&gt;=n)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> m;</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="comment">//设置二分边界</span></span><br><span class="line">    l=<span class="number">0</span>,r=n;</span><br><span class="line"><span class="comment">//实数二分</span></span><br><span class="line">    <span class="keyword">while</span> (l + eps &lt; r)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">double</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">pd</span>(mid,m))</span><br><span class="line">            r = mid;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            l = mid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout&lt;&lt;fixed&lt;&lt;<span class="built_in">setprecision</span>(<span class="number">7</span>)&lt;&lt;l;</span><br><span class="line">    <span class="comment">//一般使用print</span></span><br><span class="line">    <span class="comment">//printf(&quot;%x.yf&quot;,n)</span></span><br><span class="line">    <span class="comment">//其中X是固定整数长度，小数点前的整数位数不够，会在前面补0</span></span><br><span class="line">    <span class="comment">//y是保留小数位数，不够补零</span></span><br><span class="line">    <span class="comment">//printf(&quot;%.7f&quot;,l);</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>查找上界这里可以直接输入的时候查询，这道题实际上是可以少次操作的，代码如下。</p>
<p><strong>Python 实现</strong></p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">0.0</span></span><br><span class="line">m = <span class="number">0</span></span><br><span class="line">l = <span class="number">0.0</span></span><br><span class="line">r = <span class="number">0.0</span></span><br><span class="line">mid = <span class="number">0.0</span></span><br><span class="line">eps = <span class="number">0.00000001</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pd</span>(<span class="params">a, m</span>):</span><br><span class="line">  c = <span class="number">1.0</span></span><br><span class="line">  cnt = <span class="built_in">int</span>(m)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> cnt &gt; <span class="number">0</span>:</span><br><span class="line">      c = c * a</span><br><span class="line">      cnt -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> c &gt;= n:</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">  n, m = <span class="built_in">input</span>().split()</span><br><span class="line"></span><br><span class="line">  l = <span class="number">0</span></span><br><span class="line">  r=n=<span class="built_in">int</span>(n)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> l + eps &lt; r:</span><br><span class="line">      mid = (l + r) / <span class="number">2</span></span><br><span class="line">      <span class="keyword">if</span> (pd(mid, m)):</span><br><span class="line">          r = mid</span><br><span class="line">      <span class="keyword">else</span>:</span><br><span class="line">          l = mid</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;%.7f&quot;</span> % l)</span><br></pre></td></tr></table></figure>

<p><strong>Java 实现</strong></p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="type">double</span> n, l, r, mid;</span><br><span class="line">  <span class="keyword">static</span> <span class="type">double</span> <span class="variable">eps</span> <span class="operator">=</span> <span class="number">1e-8</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">pd</span><span class="params">(<span class="type">double</span> a, <span class="type">int</span> m)</span> &#123;</span><br><span class="line">      <span class="type">double</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">while</span> (m &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          c = c * a;</span><br><span class="line">          m--;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (c &gt;= n)</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="type">int</span> m;</span><br><span class="line">      <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">      n=in.nextDouble();</span><br><span class="line">      m=in.nextInt();</span><br><span class="line"><span class="comment">//设置二分边界</span></span><br><span class="line">      l = <span class="number">0</span>;</span><br><span class="line">      r = n;</span><br><span class="line"><span class="comment">//实数二分</span></span><br><span class="line">      <span class="keyword">while</span> (l + eps &lt; r) &#123;</span><br><span class="line">          <span class="type">double</span> <span class="variable">mid</span> <span class="operator">=</span> (l + r) / <span class="number">2</span>;</span><br><span class="line">          <span class="keyword">if</span> (pd(mid, m))</span><br><span class="line">              r = mid;</span><br><span class="line">          <span class="keyword">else</span></span><br><span class="line">              l = mid;</span><br><span class="line">      &#125;</span><br><span class="line">      System.out.println(String.format(<span class="string">&quot;%.7f&quot;</span>,l));</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">   关于string.format 的应用</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  double num = 123.4567899;</span></span><br><span class="line"><span class="comment">  System.out.print(String.format(&quot;%f %n&quot;, num)); // 123.456790</span></span><br><span class="line"><span class="comment">  System.out.print(String.format(&quot;%a %n&quot;, num)); // 0x1.edd3c0bb46929p6</span></span><br><span class="line"><span class="comment">  System.out.print(String.format(&quot;%g %n&quot;, num)); // 123.457</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  可用标识：</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        -，在最小宽度内左对齐,不可以与0标识一起使用。</span></span><br><span class="line"><span class="comment">        0，若内容长度不足最小宽度，则在左边用0来填充。</span></span><br><span class="line"><span class="comment">        #，对8进制和16进制，8进制前添加一个0,16进制前添加0x。</span></span><br><span class="line"><span class="comment">        +，结果总包含一个+或-号。</span></span><br><span class="line"><span class="comment">        空格，正数前加空格，负数前加-号。</span></span><br><span class="line"><span class="comment">        ,，只用与十进制，每3位数字间用,分隔。</span></span><br><span class="line"><span class="comment">        (，若结果为负数，则用括号括住，且不显示符号。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  可用转换符：</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        b，布尔类型，只要实参为非false的布尔类型，均格式化为字符串true，否则为字符串false。</span></span><br><span class="line"><span class="comment">        n，平台独立的换行符, 也可通过System.getProperty(&quot;line.separator&quot;)获取。</span></span><br><span class="line"><span class="comment">        f，浮点数型（十进制）。显示9位有效数字，且会进行四舍五入。如99.99。</span></span><br><span class="line"><span class="comment">        a，浮点数型（十六进制）。</span></span><br><span class="line"><span class="comment">        e，指数类型。如9.38e+5。</span></span><br><span class="line"><span class="comment">        g，浮点数型（比%f，%a长度短些，显示6位有效数字，且会进行四舍五入）</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>二分的题目主要是必须要求是单调的，一般会有条件等字眼。做这种题目主要还是找到递增或者递减的序列，然后关于序列的判定条件。或者通过观察时间复杂度来看是否可以使用二分，二分法的题目相对来说比较明显，设计起来也比较简单，模板不用死记硬背，理解一下，很快就可以独立写出来。</p>

      
    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%A4%87%E8%B5%9B/" rel="tag"><i class="fas fa-tags"></i>蓝桥杯备赛</a>
        
      </div>
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="https://actz123.github.io/2024/02/22/%E5%B9%B6%E6%9F%A5%E9%9B%86/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="zdx">
        <meta itemprop="description" content="">
        <meta itemprop="image" content="/images/avatar.png">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="Actz">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2024/02/22/%E5%B9%B6%E6%9F%A5%E9%9B%86/" itemprop="url">并查集</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2024-02-22T17:34:10+08:00">2024-02-22 17:34:10</time></span>
        </span>
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-categories">
          
          <i class="far fa-folder-open"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%86%B2%E5%88%BA%E8%90%A5/" itemprop="url" rel="index"><span itemprop="name">蓝桥杯冲刺营</span></a></span><i class="fas fa-angle-right"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%86%B2%E5%88%BA%E8%90%A5/6-%E5%B9%B6%E6%9F%A5%E9%9B%86/" itemprop="url" rel="index"><span itemprop="name">6.并查集</span></a></span>
        </span>
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <h1 id="并查集"><a href="#并查集" class="headerlink" title="并查集"></a>并查集</h1><p>并查集是我认为最巧妙优雅的一种数据结构，他主要适用于解决元素分组和不相交集合的合并和查询问题。</p>
<p>并查集也非常简单，但是，并查集在比赛中非常常用，能够极大的降低算法复杂度得数据结构，是必须要掌握熟练的。</p>
<p>本节课的难度相对较低，无论是实现方式还是算法原理。</p>
<h3 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h3><p>1.并查集的原理与实现方式 2.并查集的路径压缩 3.启发式合并</p>
<h4 id="并查集-1"><a href="#并查集-1" class="headerlink" title="并查集"></a>并查集</h4><p>并查集是大量的树（单个节点也算是树）经过合并生成一系列家族森林的过程。</p>
<p>每个集合也就是每棵树都是由根节点确定，也可以理解为每个家族的族长就是根节点。</p>
<p>举个数字和字母的例子如下。</p>
<p><strong>初始森林：</strong> <img src="/./../imgs/%E5%B9%B6%E6%9F%A5%E9%9B%86/8d24aa87dbdd7a5823ff707ccd72b82a-0.jpeg" alt="图片描述"></p>
<p><strong>经过的一系列合并后的状态（不唯一，举个栗子）：</strong></p>
<p><img src="/./../imgs/%E5%B9%B6%E6%9F%A5%E9%9B%86/626f64ab4d60b09b29e811ff903f10c6-0.jpeg" alt="图片描述"></p>
<p><strong>最终合并后的状态：</strong></p>
<p>注：示意图的位置与存储物理位置无关，只代表逻辑关系。</p>
<p><img src="/./../imgs/%E5%B9%B6%E6%9F%A5%E9%9B%86/f4ba4e2ff16c8ffb15e361188d5c71b7-0.jpeg" alt="图片描述"></p>
<h4 id="并查集的存储结构"><a href="#并查集的存储结构" class="headerlink" title="并查集的存储结构"></a>并查集的存储结构</h4><p>并查集采用数组表示整个森林，初始时每个森林的树根为自己。</p>
<p>C++ 存储与初始化：</p>
<figure class="hljs highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># <span class="keyword">define</span> Maxn 200</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 假设所需数量为200</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> fa[Maxn+<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>;i&lt;=Maxn; i++)</span><br><span class="line">        fa[i]=i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Python 存储与初始化：</p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Maxn = <span class="number">200</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 假设所需的数量为200</span></span><br><span class="line"></span><br><span class="line">fa = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">init</span>():</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(Maxn + <span class="number">1</span>):</span><br><span class="line"></span><br><span class="line">        fa.append(i)</span><br></pre></td></tr></table></figure>

<p>Java 存储与初始化：</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">Maxn</span> <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="type">int</span> fa[]=<span class="keyword">new</span> <span class="title class_">int</span>[Maxn+<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span> ;i&lt;=Maxn;i++)</span><br><span class="line"></span><br><span class="line">        fa[i]=i;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h4><p>一般用递归法实现对代表元素的查询：递归访问父节点，直至根节点（根节点的标志就是父节点是本身）。</p>
<p>根节点相同的两个元素属于同一个集合，上面也说到了。所以判断 <code>A</code>，<code>B</code> 是否属于一个集合直接判断 <code>find(A)</code>和 <code>find(B)</code>是否相同即可。</p>
<p>由于代码比较简单，我们先给出查询的代码：</p>
<p>C++ 查询：</p>
<figure class="hljs highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(fa[x] == x)</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">find</span>(fa[x]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Python 查询：</p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">find</span>(<span class="params">x</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> fa[x] == x:</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> find(fa[x])</span><br></pre></td></tr></table></figure>

<p>Java 查询：</p>
<figure class="hljs highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">static</span>  <span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(fa[x] == x)</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">find</span>(fa[x]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们这里有一个问题，当树的链很长时，比如：</p>
<p><img src="/./../imgs/%E5%B9%B6%E6%9F%A5%E9%9B%86/567d8282a596647b92af905396d88ee4-0.jpeg" alt="图片描述"></p>
<p>如果每次都查询最后一个，那么他就要经过多次递归，非常消耗时间，这时候我们就要引入路径压缩。</p>
<h4 id="路径压缩"><a href="#路径压缩" class="headerlink" title="路径压缩"></a>路径压缩</h4><p>路径压缩是为了解决当树的高度过高的时候，提高查询时效的方法。</p>
<p>解决方式也很简单，在递归的同时将路径压缩，那么上面的图经过一次查询后的效果如下。</p>
<p><img src="/./../imgs/%E5%B9%B6%E6%9F%A5%E9%9B%86/58877fc5b4c8482c0c5c44ef1aeb8adf-0.jpeg" alt="图片描述"></p>
<p>其实，实现方式也非常简单，只需要将查询代码修改即可，代码如下：</p>
<p>C++ 查询带路径压缩：</p>
<figure class="hljs highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x == fa[x])</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        fa[x] = <span class="built_in">find</span>(fa[x]);</span><br><span class="line">        <span class="comment">//父节点设为根节点</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> fa[x];</span><br><span class="line">        <span class="comment">//返回父节点</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Python 查询带路径压缩：</p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">find</span>(<span class="params">x</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> fa[x] == x:</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line"></span><br><span class="line">        fa[x] = find(fa[x]);</span><br><span class="line">        <span class="comment">#父节点设为根节点</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span>  fa[x]</span><br><span class="line">        <span class="comment"># 返回父节点</span></span><br></pre></td></tr></table></figure>

<p>Java 查询带路径压缩：</p>
<figure class="hljs highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">static</span>  <span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x == fa[x])</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        fa[x] = <span class="built_in">find</span>(fa[x]);</span><br><span class="line">        <span class="comment">//父节点设为根节点</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> fa[x];</span><br><span class="line">        <span class="comment">//返回父节点</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="合并"><a href="#合并" class="headerlink" title="合并"></a>合并</h4><p>合并的方式很简单，就是把一颗树的根节点设置为另一棵树的根节点即可。</p>
<p>还有一种方式是按秩合并，但是我们使用路径压缩时间复杂度就已经很低了，如果在引入 <code>rank</code> 相对会有些复杂。而且对于我们的使用路径压缩一种方式就已经足够。并且路径压缩和按秩合并一起使用时会影响 <code>rank</code> 准确性，所以我们采用普通的合并与优化后的查找即可。</p>
<p><img src="/./../imgs/%E5%B9%B6%E6%9F%A5%E9%9B%86/15fd5c72e7f73740bd1cc2ab4c0e3bf7-0.jpeg" alt="图片描述"></p>
<p>合并后：</p>
<p><img src="/./../imgs/%E5%B9%B6%E6%9F%A5%E9%9B%86/29a76e16a78eec6765c066f0158b236b-0.jpeg" alt="图片描述"></p>
<p>C++ 合并：</p>
<figure class="hljs highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">merge</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    fa[<span class="built_in">find</span>(i)] = <span class="built_in">find</span>(j);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Python 合并：</p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">merge</span>(<span class="params">x,y</span>):</span><br><span class="line"></span><br><span class="line">    fa[find(x)] = find(y)</span><br></pre></td></tr></table></figure>

<p>Java 合并：</p>
<figure class="hljs highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">merge</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    fa[<span class="built_in">find</span>(i)] = <span class="built_in">find</span>(j);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>合并优化：</strong></p>
<p>除此之外还有一个优化是启发式合并，其实这个启发式是泛指有很多的合并算法都叫启发式合并，我们这里讲其中一种常用的启发式合并。合并时，选择哪棵树的根节点作为新树的根节点会影响未来操作的复杂度。我们可以按照子树大小去合并，小的合并到大的，以免发生退化。所以启发式合并的原理是在集合合并时将小的集合合并到大的集合里，也可以使 <code>find</code> 操作复杂度降低到  �(����)<em>O</em>(<em>l<strong>o</strong>g**n</em>)，在集合合并时还要增加一个更新集合大小的操作。</p>
<figure class="hljs highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">C++</span><br><span class="line"><span class="type">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span><span class="comment">//启发式合并</span></span><br><span class="line">&#123;</span><br><span class="line">    x=find(x);</span><br><span class="line">    y=find(y);</span><br><span class="line">    <span class="keyword">if</span>(x!=y)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(sz[x]&lt;sz[y])</span><br><span class="line">            swap(x,y);</span><br><span class="line">        sz[x]+=sz[y];</span><br><span class="line">        fa[y]=x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Java</span><br><span class="line">    public <span class="type">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">        x = find(x);</span><br><span class="line">        y = find(y);</span><br><span class="line">        <span class="keyword">if</span> (x != y) &#123;</span><br><span class="line">            <span class="keyword">if</span> (sz[x] &lt; sz[y]) &#123;</span><br><span class="line">                swap(x, y);</span><br><span class="line">            &#125;</span><br><span class="line">            sz[x] += sz[y];</span><br><span class="line">            fa[y] = x;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">python</span><br><span class="line"></span><br><span class="line">def <span class="title function_">merge</span><span class="params">(x, y, sz, fa)</span>:</span><br><span class="line">    x = find(x, fa)</span><br><span class="line">    y = find(y, fa)</span><br><span class="line">    <span class="keyword">if</span> x != y:</span><br><span class="line">        <span class="keyword">if</span> sz[x] &lt; sz[y]:</span><br><span class="line">            swap(x, y, fa)</span><br><span class="line">        sz[x] += sz[y]</span><br><span class="line">        fa[y] = x</span><br></pre></td></tr></table></figure>

<p>如果是一般的并查集题目用路径压缩就可以了，当然两种优化都用的话复杂度可以降得更低。两种优化都使用的话单次操作的复杂度才是  �(�)<em>O</em>(<em>α</em>)</p>
<h3 id="并查集相关题目讲解"><a href="#并查集相关题目讲解" class="headerlink" title="并查集相关题目讲解"></a>并查集相关题目讲解</h3><h4 id="合根植物"><a href="#合根植物" class="headerlink" title="合根植物"></a>合根植物</h4><p><a target="_blank" rel="noopener" href="https://www.lanqiao.cn/problems/110/learning/">题目链接</a></p>
<p>难度: 简单</p>
<p>标签: 并查集, 2017, 国赛</p>
<p><strong>题目描述:</strong></p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">w 星球的一个种植园，被分成 m×n 个小格子（东西方向 m 行，南北方向 n 列）。每个格子里种了一株合根植物。</span><br><span class="line"></span><br><span class="line">这种植物有个特点，它的根可能会沿着南北或东西方向伸展，从而与另一个格子的植物合成为一体。</span><br><span class="line"></span><br><span class="line">如果我们告诉你哪些小格子间出现了连根现象，你能说出这个园中一共有多少株合根植物吗？</span><br></pre></td></tr></table></figure>

<p><strong>输入描述:</strong></p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">第一行，两个整数 m,n，用空格分开，表示格子的行数、列数（1≤m,n≤1000）。</span><br><span class="line"></span><br><span class="line">接下来一行，一个整数 k (0≤k≤105 )，表示下面还有 k 行数据。</span><br><span class="line"></span><br><span class="line">接下来 k 行，每行两个整数 a，b，表示编号为 a 的小格子和编号为 b 的小格子合根了。</span><br><span class="line"></span><br><span class="line">格子的编号一行一行，从上到下，从左到右编号。</span><br><span class="line"></span><br><span class="line">比如：5×4 的小格子，编号：</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>行列</th>
<th>①</th>
<th>②</th>
<th>③</th>
<th>④</th>
</tr>
</thead>
<tbody><tr>
<td>①</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>②</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
</tr>
<tr>
<td>③</td>
<td>9</td>
<td>10</td>
<td>11</td>
<td>12</td>
</tr>
<tr>
<td>④</td>
<td>13</td>
<td>14</td>
<td>15</td>
<td>16</td>
</tr>
<tr>
<td>⑤</td>
<td>17</td>
<td>18</td>
<td>19</td>
<td>20</td>
</tr>
</tbody></table>
<p><strong>输出描述:</strong></p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">输出植物数量。</span><br></pre></td></tr></table></figure>

<p><strong>输入输出样例:</strong></p>
<p><strong>示例:</strong></p>
<p><strong>输入:</strong></p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">5 4</span><br><span class="line">16</span><br><span class="line">2 3</span><br><span class="line">1 5</span><br><span class="line">5 9</span><br><span class="line">4 8</span><br><span class="line">7 8</span><br><span class="line">9 10</span><br><span class="line">10 11</span><br><span class="line">11 12</span><br><span class="line">10 14</span><br><span class="line">12 16</span><br><span class="line">14 18</span><br><span class="line">17 18</span><br><span class="line">15 19</span><br><span class="line">19 20</span><br><span class="line">9 13</span><br><span class="line">13 17</span><br></pre></td></tr></table></figure>

<p><strong>输出:</strong></p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5</span><br></pre></td></tr></table></figure>

<p>样例图例如下：</p>
<p><img src="/./../imgs/%E5%B9%B6%E6%9F%A5%E9%9B%86/uid1580206-20210202-1612249467438.png" alt="图片描述"></p>
<p><strong>运行限制:</strong></p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">最大运行时间：1s</span><br><span class="line">最大运行内存: 256M</span><br></pre></td></tr></table></figure>

<p><strong>题目解析：</strong></p>
<p>这个题就是一个模板并查集的题目，每次合根就是一次 <code>Merge</code>。</p>
<p>最后答案就是看有多少个根即可，那么就是看有多少个<code>fa[x]=x</code>即可。</p>
<p>直接按照题目编写即可，部分解析直接写进题目。</p>
<p><strong>答案解析：</strong></p>
<p>C++ 描述：</p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta"># <span class="keyword">define</span> Maxn 2000000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 假设所需数量为200</span></span><br><span class="line"><span class="type">int</span> fa[Maxn+<span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>; i&lt;=Maxn; i++)</span><br><span class="line">        fa[i]=i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x == fa[x])</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        fa[x] = <span class="built_in">find</span>(fa[x]);</span><br><span class="line">        <span class="comment">//父节点设为根节点</span></span><br><span class="line">        <span class="keyword">return</span> fa[x];</span><br><span class="line">        <span class="comment">//返回父节点</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">merge</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    fa[<span class="built_in">find</span>(i)] = <span class="built_in">find</span>(j);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> n,m; <span class="comment">//n行，m列</span></span><br><span class="line"><span class="type">int</span> k; <span class="comment">//k次合根</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">init</span>();</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;m&gt;&gt;k;</span><br><span class="line">    <span class="type">int</span> a,b;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=k; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin&gt;&gt;a&gt;&gt;b;</span><br><span class="line">        <span class="built_in">merge</span>(a,b); <span class="comment">//合根</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n*m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(fa[i]==i) <span class="comment">//找根节点</span></span><br><span class="line">        &#123;</span><br><span class="line">            ans++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;ans;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Python 描述：</p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">Maxn = <span class="number">2000000</span></span><br><span class="line"><span class="comment"># 假设所需的数量为200</span></span><br><span class="line">fa = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">init</span>():</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(Maxn + <span class="number">1</span>):</span><br><span class="line">        fa.append(i)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find</span>(<span class="params">x</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> fa[x] == x:</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line"></span><br><span class="line">        fa[x] = find(fa[x])</span><br><span class="line">        <span class="comment">#父节点设为根节点</span></span><br><span class="line">        <span class="keyword">return</span>  fa[x]</span><br><span class="line">        <span class="comment"># 返回父节点</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">merge</span>(<span class="params">x,y</span>):</span><br><span class="line"></span><br><span class="line">    fa[find(x)] = find(y)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    n,m=<span class="built_in">input</span>().split()</span><br><span class="line">    k=<span class="built_in">input</span>()</span><br><span class="line">    n=<span class="built_in">int</span>(n)</span><br><span class="line">    m=<span class="built_in">int</span>(m)</span><br><span class="line">    k=<span class="built_in">int</span>(k)</span><br><span class="line">    Maxn=m*n+<span class="number">100</span></span><br><span class="line">    init()</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(k):</span><br><span class="line">        a,b= <span class="built_in">input</span>().split()</span><br><span class="line">        a=<span class="built_in">int</span>(a)</span><br><span class="line">        b=<span class="built_in">int</span>(b)</span><br><span class="line">        merge(a,b)</span><br><span class="line">    ans=<span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(m*n): <span class="comment">#从0开始</span></span><br><span class="line">        index=i+<span class="number">1</span> <span class="comment">#调整一下，应该是从1开始</span></span><br><span class="line">        <span class="keyword">if</span>(fa[index]==index):</span><br><span class="line">            ans+=<span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(ans)</span><br></pre></td></tr></table></figure>

<p>Java 描述：</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span>  <span class="type">int</span> Maxn;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> fa[];</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span> ;i&lt;=Maxn;i++)</span><br><span class="line">            fa[i]=i;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span>  <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> x)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(x == fa[x])</span><br><span class="line">            <span class="keyword">return</span> x;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            fa[x] = find(fa[x]);</span><br><span class="line">            <span class="comment">//父节点设为根节点</span></span><br><span class="line">            <span class="keyword">return</span> fa[x];</span><br><span class="line">            <span class="comment">//返回父节点</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span></span><br><span class="line">    &#123;</span><br><span class="line">        fa[find(i)] = find(j);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> n,m; <span class="comment">//n行，m列</span></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> k; <span class="comment">//k次合根</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        n=in.nextInt();</span><br><span class="line">        m=in.nextInt();</span><br><span class="line">        k=in.nextInt();</span><br><span class="line">        Maxn=m*n;</span><br><span class="line">        fa=<span class="keyword">new</span> <span class="title class_">int</span>[Maxn+<span class="number">100</span>];</span><br><span class="line">        init();</span><br><span class="line">        <span class="type">int</span> a,b;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=k; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            a=in.nextInt();</span><br><span class="line">            b=in.nextInt();</span><br><span class="line">            merge(a,b);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n*m; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(fa[i]==i)</span><br><span class="line">            &#123;</span><br><span class="line">                ans++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(ans);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="修改数组"><a href="#修改数组" class="headerlink" title="修改数组"></a>修改数组</h4><p><a target="_blank" rel="noopener" href="https://www.lanqiao.cn/problems/185/learning/">题目链接</a></p>
<p>难度: 中等</p>
<p>标签: 并查集, 2019, 省赛</p>
<p><strong>题目描述:</strong> 给定一个长度为 �<em>N</em> 的数组 �&#x3D;[�1,�2,⋅⋅⋅,��]<em>A</em>&#x3D;[<em>A</em>1,<em>A</em>2,⋅⋅⋅,<em>A**N</em>]，数组中有可能有重复出现的整数。</p>
<p>现在小明要按以下方法将其修改为没有重复整数的数组。小明会依次修改�2,�3,⋅⋅⋅,��<em>A</em>2,<em>A</em>3,⋅⋅⋅,<em>A**N</em>。</p>
<p>当修改 ��<em>A**i</em> 时，小明会检查 ��<em>A**i</em> 是否在 �1<em>A</em>1 ∼ ��−1<em>A**i</em>−1 中出现过。如果出现过，则小明会给 ��<em>A**i</em> 加上 1 ；如果新的 ��<em>A**i</em> 仍在之前出现过，小明会持续给 ��<em>A**i</em> 加 1 ，直 到 ��<em>A**i</em> 没有在 �1<em>A</em>1 ∼ ��−1<em>A**i</em>−1 中出现过。</p>
<p>当 ��<em>A**N</em> 也经过上述修改之后，显然 �<em>A</em> 数组中就没有重复的整数了。</p>
<p>现在给定初始的 �<em>A</em> 数组，请你计算出最终的 �<em>A</em> 数组。</p>
<p><strong>输入:</strong></p>
<p>第一行包含一个整数 �<em>N</em>。</p>
<p>第二行包含 �<em>N</em> 个整数 �1,�2,⋅⋅⋅,��<em>A</em>1,<em>A</em>2,⋅⋅⋅,<em>A**N</em>。</p>
<p>其中，1≤�≤105，1≤��≤1061≤<em>N</em>≤105，1≤<em>A**i</em>≤106。</p>
<p><strong>输出：</strong></p>
<p>输出 �<em>N</em> 个整数，依次是最终的 �1,�2,⋅⋅⋅,��<em>A</em>1,<em>A</em>2,⋅⋅⋅,<em>A**N</em>。</p>
<p><strong>输入输出样例:</strong></p>
<p>输入</p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">2 1 1 3 4</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2 1 3 4 5</span><br></pre></td></tr></table></figure>

<p><strong>运行限制:</strong></p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">最大运行时间：1s</span><br><span class="line">最大运行内存: 128M</span><br></pre></td></tr></table></figure>

<p><strong>题目解析：</strong></p>
<p>第一步，先初始化并查集。</p>
<p>第二步，读入数组并作如下处理：</p>
<p>如果这数字在之前没出现过那么他的值应该就是自己，并将其加入集合，此后再出现这个数字那么就要输出这个数字加 11，所以将这个数字的根节点设置为这个数字+1+1 即可。</p>
<p>如果这个数字之前出现过那么这个数字应该变成根节点的值，根节点的值是之前出现过的值加+1+1。</p>
<p>然后重复简单的逻辑即可，现在是维护一个之前出现过的集合，每个出现过的数字会把根节点设置为比他大 11 的数字，重复这个过程即可完成题意。</p>
<p>我们之前说过，因为输入输出是分开的，这里直接输出就行，不必在使用数组存储。</p>
<p>比如样例：</p>
<figure class="hljs highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">2 1 1 3 4</span><br><span class="line"></span><br><span class="line">首先因为 2 没出现过现在，所以初始化后的 fa[2] 等于2</span><br><span class="line"></span><br><span class="line">所以直接输出2 即可。</span><br><span class="line"></span><br><span class="line">此时 2 已经出现过了，下次遇见2就要输出3，所以这里我们使fa[2]等于3</span><br><span class="line"></span><br><span class="line">或者使用merge(2,3);</span><br><span class="line"></span><br><span class="line">然后输入1，因为1 也没有出现过，所以重复 2 的操作即可。</span><br><span class="line"></span><br><span class="line">输出fa[1]。</span><br><span class="line"></span><br><span class="line">令fa[1]=2，但是fa[2]=3,因为2也出现过</span><br><span class="line"></span><br><span class="line">这样fa[1]=fa[2]=3</span><br><span class="line"></span><br><span class="line">当然这里只需要执行merge(2,3)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">然后输入1，因为1 之前出现过，而且他的值我们之前也处理好了，直接输出即可。</span><br><span class="line"></span><br><span class="line">输出fa[1],即3。</span><br><span class="line"></span><br><span class="line">使用merge(3,4)</span><br><span class="line"></span><br><span class="line">然后重复上述过程，代码如下：</span><br><span class="line"></span><br><span class="line">        输入X :Input(X)</span><br><span class="line"></span><br><span class="line">        找到根节点: X=find(X);</span><br><span class="line"></span><br><span class="line">        输出应该是多少：Print(X)</span><br><span class="line"></span><br><span class="line">        将根节点加+1处理：merge(X,X+1);</span><br></pre></td></tr></table></figure>

<p><strong>答案解析：</strong></p>
<p>C++ 描述：</p>
<figure class="hljs highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta"># <span class="keyword">define</span> Maxn 2000000</span></span><br><span class="line"><span class="comment">// 假设所需数量为2000000</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> fa[Maxn+<span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>; i&lt;=Maxn; i++)</span><br><span class="line">        fa[i]=i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x == fa[x])</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        fa[x] = <span class="built_in">find</span>(fa[x]);</span><br><span class="line">        <span class="comment">//父节点设为根节点</span></span><br><span class="line">        <span class="keyword">return</span> fa[x];</span><br><span class="line">        <span class="comment">//返回父节点</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">merge</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    fa[<span class="built_in">find</span>(i)] = <span class="built_in">find</span>(j);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">init</span>();</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> t;</span><br><span class="line">        cin&gt;&gt;t;</span><br><span class="line">        t=<span class="built_in">find</span>(t);</span><br><span class="line">        cout&lt;&lt;t&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">        <span class="built_in">merge</span>(t,t+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Python 描述：</p>
<figure class="hljs highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">Maxn = <span class="number">2000000</span></span><br><span class="line"><span class="comment"># 假设所需的数量为200</span></span><br><span class="line">fa = []</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">init</span>():</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(Maxn + <span class="number">1</span>):</span><br><span class="line">        fa.append(i)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">if</span> fa[x] == x:</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        fa[x] = find(fa[x]);</span><br><span class="line">        <span class="comment">#父节点设为根节点</span></span><br><span class="line">        <span class="keyword">return</span>  fa[x]</span><br><span class="line">        <span class="comment"># 返回父节点</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">merge</span>(<span class="params">x,y</span>):</span><br><span class="line">    fa[find(x)] = find(y)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    n=<span class="built_in">input</span>()</span><br><span class="line">    A=<span class="built_in">input</span>().split()</span><br><span class="line">    A=<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>,A))</span><br><span class="line">    Maxn=<span class="built_in">len</span>(A)+<span class="number">100</span></span><br><span class="line">    init()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(A)):</span><br><span class="line"></span><br><span class="line">        t=find(A[i])</span><br><span class="line">        <span class="built_in">print</span>(t,end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">        merge(t,t+<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<p>Java 描述：</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">static</span>  <span class="type">int</span> Maxn=<span class="number">1000005</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> fa[];</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span> ;i&lt;=Maxn;i++)</span><br><span class="line">            fa[i]=i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span>  <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> x)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(x == fa[x])</span><br><span class="line">            <span class="keyword">return</span> x;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            fa[x] = find(fa[x]);</span><br><span class="line">            <span class="comment">//父节点设为根节点</span></span><br><span class="line">            <span class="keyword">return</span> fa[x];</span><br><span class="line">            <span class="comment">//返回父节点</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span></span><br><span class="line">    &#123;</span><br><span class="line">        fa[find(i)] = find(j);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> n,m; <span class="comment">//n行，m列</span></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> k; <span class="comment">//k次合根</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        n=in.nextInt();</span><br><span class="line">        fa=<span class="keyword">new</span> <span class="title class_">int</span>[Maxn+<span class="number">100</span>];</span><br><span class="line">        init();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> t;</span><br><span class="line">            t=in.nextInt();</span><br><span class="line">            t=find(t);</span><br><span class="line">            System.out.print(t+<span class="string">&quot; &quot;</span>);</span><br><span class="line">            merge(t,t+<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>并查集的思想非常简单，但是我们也看到了题目有点复杂，稍微一点改变就是另一种方向。并查集代码实现非常简单，但重点还是看对于题目的把握，这个数据结构不仅直接出题目，并且也会杂糅到别的算法里面，所以他的应用非常广泛，需要我们牢牢地掌握。</p>

      
    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%A4%87%E8%B5%9B/" rel="tag"><i class="fas fa-tags"></i>蓝桥杯备赛</a>
        
      </div>
      
    </footer>
  </article>
  
  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/2/"><i class="fas fa-angle-right" aria-label="Next Page"></i></a>
  </nav>
  
  
</div>

          </div>
          
          
        </div>
      </div>
    </main>
    
<footer id="footer" class="footer" style="background: #33363b;">
  <div class="container">
    <div class="back-to-top">
      <button id="back-to-top"><i class="fas fa-angle-double-up" aria-label="Back to Top"></i></button>
    </div>
    <div class="footer-container">
      <div class="footer-left">
        <div class="copyright">
          <span class="author">zdx</span><span class="year"><i class="far fa-copyright"></i>2024</span>
        </div>
        
        <div class="busuanzi">
          <span id="busuanzi_container_site_pv"><i class="fas fa-eye" aria-label="Site Visit Count" aria-hidden="false"></i><span id="busuanzi_value_site_pv"></span></span><span id="busuanzi_container_site_uv"><i class="fas fa-user" aria-label="Site User Count" aria-hidden="false"></i><span id="busuanzi_value_site_uv"></span></span><span id="busuanzi_container_page_pv"><i class="far fa-file-alt"></i><span id="busuanzi_value_page_pv" aria-label="Page Click Count" aria-hidden="false"></span></span>
        </div>
        
      </div>
      <div class="footer-right">
        <div class="custom-info">
          
          托管于<i class="fab fa-github-alt"></i><a href="https://pages.github.com/" target="_blank">GitHub Pages</a>
          
        </div>
        <div class="powered-by">
          Proudly Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> | Theme is <a href="https://github.com/AlynxZhou/hexo-theme-aria/" target="_blank">ARIA</a>
        </div>
      </div>
    </div>
  </div>
</footer>


  </body>
</html>
